{"ast":null,"code":"import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{scoreBoard}from'./comSokuho/scoreBoard';import{outCount}from'./comSokuho/outCount';import{runnerCount}from'./comSokuho/runnerCount';import{freeWrite}from'./comSokuho/freeWrite';import{BaseballButton}from'./comSokuho/baseballButton';import\"./comSokuho/CSS/scoreBoard.css\";import{useEffect,useState}from'react';import Popupfield from\"./comSokuho/onisi_popup/onisi_popup\";import GameEndPopup from\"./comSokuho/GameEndPopup/GameEndPopup\";import EditPoint from\"./comSokuho/scoreCorrection/EditPoint\";import OptionButton from'../../../OtherPage/optionFunc/OptionButton';import{TitleBar}from'../../../OtherPage/TitleBar/TitleBar';//プルダウン\nimport{PullDown}from'./comSokuho/PullDown/PullDown';import{PullDownMember}from'./comSokuho/PullDown/PullDownMember';import{useSearchParams,useNavigate}from'react-router-dom';//バックエンドのurlを取得\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var backendUrl=require(\"../../../../DB/communication\").backendUrl;//選手読み込み\nvar setBatter=function setBatter(setBattingOrder,setBattingOrder2,urlSchoolId,urlSchoolId2,urlGameId,nowPlayingMember,setNowPlayingMember){var ditectPitcher=function ditectPitcher(data){var result=0;data.map(function(data,ind){if(data.position===\"ピッチャー\"){result=ind;}});return result;};fetch(backendUrl+\"/member/starting_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({game_id:urlGameId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(data1){setBattingOrder(data1);fetch(backendUrl+\"/member/starting_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({game_id:urlGameId,school_id:urlSchoolId2})}).then(function(response){return response.json();}).then(function(data2){setBattingOrder2(data2);nowPlayingMember[0].pitcher=ditectPitcher(data2);nowPlayingMember[1].pitcher=ditectPitcher(data1);setNowPlayingMember(nowPlayingMember);});});};//自作プルダウン\nvar makePulldown=function makePulldown(pulldownId,ArrayList,idText,nowSelected,setNowSelected){//pulldownIdは0でいいです。\n//ArrayListは表示したい要素を並べた配列です、普通の配列ではなく連想配列です。\n//idテキストは連想配列の属性を書きます。\n//nowSelectedは今プルダウンで何が選択されているかが入ります。初期値は[0]で、これは0番目の値が選択されている状態です。\n//setNowSelectedはnowSelecedの値をuseStateの機能で上書きする関数です。setNowSelected(更新値)とすれば、nowSelectedに更新値が入ります。\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"select\",{id:\"tekitouni\",onChange:function onChange(e){//ステイトが変化すると再描画させるための文、これがないと再描画されない\n//なお、消すと再描画はされないが内部は変化する\nnowSelected=nowSelected.slice(0,nowSelected.length);nowSelected[pulldownId]=e.target.value;setNowSelected(nowSelected);console.log(nowSelected);},children:ArrayList.map(function(component,ind){return/*#__PURE__*/_jsx(\"option\",{value:ind,children:component[idText]});})})});};//打席編集\nvar editBattersBox=function editBattersBox(battersBox,battersBoxAll,nowSelected,setNowIningState,setNowOutCountState,setRunnerCountState,setNowPlayingMember,setFreeWriteState,setcanvasX1,setcanvasY1,setAddScoreState,battingOrder,battingOrder2){console.log(battersBox);var touchedCoordinate=battersBox.touched_coordinate.split(\"_\");var teamBBatter=0;var teamAPitchar=0;var value=battersBox.inning;for(var i=nowSelected;i>=0;i--){if(value!==battersBoxAll[i].inning){teamBBatter=battersBoxAll[i].player_id;teamAPitchar=battersBoxAll[i].pitchar_id;break;}}setNowIningState([Math.floor(battersBox.inning/10-1),battersBox.inning%10-1]);setNowOutCountState(battersBox.outcount);setRunnerCountState([battersBox.base/100>=1,battersBox.base/10>=1&&battersBox.base===0,battersBox.base===1]);setFreeWriteState(battersBox.text_inf);setcanvasX1(touchedCoordinate[0]);setcanvasY1(touchedCoordinate[1]);setAddScoreState(battersBox.score);setNowPlayingMember([{batter:battingOrder.findIndex(function(u){return u.player_id===battersBox.player_id;}),pitcher:battingOrder2.findIndex(function(u){return u.player_id===battersBox.pitchar_id;})},{batter:teamBBatter,pitcher:teamAPitchar}]);console.log(battingOrder2.findIndex(function(u){return u.player_id===battersBox.pitchar_id;}));console.log(battersBox.player_id);};//一時打席情報登録用のテーブル作成\nvar TmpTableCreate=function TmpTableCreate(urlGameId){fetch(backendUrl+\"/daseki/tmp_table_create\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({table_name:urlGameId})}).then(function(response){return response.text();}).then(function(data){console.log(data);});};//テーブル存在確認\nvar TmpTableCheck=function TmpTableCheck(urlGameId,TmpTableCreate,TmpDasekiCall,urlTournamentId,urlSchoolId,urlSchoolId2,setNowIningState,setScoreState,setNowOutCountState,registeredMember1,registeredMember2,setNowPlayingMember,battingOrder,setBattingOrder,battingOrder2,setBattingOrder2,setRunnerCountState,setDasekiAll){fetch(backendUrl+\"/daseki/tmp_table_check\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({table_name:urlGameId})}).then(function(response){return response.text();}).then(function(data){if(data===\"not exist\"){TmpTableCreate(urlGameId);console.log(data);}else if(data===\"exist\"){console.log(data);TmpDasekiCall(urlGameId,urlTournamentId,urlSchoolId,urlSchoolId2,setNowIningState,setScoreState,setNowOutCountState,registeredMember1,registeredMember2,setNowPlayingMember,battingOrder,setBattingOrder,battingOrder2,setBattingOrder2,setRunnerCountState,setDasekiAll);}});};////試合情報受け取り（速報用）\nvar TmpDasekiCall=function TmpDasekiCall(urlGameId,urlTournamentId,urlSchoolId,urlSchoolId2,setNowIningState,setScoreState,setNowOutCountState,registeredMember1,registeredMember2,setNowPlayingMember,battingOrder,setBattingOrder,battingOrder2,setBattingOrder2,setRunnerCountState,setDasekiAll){fetch(backendUrl+\"/daseki/tmp_daseki_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({table_name:urlGameId})}).then(function(response){return response.json();}).then(function(data){console.log(data);setDasekiAll(data);//空っぽなら無視\nif(data.length!==0){var latestDasaki=data[data.length-1];if(latestDasaki.outcount===3){//アウトカウント取得\nsetNowOutCountState(0);//イニング取得\nif(latestDasaki.inning%10===1){setNowIningState([Math.floor(latestDasaki.inning/10)-1,1]);}else{setNowIningState([Math.floor(latestDasaki.inning/10)-1,0]);}//ランナー取得\nsetRunnerCountState([false,false,false]);}else{//アウトカウント取得\nsetNowOutCountState(latestDasaki.outcount);//イニング取得\nsetNowIningState([Math.floor(latestDasaki.inning/10)-1,latestDasaki.inning%10-1]);//ランナー取得\nsetRunnerCountState([latestDasaki.base[0]===\"1\",latestDasaki.base[1]===\"1\",latestDasaki.base[2]===\"1\"]);}//スコアの取得\nvar initialSchoolId=data[0].school_id;var _require=require(\"../../../../DB/Score\"),Score=_require.Score;var SolveScore=Score;var inningCount=0;var leastSchoolId=data[0].school_id;data.map(function(u){if(initialSchoolId===u.school_id){if(SolveScore[0][inningCount]===null)SolveScore[0][inningCount]=0;if(leastSchoolId!==u.school_id)inningCount=inningCount+1;console.log(SolveScore[0][inningCount]);SolveScore[0][inningCount]=SolveScore[0][inningCount]+u.score;leastSchoolId=u.school_id;}else{if(SolveScore[1][inningCount]===null)SolveScore[1][inningCount]=0;SolveScore[1][inningCount]=SolveScore[1][inningCount]+u.score;leastSchoolId=u.school_id;}});setScoreState(SolveScore);//今現在のプレイヤー取得\nfetch(backendUrl+\"/member/starting_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({game_id:urlGameId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(data1){setBattingOrder(data1);//打順を持ってくる\nfetch(backendUrl+\"/member/starting_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({game_id:urlGameId,school_id:urlSchoolId2})}).then(function(response){return response.json();}).then(function(data2){var teamABatter=data1.findIndex(function(u){return u.player_id===latestDasaki.player_id;})+1;var teamAPitchar=data2.findIndex(function(u){return u.player_id===latestDasaki.pitchar_id;});var teamBBatter=data2.findIndex(function(u){return u.player_id===latestDasaki.player_id;})+1;var teamBPitchar=data1.findIndex(function(u){return u.player_id===latestDasaki.pitchar_id;});//打順に存在しないか最初の打者であるとき、もしくは打順最後の打者であるとき\nif(teamABatter===9)teamABatter=0;if(teamAPitchar===-1)teamAPitchar=0;if(teamBBatter===9)teamBBatter=0;if(teamBPitchar===-1)teamBPitchar=0;setNowPlayingMember([{batter:teamABatter,pitcher:teamAPitchar},{batter:teamBBatter,pitcher:teamBPitchar}]);});});// //後攻チームのメンバー取得\n// if ((latestDasaki.inning / 100 >= 2) || (Math.floor(latestDasaki.inning / 10) === 2)) {\n//     fetch(backendUrl + \"/member/tournament_member_call\", {\n//         method: \"POST\",\n//         mode: \"cors\",\n//         headers: {\n//             \"Content-Type\": \"application/json\",\n//         },\n//         body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId2 }),\n//     })\n//         .then((response) => response.json())\n//         .then((data) => { })\n// }\n// //先行チームのメンバー取得\n// else if ((Math.floor(latestDasaki.inning / 100) === 1) || (Math.floor(latestDasaki.inning / 10) === 1)) {\n//     fetch(backendUrl + \"/member/tournament_member_call\", {\n//         method: \"POST\",\n//         mode: \"cors\",\n//         headers: {\n//             \"Content-Type\": \"application/json\",\n//         },\n//         body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\n//     })\n//         .then((response) => response.json())\n//         .then((data) => {\n//         })\n//     console.log(latestDasaki.player_id)\n// }\n}});};//一時打席情報登録用のテーブルに打席情報登録（UPSERTを使うかも）\nvar DasekiRegister=function DasekiRegister(sendInfo){fetch(backendUrl+\"/daseki/daseki_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(sendInfo)}).then(function(response){return response.text();}).then(function(data){console.log(data);});};//選手登録された選手読み込む\nvar loadRegisteredMember=function loadRegisteredMember(setRegisteredMember,urlTournamentId,urlSchoolId){fetch(backendUrl+\"/member/tournament_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(data){setRegisteredMember(data);});};var canvasSize=1000;var homebase=400;var InputPlayGame=function InputPlayGame(){//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};//urlから値を読み出す\nvar _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var urlTournamentId=searchParams.get(\"urlTournamentId\");var urlTournamentName=searchParams.get(\"urlTournamentName\");var urlSchoolId=searchParams.get(\"urlSchoolId\");var urlSchoolName=searchParams.get(\"urlSchoolName\");var urlSchoolId2=searchParams.get(\"urlSchoolId2\");var urlSchoolName2=searchParams.get(\"urlSchoolName2\");var urlGameId=searchParams.get(\"urlGameId\");//Score記録 左が裏表、右が回数 イニングとは逆\nvar _require2=require(\"../../../../DB/Score\"),Score=_require2.Score;var _useState=useState(Score),_useState2=_slicedToArray(_useState,2),scoreState=_useState2[0],setScoreState=_useState2[1];//Scoreの加算値の監視\nvar _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),addScoreState=_useState4[0],setAddScoreState=_useState4[1];//今のイニング 左が回、右が表裏\nvar _useState5=useState([0,0]),_useState6=_slicedToArray(_useState5,2),nowIningState=_useState6[0],setNowIningState=_useState6[1];//自由記述内容を監視\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),freeWriteState=_useState8[0],setFreeWriteState=_useState8[1];//いらんかも\n//自由記述編集モードのフラグ\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),freeWriteModeFlag=_useState10[0],setFreeWriteModeFlag=_useState10[1];//多分打球の種類だと思われる\nvar _useState11=useState(2),_useState12=_slicedToArray(_useState11,2),flag=_useState12[0],setFlag=_useState12[1];//打者の結果を記録する(0:何もなし, 1:ヒット,2:四球, 3:死球)\nvar _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),batterResult=_useState14[0],setBatterResult=_useState14[1];//緑プルダウン用\nvar _useState15=useState(15),_useState16=_slicedToArray(_useState15,2),nowPosition=_useState16[0],setNowPosition=_useState16[1];//アウトカウント\nvar _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),nowOutCountState=_useState18[0],setNowOutCountState=_useState18[1];//ランナーカウント\nvar _useState19=useState([false,false,false]),_useState20=_slicedToArray(_useState19,2),runnerCountState=_useState20[0],setRunnerCountState=_useState20[1];//選手登録情報を読み込む\nvar _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),registeredMember1=_useState22[0],setRegisteredMember1=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),registeredMember2=_useState24[0],setRegisteredMember2=_useState24[1];//打席一覧情報のステイト\nvar _useState25=useState([{at_bat_id:1,ball_kind:\"2\",base:\"000\",deadball:0,foreball:0,game_id:1,hit:0,inning:11,outcount:3,pass:0,pinch:\"0\",pitchar_id:21,player_id:7,school_id:1,score:0,text_inf:\"アウト:ピッチャーフライ\",total_score:0,touched_coordinate:\"400_450\"}]),_useState26=_slicedToArray(_useState25,2),dasekiAll=_useState26[0],setDasekiAll=_useState26[1];//打席一覧情報のプルダウンの選択状況を管理するステイト\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),nowSelected=_useState28[0],setNowSelected=_useState28[1];//打順と打者のリスト\nvar _useState29=useState([[{player_name_kanji:'丹羽 長秀'},{player_name_kanji:'柴田 勝家'}],0]),_useState30=_slicedToArray(_useState29,2),battingOrder=_useState30[0],setBattingOrder=_useState30[1];var _useState31=useState([[{player_name_kanji:'丹羽 長秀'},{player_name_kanji:'柴田 勝家'}],0]),_useState32=_slicedToArray(_useState31,2),battingOrder2=_useState32[0],setBattingOrder2=_useState32[1];//今の打順と今のピッチャーが誰なのかを2チーム文記録する\nvar _useState33=useState([{batter:0,pitcher:0},{batter:0,pitcher:0}]),_useState34=_slicedToArray(_useState33,2),nowPlayingMember=_useState34[0],setNowPlayingMember=_useState34[1];//代打フラグ 0なら代打でない 1なら代打\nvar _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),isPinch=_useState36[0],setIsPinch=_useState36[1];//画面解像度取得\nvar sw=document.documentElement.clientWidth;// 画面の横幅\nvar sh=document.documentElement.clientHeight;// 画面の高さ\n// contextを状態として持つ\nvar _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),context=_useState38[0],setContext=_useState38[1];var _useState39=useState(0),_useState40=_slicedToArray(_useState39,2),canvasX1=_useState40[0],setcanvasX1=_useState40[1];var _useState41=useState(0),_useState42=_slicedToArray(_useState41,2),canvasY1=_useState42[0],setcanvasY1=_useState42[1];//一つのStateで管理しようぜ的な試み\n//const [canvasXY, setCanvasXY] = useState({x:0, y:0})\n// コンポーネントの初期化完了後コンポーネント状態にコンテキストを登録\nuseEffect(function(){var canvas=document.getElementById(\"canvas\");var canvasContext=canvas.getContext(\"2d\");setContext(canvasContext);canvas.addEventListener(\"click\",function(e){var rect=e.target.getBoundingClientRect();// ブラウザ上での座標を求める\nvar viewX=e.clientX-rect.left,viewY=e.clientY-rect.top;// 表示サイズとキャンバスの実サイズの比率を求める\nvar scaleWidth=canvas.clientWidth/canvas.width,scaleHeight=canvas.clientHeight/canvas.height;// ブラウザ上でのクリック座標をキャンバス上に変換\nvar canvasX=Math.floor(viewX/scaleWidth),canvasY=Math.floor(viewY/scaleHeight);console.log(canvasX,canvasY);setcanvasX1(canvasX);setcanvasY1(canvasY);});},[]);// 状態にコンテキストが登録されたらそれに対して操作できる\nuseEffect(function(){if(context!==null){//setLoaded(true)\n//}\n// 波線描画\n// 0度状態でキャンバス中心〜マウス座標までの距離分の波線を描画して、マウス座標との角度分、回転する\nvar drawWaveLine=function drawWaveLine(x,y,mx,my,amplitude,waveLen,color,ctx){var BEGIN=0,CTRL=1,END=2;var x1=0,y1=1;var distance=calcDistance(x,y,mx,my);var cycle=Math.floor(distance/waveLen);var ps=[[x,y],[0,0],[x,y]];ctx.save();ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(ps[BEGIN][x1],ps[BEGIN][y1]);var rad=calcRadian(x,y,mx,my);if(0!==rad){ctx.translate(x,y);ctx.rotate(rad);ctx.translate(-x,-y);}for(var i=0;i<cycle;i++){ps[END][x1]+=waveLen;ps[CTRL][x1]=ps[BEGIN][x1]+(ps[END][x1]-ps[BEGIN][x1])*0.5;ps[CTRL][y1]=ps[BEGIN][y1]+(i%2!==0?-amplitude:amplitude);ctx.quadraticCurveTo(ps[CTRL][x1],ps[CTRL][y1],ps[END][x1],ps[END][y1]);ps[BEGIN][x1]=ps[END][x1];ps[BEGIN][y1]=ps[END][y1];}ps[END][x1]+=distance-calcDistance(x,y,ps[END][x1],ps[END][y1]);ps[CTRL][x1]=ps[BEGIN][x1]+(ps[END][x1]-ps[BEGIN][x1])*0.5;ps[CTRL][y1]=ps[BEGIN][y1]+(cycle%2!==0?-amplitude:amplitude);ctx.quadraticCurveTo(ps[CTRL][x1],ps[CTRL][y1],ps[END][x1],ps[END][y1]);ctx.stroke();ctx.restore();};// 2点間座標からラジアン算出\nvar calcRadian=function calcRadian(x,y,mx,my){return Math.atan2(my-y,mx-x);};// 2点間座標の距離算出\nvar calcDistance=function calcDistance(x,y,mx,my){return Math.hypot(my-y,mx-x);};//const img = new Image()\n//img.src = \"img.jpg\" // 描画する画像など\n//img.onload = () => {\n//context.drawImage(img, 0, 0)\n// 更にこれに続いて何か処理をしたい場合\n//削除\ncontext.clearRect(0,0,canvasSize,canvasSize);//緑グラウンド\ncontext.beginPath();context.fillStyle=\"green\";context.moveTo(homebase,homebase);context.arc(homebase,homebase,homebase,-Math.PI/4,5*Math.PI/4,true);context.closePath();context.fill();//茶グラウンド\ncontext.beginPath();context.fillStyle=\"sienna\";context.moveTo(homebase,homebase);context.arc(homebase,homebase,3.5*homebase/5,-Math.PI/4,5*Math.PI/4,true);context.closePath();context.fill();//白線\ncontext.beginPath();context.moveTo(homebase,homebase);context.lineTo(homebase*5/4,homebase*3/4);context.lineTo(homebase,homebase/2);context.lineTo(homebase*3/4,homebase*3/4);context.strokeStyle=\"white\";context.lineWidth=2;context.closePath();context.stroke();var w=0.03*homebase;//ベースの幅\nvar margin=10;//ベース位置調整用\n//ベースの色 １：３塁、２：２塁、３:１塁\nvar baseColor2=[];for(var i=0;i<3;i++){if(runnerCountState[i]){baseColor2[2-i]=\"blue\";}else{baseColor2[2-i]=\"white\";}}context.strokeStyle=\"black\";//３塁ベース\ncontext.fillStyle=baseColor2[2];context.beginPath();context.moveTo(homebase*3/4,homebase*3/4-margin);context.lineTo(homebase*3/4-w,homebase*3/4+w-margin);context.lineTo(homebase*3/4,homebase*3/4+w*2-margin);context.lineTo(homebase*3/4+w,homebase*3/4+w-margin);context.closePath();context.fill();context.lineWidth=1;context.stroke();//2塁ベース\ncontext.fillStyle=baseColor2[1];context.beginPath();context.moveTo(homebase,homebase/2-margin);context.lineTo(homebase-w,homebase/2+w-margin);context.lineTo(homebase,homebase/2+w*2-margin);context.lineTo(homebase+w,homebase/2+w-margin);context.closePath();context.fill();context.stroke();//1塁ベース\ncontext.fillStyle=baseColor2[0];context.beginPath();context.moveTo(homebase*5/4,homebase*3/4-margin);context.lineTo(homebase*5/4-w,homebase*3/4+w-margin);context.lineTo(homebase*5/4,homebase*3/4+w*2-margin);context.lineTo(homebase*5/4+w,homebase*3/4+w-margin);context.closePath();context.fill();context.stroke();context.fillStyle=\"white\";//ホームベース\ncontext.beginPath();context.moveTo(homebase+w*2/3,homebase-w*2/3);context.lineTo(homebase-w*2/3,homebase-w*2/3);context.lineTo(homebase-w*2/3,homebase+w/3);context.lineTo(homebase,homebase+w);context.lineTo(homebase+w*2/3,homebase+w/3);context.closePath();context.fill();context.stroke();//打球\ncontext.beginPath();context.moveTo(homebase,homebase);// let flag = 2;   //１が直線、２がフライ、3がゴロ\nif(flag===1){console.log(\"flag1\");context.lineTo(canvasX1,canvasY1);}if(flag===2){var start={x:500,y:500};var cp={x:500,y:start.y/5*3};//ここで曲がり具合調整\ncontext.quadraticCurveTo(cp.x,cp.y,canvasX1,canvasY1);}if(flag===3){console.log(\"flag3\");drawWaveLine(500,500,canvasX1,canvasY1,20,20,\"red\",context);}context.strokeStyle=\"red\";context.lineWidth=5;context.stroke();}},[canvasX1,canvasY1,flag,runnerCountState]);useEffect(function(){//データベースからデータをもらうために呼び出す\nsetBatter(setBattingOrder,setBattingOrder2,urlSchoolId,urlSchoolId2,urlGameId,nowPlayingMember,setNowPlayingMember);loadRegisteredMember(setRegisteredMember1,urlTournamentId,urlSchoolId);loadRegisteredMember(setRegisteredMember2,urlTournamentId,urlSchoolId2);//テーブル存在確認\nTmpTableCheck(urlGameId,TmpTableCreate,TmpDasekiCall,urlTournamentId,urlSchoolId,urlSchoolId2,setNowIningState,setScoreState,setNowOutCountState,registeredMember1,registeredMember2,setNowPlayingMember,battingOrder,setBattingOrder,battingOrder2,setBattingOrder2,setRunnerCountState,setDasekiAll);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"InputPlayGame\",children:[/*#__PURE__*/_jsx(TitleBar,{TitleText:\"速報入力画面\",PageTransition:PageTransition,valueUrl:-1}),/*#__PURE__*/_jsx(EditPoint,{}),/*#__PURE__*/_jsx(OptionButton,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"parts\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"scoreBoard\",children:scoreBoard(scoreState,nowIningState,urlSchoolName,urlSchoolName2)}),/*#__PURE__*/_jsx(\"div\",{className:\"optionButtons\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"outCountsAndRunnerCounts\",children:[outCount(nowOutCountState,setNowOutCountState),\"\\uFF13\\u5841\\uFF1A\\uFF12\\u5841\\uFF1A\\uFF11\\u5841\",runnerCount(runnerCountState,setRunnerCountState)]}),/*#__PURE__*/_jsx(\"div\",{className:\"BatterAndPitcher\"}),/*#__PURE__*/_jsx(\"div\",{className:\"BatterPitcher\",children:/*#__PURE__*/_jsx(PullDownMember,{battingOrder:battingOrder,battingOrder2:battingOrder2,setBattingOrder:setBattingOrder,registeredMember1:registeredMember1,registeredMember2:registeredMember2,nowIningState:nowIningState,nowPlayingMember:nowPlayingMember,setNowPlayingMember:setNowPlayingMember,setIsPinch:setIsPinch})}),/*#__PURE__*/_jsx(\"div\",{className:\"freeWrite\",children:freeWrite(freeWriteState,setFreeWriteState,freeWriteModeFlag,setFreeWriteModeFlag)}),/*#__PURE__*/_jsx(PullDown,{nowPosition:nowPosition,setNowPosition:setNowPosition,setcanvasX1:setcanvasX1,setcanvasY1:setcanvasY1,setFlag:setFlag,setFreeWriteState:setFreeWriteState,setBatterResult:setBatterResult,addScoreState:addScoreState,GameEndPopup_field:GameEndPopup}),/*#__PURE__*/_jsx(\"div\",{className:\"diamond\",children:/*#__PURE__*/_jsx(\"canvas\",{width:\"800\",height:\"800\",id:\"canvas\",className:\"diamondPng\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Buttons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"baseballButtons\",children:BaseballButton(addScoreState,setAddScoreState)}),/*#__PURE__*/_jsx(\"div\",{className:\"updateButton\",children:/*#__PURE__*/_jsx(Popupfield,{nowIningState:nowIningState//今が何回なのか\n,setNowIningState:setNowIningState//今が何回なのかの変更関数\n,addScoreState:addScoreState,setAddScoreState:setAddScoreState,scoreState:scoreState,setScoreState:setScoreState,nowOutCountState:nowOutCountState,setNowOutCountState:setNowOutCountState,DasekiRegister:DasekiRegister,urlGameId:urlGameId,urlSchoolId:urlSchoolId,urlSchoolId2:urlSchoolId2,nowPlayingMember:nowPlayingMember,setNowPlayingMember:setNowPlayingMember,battingOrder:battingOrder,battingOrder2:battingOrder2,runnerCountState:runnerCountState,freeWriteState:freeWriteState,setFreeWriteState:setFreeWriteState,canvasX1:canvasX1,setcanvasX1:setcanvasX1,canvasY1:canvasY1,setcanvasY1:setcanvasY1,flag:flag,batterResult:batterResult,setBatterResult:setBatterResult,isPinch:isPinch,setIsPinch:setIsPinch})})]}),makePulldown(0,dasekiAll,\"at_bat_id\",nowSelected,setNowSelected),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return editBattersBox(dasekiAll[nowSelected],dasekiAll,nowSelected,setNowIningState,setNowOutCountState,setRunnerCountState,setNowPlayingMember,setFreeWriteState,setcanvasX1,setcanvasY1,setAddScoreState,battingOrder,battingOrder2);},children:\"\\u4FEE\\u6B63\\u6253\\u5E2D\\u9078\\u629E\"})]})]});};export default InputPlayGame;","map":{"version":3,"names":["scoreBoard","outCount","runnerCount","freeWrite","BaseballButton","useEffect","useState","Popupfield","GameEndPopup","EditPoint","OptionButton","TitleBar","PullDown","PullDownMember","useSearchParams","useNavigate","backendUrl","require","setBatter","setBattingOrder","setBattingOrder2","urlSchoolId","urlSchoolId2","urlGameId","nowPlayingMember","setNowPlayingMember","ditectPitcher","data","result","map","ind","position","fetch","method","mode","headers","body","JSON","stringify","game_id","school_id","then","response","json","data1","data2","pitcher","makePulldown","pulldownId","ArrayList","idText","nowSelected","setNowSelected","e","slice","length","target","value","console","log","component","editBattersBox","battersBox","battersBoxAll","setNowIningState","setNowOutCountState","setRunnerCountState","setFreeWriteState","setcanvasX1","setcanvasY1","setAddScoreState","battingOrder","battingOrder2","touchedCoordinate","touched_coordinate","split","teamBBatter","teamAPitchar","inning","i","player_id","pitchar_id","Math","floor","outcount","base","text_inf","score","batter","findIndex","u","TmpTableCreate","table_name","text","TmpTableCheck","TmpDasekiCall","urlTournamentId","setScoreState","registeredMember1","registeredMember2","setDasekiAll","latestDasaki","initialSchoolId","Score","SolveScore","inningCount","leastSchoolId","teamABatter","teamBPitchar","DasekiRegister","sendInfo","loadRegisteredMember","setRegisteredMember","tournament_id","canvasSize","homebase","InputPlayGame","navigate","PageTransition","url","searchParams","get","urlTournamentName","urlSchoolName","urlSchoolName2","scoreState","addScoreState","nowIningState","freeWriteState","freeWriteModeFlag","setFreeWriteModeFlag","flag","setFlag","batterResult","setBatterResult","nowPosition","setNowPosition","nowOutCountState","runnerCountState","setRegisteredMember1","setRegisteredMember2","at_bat_id","ball_kind","deadball","foreball","hit","pass","pinch","total_score","dasekiAll","player_name_kanji","isPinch","setIsPinch","sw","document","documentElement","clientWidth","sh","clientHeight","context","setContext","canvasX1","canvasY1","canvas","getElementById","canvasContext","getContext","addEventListener","rect","getBoundingClientRect","viewX","clientX","left","viewY","clientY","top","scaleWidth","width","scaleHeight","height","canvasX","canvasY","drawWaveLine","x","y","mx","my","amplitude","waveLen","color","ctx","BEGIN","CTRL","END","x1","y1","distance","calcDistance","cycle","ps","save","strokeStyle","beginPath","moveTo","rad","calcRadian","translate","rotate","quadraticCurveTo","stroke","restore","atan2","hypot","clearRect","fillStyle","arc","PI","closePath","fill","lineTo","lineWidth","w","margin","baseColor2","start","cp"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/src/AllPage/InputAll/Sokuho/SokuhoPlaygame/InputPlayGame.jsx"],"sourcesContent":["import { scoreBoard } from './comSokuho/scoreBoard';\r\nimport { outCount } from './comSokuho/outCount'\r\nimport { runnerCount } from './comSokuho/runnerCount';\r\nimport { freeWrite } from './comSokuho/freeWrite'\r\nimport { BaseballButton } from './comSokuho/baseballButton'\r\nimport \"./comSokuho/CSS/scoreBoard.css\"\r\nimport { useEffect, useState } from 'react';\r\nimport Popupfield from \"./comSokuho/onisi_popup/onisi_popup\";\r\nimport GameEndPopup from \"./comSokuho/GameEndPopup/GameEndPopup\"\r\nimport EditPoint from \"./comSokuho/scoreCorrection/EditPoint\"\r\nimport OptionButton from '../../../OtherPage/optionFunc/OptionButton';\r\n\r\nimport { TitleBar } from '../../../OtherPage/TitleBar/TitleBar';\r\n\r\n//プルダウン\r\nimport { PullDown } from './comSokuho/PullDown/PullDown'\r\nimport { PullDownMember } from './comSokuho/PullDown/PullDownMember'\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\n\r\n//バックエンドのurlを取得\r\nconst backendUrl = require(\"../../../../DB/communication\").backendUrl;\r\n\r\n\r\n//選手読み込み\r\nconst setBatter = (setBattingOrder, setBattingOrder2, urlSchoolId, urlSchoolId2, urlGameId, nowPlayingMember, setNowPlayingMember) => {\r\n    const ditectPitcher = (data) => {\r\n        let result = 0\r\n        data.map((data, ind) => {\r\n            if (data.position === \"ピッチャー\") {\r\n                result = ind\r\n            }\r\n        })\r\n        return result\r\n    }\r\n\r\n    fetch(backendUrl + \"/member/starting_member_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ game_id: urlGameId, school_id: urlSchoolId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((data1) => {\r\n            setBattingOrder(data1)\r\n\r\n            fetch(backendUrl + \"/member/starting_member_call\", {\r\n                method: \"POST\",\r\n                mode: \"cors\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ game_id: urlGameId, school_id: urlSchoolId2 }),\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data2) => {\r\n                    setBattingOrder2(data2)\r\n                    nowPlayingMember[0].pitcher = ditectPitcher(data2)\r\n                    nowPlayingMember[1].pitcher = ditectPitcher(data1)\r\n                    setNowPlayingMember(nowPlayingMember)\r\n                })\r\n        })\r\n}\r\n\r\n//自作プルダウン\r\nconst makePulldown = (pulldownId, ArrayList, idText, nowSelected, setNowSelected) => {\r\n    //pulldownIdは0でいいです。\r\n    //ArrayListは表示したい要素を並べた配列です、普通の配列ではなく連想配列です。\r\n    //idテキストは連想配列の属性を書きます。\r\n    //nowSelectedは今プルダウンで何が選択されているかが入ります。初期値は[0]で、これは0番目の値が選択されている状態です。\r\n    //setNowSelectedはnowSelecedの値をuseStateの機能で上書きする関数です。setNowSelected(更新値)とすれば、nowSelectedに更新値が入ります。\r\n\r\n    return (\r\n        <>\r\n            <select id=\"tekitouni\"\r\n                onChange={(e) => {\r\n                    //ステイトが変化すると再描画させるための文、これがないと再描画されない\r\n                    //なお、消すと再描画はされないが内部は変化する\r\n                    nowSelected = nowSelected.slice(0, nowSelected.length);\r\n                    nowSelected[pulldownId] = e.target.value\r\n                    setNowSelected(nowSelected)\r\n                    console.log(nowSelected)\r\n                }\r\n                }>\r\n                {ArrayList.map((component, ind) => (\r\n                    <option value={ind}>{component[idText]}</option>\r\n                ))\r\n                }\r\n            </select>\r\n        </>\r\n    )\r\n}\r\n\r\n//打席編集\r\nconst editBattersBox = (battersBox, battersBoxAll, nowSelected,\r\n    setNowIningState, setNowOutCountState, setRunnerCountState, setNowPlayingMember,\r\n    setFreeWriteState, setcanvasX1, setcanvasY1, setAddScoreState, battingOrder, battingOrder2) => {\r\n\r\n    console.log(battersBox)\r\n    const touchedCoordinate = battersBox.touched_coordinate.split(\"_\")\r\n\r\n    let teamBBatter = 0;\r\n    let teamAPitchar = 0;\r\n\r\n    const value = battersBox.inning\r\n    for (let i = nowSelected; i >= 0; i--) {\r\n        if (value !== battersBoxAll[i].inning) {\r\n            teamBBatter = battersBoxAll[i].player_id\r\n            teamAPitchar = battersBoxAll[i].pitchar_id\r\n            break\r\n        }\r\n    }\r\n\r\n    setNowIningState([Math.floor(battersBox.inning / 10 - 1), battersBox.inning % 10 - 1])\r\n    setNowOutCountState(battersBox.outcount)\r\n    setRunnerCountState([battersBox.base / 100 >= 1, battersBox.base / 10 >= 1 && battersBox.base === 0, battersBox.base === 1])\r\n    setFreeWriteState(battersBox.text_inf)\r\n    setcanvasX1(touchedCoordinate[0])\r\n    setcanvasY1(touchedCoordinate[1])\r\n    setAddScoreState(battersBox.score)\r\n    setNowPlayingMember(\r\n        [{\r\n            batter: battingOrder.findIndex((u) => u.player_id === battersBox.player_id),\r\n            pitcher: battingOrder2.findIndex((u) => u.player_id === battersBox.pitchar_id)\r\n        },\r\n        {\r\n            batter: teamBBatter,\r\n            pitcher: teamAPitchar\r\n        }])\r\n    console.log(battingOrder2.findIndex((u) => u.player_id === battersBox.pitchar_id))\r\n    console.log(battersBox.player_id)\r\n\r\n\r\n\r\n}\r\n\r\n//一時打席情報登録用のテーブル作成\r\nconst TmpTableCreate = (urlGameId) => {\r\n\r\n    fetch(backendUrl + \"/daseki/tmp_table_create\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ table_name: urlGameId }),\r\n    })\r\n        .then((response) => response.text())\r\n        .then((data) => { console.log(data) })\r\n}\r\n\r\n//テーブル存在確認\r\nconst TmpTableCheck = (urlGameId, TmpTableCreate, TmpDasekiCall, urlTournamentId, urlSchoolId, urlSchoolId2,\r\n    setNowIningState, setScoreState, setNowOutCountState, registeredMember1, registeredMember2,\r\n    setNowPlayingMember, battingOrder, setBattingOrder, battingOrder2, setBattingOrder2, setRunnerCountState, setDasekiAll\r\n) => {\r\n\r\n    fetch(backendUrl + \"/daseki/tmp_table_check\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ table_name: urlGameId }),\r\n    })\r\n        .then((response) => response.text())\r\n        .then((data) => {\r\n            if (data === \"not exist\") { TmpTableCreate(urlGameId); console.log(data) }\r\n            else if (data === \"exist\") {\r\n                console.log(data)\r\n                TmpDasekiCall(urlGameId, urlTournamentId, urlSchoolId, urlSchoolId2,\r\n                    setNowIningState, setScoreState, setNowOutCountState, registeredMember1, registeredMember2,\r\n                    setNowPlayingMember, battingOrder, setBattingOrder, battingOrder2, setBattingOrder2, setRunnerCountState, setDasekiAll\r\n                )\r\n            }\r\n        })\r\n}\r\n\r\n////試合情報受け取り（速報用）\r\nconst TmpDasekiCall = (urlGameId, urlTournamentId, urlSchoolId, urlSchoolId2,\r\n    setNowIningState, setScoreState, setNowOutCountState, registeredMember1, registeredMember2,\r\n    setNowPlayingMember, battingOrder, setBattingOrder, battingOrder2, setBattingOrder2, setRunnerCountState, setDasekiAll) => {\r\n\r\n    fetch(backendUrl + \"/daseki/tmp_daseki_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ table_name: urlGameId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            console.log(data)\r\n            setDasekiAll(data)\r\n\r\n            //空っぽなら無視\r\n            if (data.length !== 0) {\r\n                let latestDasaki = data[data.length - 1]\r\n\r\n                if (latestDasaki.outcount === 3) {\r\n                    //アウトカウント取得\r\n                    setNowOutCountState(0)\r\n\r\n                    //イニング取得\r\n                    if (latestDasaki.inning % 10 === 1) {\r\n                        setNowIningState([Math.floor(latestDasaki.inning / 10) - 1, 1])\r\n                    }\r\n                    else {\r\n                        setNowIningState([Math.floor(latestDasaki.inning / 10) - 1, 0])\r\n                    }\r\n\r\n                    //ランナー取得\r\n                    setRunnerCountState([false, false, false])\r\n\r\n                }\r\n\r\n                else {\r\n                    //アウトカウント取得\r\n                    setNowOutCountState(latestDasaki.outcount)\r\n\r\n                    //イニング取得\r\n                    setNowIningState([Math.floor(latestDasaki.inning / 10) - 1, latestDasaki.inning % 10 - 1])\r\n\r\n                    //ランナー取得\r\n                    setRunnerCountState([latestDasaki.base[0] === \"1\", latestDasaki.base[1] === \"1\", latestDasaki.base[2] === \"1\"])\r\n\r\n\r\n                }\r\n\r\n                //スコアの取得\r\n                let initialSchoolId = data[0].school_id;\r\n                const { Score } = require(\"../../../../DB/Score\")\r\n                let SolveScore = Score\r\n                let inningCount = 0\r\n                let leastSchoolId = data[0].school_id\r\n                data.map((u) => {\r\n                    if (initialSchoolId === u.school_id) {\r\n                        if (SolveScore[0][inningCount] === null) SolveScore[0][inningCount] = 0\r\n                        if (leastSchoolId !== u.school_id) inningCount = inningCount + 1\r\n                        console.log(SolveScore[0][inningCount])\r\n                        SolveScore[0][inningCount] = SolveScore[0][inningCount] + u.score\r\n                        leastSchoolId = u.school_id\r\n                    }\r\n                    else {\r\n                        if (SolveScore[1][inningCount] === null) SolveScore[1][inningCount] = 0\r\n                        SolveScore[1][inningCount] = SolveScore[1][inningCount] + u.score\r\n                        leastSchoolId = u.school_id\r\n                    }\r\n                })\r\n                setScoreState(SolveScore)\r\n\r\n                //今現在のプレイヤー取得\r\n                fetch(backendUrl + \"/member/starting_member_call\", {\r\n                    method: \"POST\",\r\n                    mode: \"cors\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify({ game_id: urlGameId, school_id: urlSchoolId }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((data1) => {\r\n                        setBattingOrder(data1)\r\n                        //打順を持ってくる\r\n                        fetch(backendUrl + \"/member/starting_member_call\", {\r\n                            method: \"POST\",\r\n                            mode: \"cors\",\r\n                            headers: {\r\n                                \"Content-Type\": \"application/json\",\r\n                            },\r\n                            body: JSON.stringify({ game_id: urlGameId, school_id: urlSchoolId2 }),\r\n                        })\r\n                            .then((response) => response.json())\r\n                            .then((data2) => {\r\n\r\n                                let teamABatter = data1.findIndex((u) => u.player_id === latestDasaki.player_id) + 1\r\n                                let teamAPitchar = data2.findIndex((u) => u.player_id === latestDasaki.pitchar_id)\r\n                                let teamBBatter = data2.findIndex((u) => u.player_id === latestDasaki.player_id) + 1\r\n                                let teamBPitchar = data1.findIndex((u) => u.player_id === latestDasaki.pitchar_id)\r\n\r\n                                //打順に存在しないか最初の打者であるとき、もしくは打順最後の打者であるとき\r\n                                if (teamABatter === 9) teamABatter = 0\r\n                                if (teamAPitchar === -1) teamAPitchar = 0\r\n                                if (teamBBatter === 9) teamBBatter = 0\r\n                                if (teamBPitchar === -1) teamBPitchar = 0\r\n\r\n\r\n                                setNowPlayingMember(\r\n                                    [{\r\n                                        batter: teamABatter,\r\n                                        pitcher: teamAPitchar\r\n                                    },\r\n                                    {\r\n                                        batter: teamBBatter,\r\n                                        pitcher: teamBPitchar\r\n                                    }]\r\n                                )\r\n                            })\r\n                    })\r\n\r\n\r\n\r\n                // //後攻チームのメンバー取得\r\n                // if ((latestDasaki.inning / 100 >= 2) || (Math.floor(latestDasaki.inning / 10) === 2)) {\r\n                //     fetch(backendUrl + \"/member/tournament_member_call\", {\r\n                //         method: \"POST\",\r\n                //         mode: \"cors\",\r\n                //         headers: {\r\n                //             \"Content-Type\": \"application/json\",\r\n                //         },\r\n                //         body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId2 }),\r\n                //     })\r\n                //         .then((response) => response.json())\r\n                //         .then((data) => { })\r\n                // }\r\n                // //先行チームのメンバー取得\r\n                // else if ((Math.floor(latestDasaki.inning / 100) === 1) || (Math.floor(latestDasaki.inning / 10) === 1)) {\r\n                //     fetch(backendUrl + \"/member/tournament_member_call\", {\r\n                //         method: \"POST\",\r\n                //         mode: \"cors\",\r\n                //         headers: {\r\n                //             \"Content-Type\": \"application/json\",\r\n                //         },\r\n                //         body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\r\n                //     })\r\n                //         .then((response) => response.json())\r\n                //         .then((data) => {\r\n\r\n\r\n\r\n                //         })\r\n\r\n                //     console.log(latestDasaki.player_id)\r\n                // }\r\n            }\r\n\r\n\r\n        })\r\n}\r\n\r\n//一時打席情報登録用のテーブルに打席情報登録（UPSERTを使うかも）\r\nconst DasekiRegister = (sendInfo) => {\r\n\r\n    fetch(backendUrl + \"/daseki/daseki_register\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(sendInfo),\r\n    })\r\n        .then((response) => response.text())\r\n        .then((data) => {\r\n            console.log(data)\r\n        })\r\n}\r\n\r\n\r\n//選手登録された選手読み込む\r\nconst loadRegisteredMember = (setRegisteredMember, urlTournamentId, urlSchoolId) => {\r\n\r\n    fetch(backendUrl + \"/member/tournament_member_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: { \"Content-Type\": \"application/json\", },\r\n        body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((data) => { setRegisteredMember(data) })\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst canvasSize = 1000;\r\nconst homebase = 400;\r\n\r\nconst InputPlayGame = () => {\r\n\r\n    //ページ遷移用\r\n    const navigate = useNavigate()\r\n    const PageTransition = (url) => {\r\n        navigate(url)\r\n    }\r\n\r\n    //urlから値を読み出す\r\n    const [searchParams] = useSearchParams();\r\n    const urlTournamentId = searchParams.get(\"urlTournamentId\")\r\n    const urlTournamentName = searchParams.get(\"urlTournamentName\")\r\n    const urlSchoolId = searchParams.get(\"urlSchoolId\")\r\n    const urlSchoolName = searchParams.get(\"urlSchoolName\")\r\n    const urlSchoolId2 = searchParams.get(\"urlSchoolId2\")\r\n    const urlSchoolName2 = searchParams.get(\"urlSchoolName2\")\r\n    const urlGameId = searchParams.get(\"urlGameId\")\r\n\r\n    //Score記録 左が裏表、右が回数 イニングとは逆\r\n    const { Score } = require(\"../../../../DB/Score\")\r\n    const [scoreState, setScoreState] = useState(Score)\r\n\r\n    //Scoreの加算値の監視\r\n    const [addScoreState, setAddScoreState] = useState(0)\r\n\r\n    //今のイニング 左が回、右が表裏\r\n    const [nowIningState, setNowIningState] = useState([0, 0])\r\n\r\n    //自由記述内容を監視\r\n    const [freeWriteState, setFreeWriteState] = useState(\"\")//いらんかも\r\n\r\n    //自由記述編集モードのフラグ\r\n    const [freeWriteModeFlag, setFreeWriteModeFlag] = useState(false)\r\n\r\n    //多分打球の種類だと思われる\r\n    const [flag, setFlag] = useState(2);\r\n\r\n    //打者の結果を記録する(0:何もなし, 1:ヒット,2:四球, 3:死球)\r\n    const [batterResult, setBatterResult] = useState(0)\r\n\r\n\r\n    //緑プルダウン用\r\n    const [nowPosition, setNowPosition] = useState(15)\r\n\r\n    //アウトカウント\r\n    const [nowOutCountState, setNowOutCountState] = useState(0)\r\n\r\n    //ランナーカウント\r\n    const [runnerCountState, setRunnerCountState] = useState([false, false, false])\r\n\r\n    //選手登録情報を読み込む\r\n    const [registeredMember1, setRegisteredMember1] = useState([])\r\n    const [registeredMember2, setRegisteredMember2] = useState([])\r\n\r\n    //打席一覧情報のステイト\r\n    const [dasekiAll, setDasekiAll] = useState([{\r\n        at_bat_id: 1, ball_kind: \"2\", base: \"000\",\r\n        deadball: 0, foreball: 0, game_id: 1,\r\n        hit: 0, inning: 11, outcount: 3,\r\n        pass: 0, pinch: \"0\", pitchar_id: 21, player_id: 7,\r\n        school_id: 1, score: 0, text_inf: \"アウト:ピッチャーフライ\",\r\n        total_score: 0, touched_coordinate: \"400_450\"\r\n    }])\r\n\r\n    //打席一覧情報のプルダウンの選択状況を管理するステイト\r\n    const [nowSelected, setNowSelected] = useState([])\r\n\r\n    //打順と打者のリスト\r\n    const [battingOrder, setBattingOrder] = useState([[{ player_name_kanji: '丹羽 長秀' }, { player_name_kanji: '柴田 勝家' }], 0])\r\n    const [battingOrder2, setBattingOrder2] = useState([[{ player_name_kanji: '丹羽 長秀' }, { player_name_kanji: '柴田 勝家' }], 0])\r\n\r\n    //今の打順と今のピッチャーが誰なのかを2チーム文記録する\r\n    const [nowPlayingMember, setNowPlayingMember] = useState([{ batter: 0, pitcher: 0 }, { batter: 0, pitcher: 0 }])\r\n\r\n    //代打フラグ 0なら代打でない 1なら代打\r\n    const [isPinch, setIsPinch] = useState(0)\r\n\r\n    //画面解像度取得\r\n    var sw = document.documentElement.clientWidth; // 画面の横幅\r\n    var sh = document.documentElement.clientHeight; // 画面の高さ\r\n\r\n    // contextを状態として持つ\r\n    const [context, setContext] = useState(null)\r\n\r\n\r\n    const [canvasX1, setcanvasX1] = useState(0)\r\n    const [canvasY1, setcanvasY1] = useState(0)\r\n    //一つのStateで管理しようぜ的な試み\r\n    //const [canvasXY, setCanvasXY] = useState({x:0, y:0})\r\n\r\n    // コンポーネントの初期化完了後コンポーネント状態にコンテキストを登録\r\n\r\n    useEffect(() => {\r\n        const canvas = document.getElementById(\"canvas\")\r\n        const canvasContext = canvas.getContext(\"2d\")\r\n        setContext(canvasContext)\r\n\r\n\r\n\r\n        canvas.addEventListener(\"click\", e => {\r\n            const rect = e.target.getBoundingClientRect();\r\n\r\n            // ブラウザ上での座標を求める\r\n            const viewX = e.clientX - rect.left,\r\n                viewY = e.clientY - rect.top;\r\n\r\n            // 表示サイズとキャンバスの実サイズの比率を求める\r\n            const scaleWidth = canvas.clientWidth / canvas.width,\r\n                scaleHeight = canvas.clientHeight / canvas.height;\r\n\r\n            // ブラウザ上でのクリック座標をキャンバス上に変換\r\n            const canvasX = Math.floor(viewX / scaleWidth),\r\n                canvasY = Math.floor(viewY / scaleHeight);\r\n\r\n            console.log(canvasX, canvasY);\r\n            setcanvasX1(canvasX);\r\n            setcanvasY1(canvasY);\r\n        });\r\n    }, [])\r\n\r\n\r\n\r\n    // 状態にコンテキストが登録されたらそれに対して操作できる\r\n    useEffect(() => {\r\n        if (context !== null) {\r\n            //const img = new Image()\r\n            //img.src = \"img.jpg\" // 描画する画像など\r\n\r\n\r\n            //img.onload = () => {\r\n\r\n            //context.drawImage(img, 0, 0)\r\n            // 更にこれに続いて何か処理をしたい場合\r\n\r\n            //削除\r\n            context.clearRect(0, 0, canvasSize, canvasSize);\r\n\r\n            //緑グラウンド\r\n            context.beginPath();\r\n            context.fillStyle = \"green\";\r\n            context.moveTo(homebase, homebase);\r\n            context.arc(homebase, homebase, homebase, -Math.PI / 4, 5 * Math.PI / 4, true);\r\n            context.closePath();\r\n            context.fill();\r\n\r\n            //茶グラウンド\r\n            context.beginPath();\r\n            context.fillStyle = \"sienna\";\r\n            context.moveTo(homebase, homebase);\r\n            context.arc(homebase, homebase, 3.5 * homebase / 5, -Math.PI / 4, 5 * Math.PI / 4, true);\r\n            context.closePath();\r\n            context.fill();\r\n\r\n            //白線\r\n            context.beginPath();\r\n            context.moveTo(homebase, homebase);\r\n            context.lineTo(homebase * 5 / 4, homebase * 3 / 4);\r\n            context.lineTo(homebase, homebase / 2);\r\n            context.lineTo(homebase * 3 / 4, homebase * 3 / 4);\r\n            context.strokeStyle = \"white\";\r\n            context.lineWidth = 2;\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n\r\n            const w = 0.03 * homebase;  //ベースの幅\r\n            const margin = 10;    //ベース位置調整用\r\n\r\n            //ベースの色 １：３塁、２：２塁、３:１塁\r\n            let baseColor2 = [];\r\n            for (let i = 0; i < 3; i++) {\r\n                if (runnerCountState[i]) {\r\n                    baseColor2[2 - i] = \"blue\";\r\n                }\r\n                else {\r\n                    baseColor2[2 - i] = \"white\";\r\n                }\r\n            }\r\n\r\n\r\n            context.strokeStyle = \"black\";\r\n\r\n            //３塁ベース\r\n            context.fillStyle = baseColor2[2];\r\n            context.beginPath();\r\n            context.moveTo(homebase * 3 / 4, homebase * 3 / 4 - margin);\r\n            context.lineTo(homebase * 3 / 4 - w, homebase * 3 / 4 + w - margin);\r\n            context.lineTo(homebase * 3 / 4, homebase * 3 / 4 + w * 2 - margin);\r\n            context.lineTo(homebase * 3 / 4 + w, homebase * 3 / 4 + w - margin);\r\n            context.closePath();\r\n            context.fill();\r\n            context.lineWidth = 1;\r\n            context.stroke();\r\n\r\n            //2塁ベース\r\n            context.fillStyle = baseColor2[1];\r\n            context.beginPath();\r\n            context.moveTo(homebase, homebase / 2 - margin);\r\n            context.lineTo(homebase - w, homebase / 2 + w - margin);\r\n            context.lineTo(homebase, homebase / 2 + w * 2 - margin);\r\n            context.lineTo(homebase + w, homebase / 2 + w - margin);\r\n            context.closePath();\r\n            context.fill();\r\n            context.stroke();\r\n\r\n            //1塁ベース\r\n            context.fillStyle = baseColor2[0];\r\n            context.beginPath();\r\n            context.moveTo(homebase * 5 / 4, homebase * 3 / 4 - margin);\r\n            context.lineTo(homebase * 5 / 4 - w, homebase * 3 / 4 + w - margin);\r\n            context.lineTo(homebase * 5 / 4, homebase * 3 / 4 + w * 2 - margin);\r\n            context.lineTo(homebase * 5 / 4 + w, homebase * 3 / 4 + w - margin);\r\n            context.closePath();\r\n            context.fill();\r\n            context.stroke();\r\n\r\n            context.fillStyle = \"white\";\r\n            //ホームベース\r\n            context.beginPath();\r\n            context.moveTo(homebase + w * 2 / 3, homebase - w * 2 / 3);\r\n            context.lineTo(homebase - w * 2 / 3, homebase - w * 2 / 3);\r\n            context.lineTo(homebase - w * 2 / 3, homebase + w / 3);\r\n            context.lineTo(homebase, homebase + w);\r\n            context.lineTo(homebase + w * 2 / 3, homebase + w / 3);\r\n            context.closePath();\r\n            context.fill();\r\n            context.stroke();\r\n\r\n\r\n            //打球\r\n            context.beginPath();\r\n            context.moveTo(homebase, homebase);\r\n\r\n            // let flag = 2;   //１が直線、２がフライ、3がゴロ\r\n\r\n            if (flag === 1) {\r\n                console.log(\"flag1\")\r\n                context.lineTo(canvasX1, canvasY1)\r\n            }\r\n            if (flag === 2) {\r\n                let start = { x: 500, y: 500 };\r\n                let cp = { x: 500, y: start.y / 5 * 3 };    //ここで曲がり具合調整\r\n                context.quadraticCurveTo(cp.x, cp.y, canvasX1, canvasY1);\r\n            }\r\n            if (flag === 3) {\r\n                console.log(\"flag3\")\r\n                drawWaveLine(500, 500, canvasX1, canvasY1, 20, 20, \"red\", context);\r\n            }\r\n\r\n            context.strokeStyle = \"red\";\r\n            context.lineWidth = 5;\r\n            context.stroke();\r\n\r\n            //setLoaded(true)\r\n            //}\r\n\r\n\r\n\r\n\r\n            // 波線描画\r\n            // 0度状態でキャンバス中心〜マウス座標までの距離分の波線を描画して、マウス座標との角度分、回転する\r\n\r\n            function drawWaveLine(x, y, mx, my, amplitude, waveLen, color, ctx) {\r\n                const BEGIN = 0, CTRL = 1, END = 2;\r\n                const x1 = 0, y1 = 1;\r\n                var distance = calcDistance(x, y, mx, my);\r\n                var cycle = Math.floor(distance / waveLen);\r\n                var ps = [[x, y], [0, 0], [x, y]];\r\n\r\n                ctx.save();\r\n                ctx.strokeStyle = color;\r\n                ctx.beginPath();\r\n\r\n                ctx.moveTo(ps[BEGIN][x1], ps[BEGIN][y1]);\r\n\r\n                var rad = calcRadian(x, y, mx, my);\r\n                if (0 !== rad) {\r\n                    ctx.translate(x, y);\r\n                    ctx.rotate(rad);\r\n                    ctx.translate(-x, -y);\r\n                }\r\n\r\n                for (var i = 0; i < cycle; i++) {\r\n                    ps[END][x1] += waveLen;\r\n                    ps[CTRL][x1] = ps[BEGIN][x1] + ((ps[END][x1] - ps[BEGIN][x1]) * 0.5);\r\n                    ps[CTRL][y1] = ps[BEGIN][y1] + ((i % 2 !== 0) ? -amplitude : amplitude);\r\n\r\n                    ctx.quadraticCurveTo(ps[CTRL][x1], ps[CTRL][y1], ps[END][x1], ps[END][y1]);\r\n\r\n                    ps[BEGIN][x1] = ps[END][x1];\r\n                    ps[BEGIN][y1] = ps[END][y1];\r\n                }\r\n\r\n                ps[END][x1] += distance - calcDistance(x, y, ps[END][x1], ps[END][y1]);\r\n                ps[CTRL][x1] = ps[BEGIN][x1] + ((ps[END][x1] - ps[BEGIN][x1]) * 0.5);\r\n                ps[CTRL][y1] = ps[BEGIN][y1] + (((cycle) % 2 !== 0) ? -amplitude : amplitude);\r\n\r\n                ctx.quadraticCurveTo(ps[CTRL][x1], ps[CTRL][y1], ps[END][x1], ps[END][y1]);\r\n\r\n                ctx.stroke();\r\n                ctx.restore();\r\n            }\r\n\r\n            // 2点間座標からラジアン算出\r\n            function calcRadian(x, y, mx, my) {\r\n                return Math.atan2(my - y, mx - x);\r\n            }\r\n\r\n            // 2点間座標の距離算出\r\n            function calcDistance(x, y, mx, my) {\r\n                return Math.hypot(my - y, mx - x);\r\n            }\r\n        }\r\n    }, [canvasX1, canvasY1, flag, runnerCountState])\r\n\r\n    useEffect(() => {\r\n        //データベースからデータをもらうために呼び出す\r\n        setBatter(setBattingOrder, setBattingOrder2, urlSchoolId, urlSchoolId2, urlGameId, nowPlayingMember, setNowPlayingMember)\r\n        loadRegisteredMember(setRegisteredMember1, urlTournamentId, urlSchoolId)\r\n        loadRegisteredMember(setRegisteredMember2, urlTournamentId, urlSchoolId2)\r\n\r\n\r\n        //テーブル存在確認\r\n        TmpTableCheck(urlGameId, TmpTableCreate, TmpDasekiCall, urlTournamentId, urlSchoolId, urlSchoolId2,\r\n            setNowIningState, setScoreState, setNowOutCountState, registeredMember1, registeredMember2,\r\n            setNowPlayingMember, battingOrder, setBattingOrder, battingOrder2, setBattingOrder2, setRunnerCountState, setDasekiAll\r\n        )\r\n\r\n    }, [])\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"InputPlayGame\">\r\n            <TitleBar\r\n                TitleText={\"速報入力画面\"}\r\n                PageTransition={PageTransition}\r\n                valueUrl={-1}\r\n            />\r\n            <EditPoint></EditPoint>\r\n            <OptionButton />\r\n            <div className=\"parts\">\r\n                <div className=\"scoreBoard\">\r\n                    {scoreBoard(scoreState, nowIningState, urlSchoolName, urlSchoolName2)}\r\n                </div>\r\n                <div className=\"optionButtons\">\r\n                </div>\r\n                <div className=\"outCountsAndRunnerCounts\">\r\n                    {outCount(nowOutCountState, setNowOutCountState)}\r\n                    ３塁：２塁：１塁{runnerCount(runnerCountState, setRunnerCountState)}\r\n                </div>\r\n                <div className=\"BatterAndPitcher\">\r\n\r\n                </div>\r\n                <div className=\"BatterPitcher\">\r\n                    {/* プルダウン1  選手を表示するためのプルダウン */}\r\n                    <PullDownMember\r\n                        battingOrder={battingOrder}\r\n                        battingOrder2={battingOrder2}\r\n                        setBattingOrder={setBattingOrder}\r\n                        registeredMember1={registeredMember1}\r\n                        registeredMember2={registeredMember2}\r\n                        nowIningState={nowIningState}\r\n                        nowPlayingMember={nowPlayingMember}\r\n                        setNowPlayingMember={setNowPlayingMember}\r\n                        setIsPinch={setIsPinch}\r\n                    />\r\n                </div>\r\n                <div className=\"freeWrite\">\r\n                    {freeWrite(freeWriteState, setFreeWriteState, freeWriteModeFlag, setFreeWriteModeFlag)}\r\n                </div>\r\n\r\n                {/* プルダウン2 */}\r\n                <PullDown\r\n                    nowPosition={nowPosition}\r\n                    setNowPosition={setNowPosition}\r\n                    setcanvasX1={setcanvasX1}\r\n                    setcanvasY1={setcanvasY1}\r\n                    setFlag={setFlag}\r\n                    setFreeWriteState={setFreeWriteState}\r\n                    setBatterResult={setBatterResult}\r\n                    addScoreState={addScoreState}\r\n                    GameEndPopup_field={GameEndPopup}\r\n                />\r\n\r\n                <div className=\"diamond\">\r\n\r\n                    <canvas width=\"800\" height=\"800\" id=\"canvas\" className='diamondPng'></canvas>\r\n                </div>\r\n                <div className=\"Buttons\">\r\n                    <div className=\"baseballButtons\">\r\n                        {BaseballButton(addScoreState, setAddScoreState)}\r\n                    </div>\r\n                    <div className=\"updateButton\">\r\n                        {/* ポップアップ*/}\r\n                        <Popupfield\r\n                            nowIningState={nowIningState} //今が何回なのか\r\n                            setNowIningState={setNowIningState} //今が何回なのかの変更関数\r\n                            addScoreState={addScoreState}\r\n                            setAddScoreState={setAddScoreState}\r\n                            scoreState={scoreState}\r\n                            setScoreState={setScoreState}\r\n                            nowOutCountState={nowOutCountState}\r\n                            setNowOutCountState={setNowOutCountState}\r\n                            DasekiRegister={DasekiRegister}\r\n                            urlGameId={urlGameId}\r\n                            urlSchoolId={urlSchoolId}\r\n                            urlSchoolId2={urlSchoolId2}\r\n                            nowPlayingMember={nowPlayingMember}\r\n                            setNowPlayingMember={setNowPlayingMember}\r\n                            battingOrder={battingOrder}\r\n                            battingOrder2={battingOrder2}\r\n                            runnerCountState={runnerCountState}\r\n                            freeWriteState={freeWriteState}\r\n                            setFreeWriteState={setFreeWriteState}\r\n                            canvasX1={canvasX1}\r\n                            setcanvasX1={setcanvasX1}\r\n                            canvasY1={canvasY1}\r\n                            setcanvasY1={setcanvasY1}\r\n                            flag={flag}\r\n                            batterResult={batterResult}\r\n                            setBatterResult={setBatterResult}\r\n                            isPinch={isPinch}\r\n                            setIsPinch={setIsPinch}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {makePulldown(0, dasekiAll, \"at_bat_id\", nowSelected, setNowSelected)}\r\n                <button onClick={() =>\r\n                    editBattersBox(dasekiAll[nowSelected], dasekiAll, nowSelected,\r\n                        setNowIningState, setNowOutCountState, setRunnerCountState, setNowPlayingMember,\r\n                        setFreeWriteState, setcanvasX1, setcanvasY1, setAddScoreState, battingOrder, battingOrder2\r\n                    )}>修正打席選択</button>\r\n\r\n            </div>\r\n        </div >\r\n\r\n    )\r\n}\r\n\r\nexport default InputPlayGame"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
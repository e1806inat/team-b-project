{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\morim\\\\Desktop\\\\my_folder\\\\school\\\\lesson\\\\ensyu\\\\code\\\\team-b-project-output\\\\team-b-project\\\\frontend\\\\src\\\\AllPage\\\\LogInPage\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  // エラーメッセージ\n  const errorMsgText = \"ユーザ名またはパスワードが異なります\";\n\n  //ページ遷移用\n  const navigate = useNavigate();\n  const PageTransition = url => {\n    navigate(url);\n  };\n\n  //バックエンドのurlを取得\n  const backendUrl = require(\"../../DB/communication\").backendUrl;\n\n  //フロントの階層urlを表示\n  const routeUrl = require(\"../../DB/communication\").routeUrl;\n\n  // const initialValues = { loginID: \"test\", password: \"123456789\" };\n  const initialValues = {\n    loginID: \"\",\n    password: \"\"\n  };\n  const [formValues, setFormValues] = useState(initialValues);\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmit, setIsSubmit] = useState(false);\n  const [cookies, setCookie, removeCookie] = useCookies();\n  const handleChande = e => {\n    //console.log(e.target.value);\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues({\n      ...formValues,\n      [name]: value\n    });\n    //console.log(formValues);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    //ログイン情報を送信する\n    //バリデーションチェック\n    setFormErrors(validate(formValues));\n    setIsSubmit(true);\n    console.log(formValues);\n  };\n  const validate = values => {\n    const errors = {};\n    if (!values.loginID) {\n      errors.loginID = \"ログイン名を入力してください。\";\n    }\n    if (!values.password) {\n      errors.password = \"パスワードを入力してください。\";\n    } else if (values.password.length < 8) {\n      errors.password = \"8文字以上20文字以下のパスワードを入力してください\";\n    } else if (values.password.length > 20) {\n      errors.password = \"8文字以上20文字以下のパスワードを入力してください\";\n    }\n    return errors;\n  };\n  const handleLogin = () => {\n    fetch(backendUrl + \"/auth/login\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user_name: formValues.loginID,\n        password: formValues.password\n      })\n    }).then(response => response.json()).then(data => {\n      console.log(formErrors);\n      if (data[0].message === \"そのユーザは存在しません\") {\n        if (formErrors.length === 0) setFormErrors({\n          loginID: \"\",\n          password: errorMsgText\n        });\n      } else if (data[0].message === \"パスワードが異なります\") {\n        if (formErrors.length === 0) setFormErrors({\n          loginID: \"\",\n          password: errorMsgText\n        });\n      } else if (data === undefined) {} else {\n        console.log(data);\n        setCookie(\"sessionID\", data[\"session_id\"]);\n        PageTransition(routeUrl + \"/home\");\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"formContainer\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => handleSubmit(e),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u30ED\\u30B0\\u30A4\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"uiform\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"formField\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u30ED\\u30B0\\u30A4\\u30F3\\u540D\",\n                name: \"loginID\",\n                onChange: e => handleChande(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"errorMsg\",\n                children: formErrors.loginID\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"formField\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                placeholder: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n                name: \"password\",\n                onChange: e => handleChande(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"errorMsg\",\n                children: formErrors.password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"submitButton\",\n            onClick: handleLogin,\n            children: \"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u60C5\\u5831\\u3092\\u9001\\u4FE1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"ssdWBqPayFNRkrGbwNzZ9DHCS0Q=\", false, function () {\n  return [useNavigate, useCookies];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useCookies","useNavigate","Login","errorMsgText","navigate","PageTransition","url","backendUrl","require","routeUrl","initialValues","loginID","password","formValues","setFormValues","formErrors","setFormErrors","isSubmit","setIsSubmit","cookies","setCookie","removeCookie","handleChande","e","name","value","target","handleSubmit","preventDefault","validate","console","log","values","errors","length","handleLogin","fetch","method","mode","headers","body","JSON","stringify","user_name","then","response","json","data","message","undefined"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/src/AllPage/LogInPage/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCookies } from 'react-cookie'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Login = () => {\r\n\r\n  // エラーメッセージ\r\n  const errorMsgText = \"ユーザ名またはパスワードが異なります\"\r\n\r\n\r\n  //ページ遷移用\r\n  const navigate = useNavigate()\r\n  const PageTransition = (url) => {\r\n    navigate(url)\r\n  }\r\n\r\n  //バックエンドのurlを取得\r\n  const backendUrl = require(\"../../DB/communication\").backendUrl;\r\n\r\n  //フロントの階層urlを表示\r\n  const routeUrl = require(\"../../DB/communication\").routeUrl;\r\n\r\n  // const initialValues = { loginID: \"test\", password: \"123456789\" };\r\n  const initialValues = { loginID: \"\", password: \"\" };\r\n\r\n  const [formValues, setFormValues] = useState(initialValues);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const [cookies, setCookie, removeCookie] = useCookies();\r\n\r\n\r\n  const handleChande = (e) => {\r\n    //console.log(e.target.value);\r\n    const { name, value } = e.target;\r\n    setFormValues({ ...formValues, [name]: value });\r\n    //console.log(formValues);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    //ログイン情報を送信する\r\n    //バリデーションチェック\r\n    setFormErrors(validate(formValues));\r\n    setIsSubmit(true);\r\n    console.log(formValues);\r\n  };\r\n\r\n  const validate = (values) => {\r\n    const errors = {};\r\n\r\n    if (!values.loginID) {\r\n      errors.loginID = \"ログイン名を入力してください。\";\r\n    }\r\n    if (!values.password) {\r\n      errors.password = \"パスワードを入力してください。\";\r\n    }\r\n    else if (values.password.length < 8) {\r\n      errors.password = \"8文字以上20文字以下のパスワードを入力してください\";\r\n    }\r\n    else if (values.password.length > 20) {\r\n      errors.password = \"8文字以上20文字以下のパスワードを入力してください\";\r\n    }\r\n    return errors;\r\n  };\r\n\r\n\r\n\r\n\r\n  const handleLogin = () => {\r\n\r\n    fetch(backendUrl + \"/auth/login\", {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ user_name: formValues.loginID, password: formValues.password }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n\r\n        console.log(formErrors)\r\n\r\n        if (data[0].message === \"そのユーザは存在しません\") {\r\n          if (formErrors.length === 0) setFormErrors({ loginID: \"\", password: errorMsgText })\r\n        }\r\n        else if (data[0].message === \"パスワードが異なります\") {\r\n          if (formErrors.length === 0) setFormErrors({ loginID: \"\", password: errorMsgText })\r\n        }\r\n        else if (data === undefined) { }\r\n        else {\r\n          console.log(data)\r\n          setCookie(\"sessionID\", data[\"session_id\"])\r\n          PageTransition(routeUrl + \"/home\")\r\n        }\r\n\r\n      })\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"formContainer\">\r\n        <form onSubmit={(e) => handleSubmit(e)}>\r\n          <h1>ログイン</h1>\r\n\r\n          <div className=\"uiform\">\r\n            <div className=\"form\">\r\n              <div className=\"formField\">\r\n                <input type=\"text\"\r\n                  placeholder=\"ログイン名\"\r\n                  name=\"loginID\"\r\n                  onChange={(e) => handleChande(e)}\r\n                />\r\n                <p className=\"errorMsg\">{formErrors.loginID}</p>\r\n              </div>\r\n              <div className=\"formField\">\r\n                <input type=\"password\"\r\n                  placeholder=\"パスワード\"\r\n                  name=\"password\"\r\n                  onChange={(e) => handleChande(e)}\r\n                />\r\n                <p className=\"errorMsg\">{formErrors.password}</p>\r\n              </div>\r\n            </div>\r\n            <button className=\"submitButton\" onClick={handleLogin}>アカウント情報を送信</button>\r\n            {/* {Object.keys(formErrors).length === 0 && isSubmit && (\r\n              <div className=\"MsgOk\">照合中です</div>\r\n            )} */}\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
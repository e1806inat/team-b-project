{"ast":null,"code":"import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{useSearchParams,useNavigate}from\"react-router-dom\";import\"./InputMember.css\";import MemberPopup from\"./functions/MemberPopup/MemberPopup\";import EditMemberPopup from\"./functions/EditMemberPopup/EditMemberPopup\";import{TitleBar}from\"../../../OtherPage/TitleBar/TitleBar\";import{OptionButton}from\"../../../OtherPage/optionFunc/OptionButton\";//バックエンドのurlを取得\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var backendUrl=require(\"../../../../DB/communication\").backendUrl;//ひらがなチェック\nvar isHiragana=function isHiragana(str){str=str==null?\"\":str;if(str.match(/^[ぁ-んー　]*$/)){//\"ー\"の後ろの文字は全角スペースです。\nreturn true;}else{return false;}};//送られた文字列がどれか空ならfalse\nvar isEnpty=function isEnpty(strArray){var flag=true;strArray.map(function(str){if(!str){flag=false;}});return flag;};var loadMember=function loadMember(uniformNumberArray,setUniformNumberArray,urlTournamentId,urlSchoolId,setCopyMember,selectedMember,setSelectedMember,isInitial,setRegisteredMembers){//高校に所属する3年生以下の人間を全員呼び出す\nfetch(backendUrl+\"/member/member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(allUnder3MemberData){setCopyMember(allUnder3MemberData);console.log(allUnder3MemberData);//初回レンダリング時のみ実行\nif(isInitial===true){//既に選手登録されている人間を読み出す\nfetch(backendUrl+\"/member/tournament_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(selectedMembersData){setRegisteredMembers(selectedMembersData);var tempSelectedMember=[];var tempUniformNumber=[];console.log(selectedMembersData);if(allUnder3MemberData.length!==0){allUnder3MemberData.map(function(allUnder3Member,index){tempSelectedMember=[].concat(_toConsumableArray(tempSelectedMember),[false]);tempUniformNumber=[].concat(_toConsumableArray(tempUniformNumber),[1]);for(var _i=0;_i<selectedMembersData.length;_i++){if(selectedMembersData[_i].player_id===allUnder3Member.player_id){tempSelectedMember[index]=true;}}var i=selectedMembersData.findIndex(function(v){return v.player_id===allUnder3Member.player_id;});if(i!==-1){tempUniformNumber[tempUniformNumber.length-1]=selectedMembersData[i].uniform_number;}});}setCheck(allUnder3MemberData,tempSelectedMember,setSelectedMember);tempUniformNumber=tempUniformNumber.slice(0,tempUniformNumber.length);setUniformNumberArray(tempUniformNumber);});}else{setCheck(allUnder3MemberData,selectedMember,setSelectedMember);}if(uniformNumberArray[0]==null){var _Array=[1];for(var i=1;i<allUnder3MemberData.length;i++){_Array=[].concat(_toConsumableArray(_Array),[1]);}uniformNumberArray=_Array;setUniformNumberArray(uniformNumberArray);}});};var Member=[{}];var setCheck=function setCheck(copyMember,selectedMember,setSelectedMember){var copyArray=[];var beforeChecked=selectedMember;for(var i=0;i<copyMember.length;i++){copyArray=[].concat(_toConsumableArray(copyArray),[false]);}if(beforeChecked.length!==0){for(var _i2=0;_i2<beforeChecked.length;_i2++){copyArray[_i2]=beforeChecked[_i2];}}setSelectedMember(copyArray);};//背番号\nvar setBacknumber=function setBacknumber(copyMember,setCopyMember){for(var i=0;i<copyMember.length;i++){copyMember[i].uniform_number=1;}setCopyMember(copyMember);};var makePulldownBN=function makePulldownBN(ind,uniformNumberArray,setUniformNumberArray){//そのためにループしたい数と同じ長さの配列を作る\nvar nullArray=[0];for(var i=1;i<50;i++){nullArray=[].concat(_toConsumableArray(nullArray),[i]);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"select\",{id:\"fruit\",onChange:function onChange(e){console.log(e.target.value+\"_\"+ind);var copyUniformNumberArray=uniformNumberArray;copyUniformNumberArray=copyUniformNumberArray.slice(0,copyUniformNumberArray.length);copyUniformNumberArray[ind]=e.target.value;setUniformNumberArray(copyUniformNumberArray);},children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"\\u80CC\\u756A\\u53F7\\u3092\\u5909\\u66F4\\u3059\\u308B\"}),nullArray.map(function(component,ind){return/*#__PURE__*/_jsx(\"option\",{value:ind+1,children:ind+1});})]})});};//自作プルダウン\nvar makePulldown=function makePulldown(pulldownId,ArrayList,idText,nowSelected,setNowSelected){//pulldownIdは0でいいです。\n//ArrayListは表示したい要素を並べた配列です、普通の配列ではなく連想配列です。\n//idテキストは連想配列の属性を書きます。\n//nowSelectedは今プルダウンで何が選択されているかが入ります。初期値は[0]で、これは0番目の値が選択されている状態です。\n//setNowSelectedはnowSelecedの値をuseStateの機能で上書きする関数です。setNowSelected(更新値)とすれば、nowSelectedに更新値が入ります。\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"select\",{id:\"tekitouni\",onChange:function onChange(e){//ステイトが変化すると再描画させるための文、これがないと再描画されない\n//なお、消すと再描画はされないが内部は変化する\nnowSelected=nowSelected.slice(0,nowSelected.length);nowSelected[pulldownId]=e.target.value;setNowSelected(nowSelected);console.log(nowSelected);},children:ArrayList.map(function(component,ind){return/*#__PURE__*/_jsx(\"option\",{value:ind,children:component[idText]});})})});};//追加ボタン関数\nvar handleMembers=function handleMembers(urlSchoolId,numberRef,iningRef,handedHitState,handedThrowState,copyMember,uniformNumberArray,setUniformNumberArray,nameKanji,nameHira,trigger,setTrigger){var Array=[{\"school_id\":urlSchoolId,\"player_name_kanji\":nameKanji.famiryName+\"　\"+nameKanji.firstName,\"player_name_hira\":nameHira.famiryName+\"　\"+nameHira.firstName,\"uniform_number\":numberRef.current.value,\"grade\":iningRef.current.value,\"handed_hit\":handedHitState,\"handed_throw\":handedThrowState,\"BA\":0,\"bat_num\":0,\"hit_num\":0}];if(copyMember.some(function(u){return u.player_name_kanji===Array[0].player_name_kanji;})&&copyMember.some(function(u){return u.player_name_hira===Array[0].player_name_hira;})){console.log(\"out\");}else{console.log(\"safe\");fetch(backendUrl+\"/member/member_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Array)}).then(function(response){return response.text();}).then(function(data){if(data===\"OK\"){//背番号の取得\nvar copyUniformNumberArray=uniformNumberArray;copyUniformNumberArray=copyUniformNumberArray.slice(0,copyUniformNumberArray.length);console.log(numberRef.current.value);setUniformNumberArray([].concat(_toConsumableArray(copyUniformNumberArray),[numberRef.current.value]));console.log([].concat(_toConsumableArray(uniformNumberArray),[numberRef.current.value]));setTrigger(!trigger);}});}};//登録ボタンで内容を送信\nvar handleSousin=function handleSousin(copyMember,selectedMember,urlTournamentId,uniformNumberArray,registeredMembers){var sendArray=copyMember;for(var i=0;i<sendArray.length;i++){delete sendArray[i].hit_num;delete sendArray[i].bat_num;sendArray[i].tournament_id=urlTournamentId;sendArray[i].uniform_number=uniformNumberArray[i];}//選択したものだけの配列を作る\nvar sendArray2=[];sendArray.map(function(component,ind){if(selectedMember[ind]===true)sendArray2=[].concat(_toConsumableArray(sendArray2),[sendArray[ind]]);});//選択されたものから、既に登録されている人間を除いた配列を作る、登録されているやつを全員消すなら問題なし\n// let sendArray3 = []\n// sendArray2.map((v) => {\n//     if (registeredMembers.some((u) => u.player_name_kanji === v.player_name_kanji)) { }\n//     else {\n//         sendArray3 = [...sendArray3, v]\n//     }\n// })\n// console.log(sendArray3)\nconsole.log(registeredMembers);console.log(sendArray2);registeredMembers.map(function(v){fetch(backendUrl+\"/member/tournament_member_delete\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,player_id:v.player_id})});});//バックエンドに送信\nfetch(backendUrl+\"/member/tournament_member_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(sendArray2)});};//メンバーの編集内容をバックエンドに送信\nvar EditMember=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(sendInfo){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(backendUrl+\"/member/member_edit\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(sendInfo)}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",response.text());case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(data===\"OK\")){_context2.next=5;break;}_context2.next=3;return console.log(sendInfo.player_name_kanji+\"を編集しました\");case 3:_context2.next=5;return console.log(\"EditMember\");case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}());case 2:_context3.next=4;return console.log(sendInfo);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function EditMember(_x){return _ref.apply(this,arguments);};}();var lordRegisteredMember=function lordRegisteredMember(urlTournamentId,urlSchoolId){fetch(backendUrl+\"/member/tournament_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(data){console.log(data);});};var selectHitted=function selectHitted(handedHitState,handleHandedHit){if(handedHitState===\"左\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u5DE6\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"右\");},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"両\");},children:\"\\u4E21\\u6253\"})]});}else if(handedHitState===\"右\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"左\");},children:\"\\u5DE6\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"両\");},children:\"\\u4E21\\u6253\"})]});}else if(handedHitState===\"両\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"左\");},children:\"\\u5DE6\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"右\");},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u4E21\\u6253\"})]});}};var selectThrowed=function selectThrowed(handedThrowState,handleHandedThrow){if(handedThrowState===\"左\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u5DE6\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"右\");},children:\"\\u53F3\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"両\");},children:\"\\u4E21\\u6295\"})]});}else if(handedThrowState===\"右\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"左\");},children:\"\\u5DE6\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"両\");},children:\"\\u4E21\\u6295\"})]});}else if(handedThrowState===\"両\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"左\");},children:\"\\u5DE6\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"右\");},children:\"\\u53F3\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u4E21\\u6253\"})]});}};//選択している数を表示\nvar cntSelectedMemberNum=function cntSelectedMemberNum(selectedMember){var cnt=0;selectedMember.map(function(v){if(v)cnt++;});return cnt;};export var InputMember=function InputMember(){//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};var ining=1;var number=1;var iningRef=useRef(null);var numberRef=useRef(null);//名前を管理するステイト\nvar _useState=useState({famiryName:\"\",firstName:\"\"}),_useState2=_slicedToArray(_useState,2),nameKanji=_useState2[0],setNameKanji=_useState2[1];var _useState3=useState({famiryName:\"\",firstName:\"\"}),_useState4=_slicedToArray(_useState3,2),nameHira=_useState4[0],setNameHira=_useState4[1];var _useState5=useState(ining),_useState6=_slicedToArray(_useState5,2),iningState=_useState6[0],setIningState=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),schoolState=_useState8[0],setSchoolState=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),numberState=_useState10[0],setNumberState=_useState10[1];var _useState11=useState(\"左\"),_useState12=_slicedToArray(_useState11,2),handedHitState=_useState12[0],setHandedHitState=_useState12[1];var _useState13=useState(\"左\"),_useState14=_slicedToArray(_useState13,2),handedThrowState=_useState14[0],setHandedThrowState=_useState14[1];//既に選手登録されている選手を管理するステイト\nvar _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),registeredMembers=_useState16[0],setRegisteredMembers=_useState16[1];//数を監視するステイト\nvar selectedMemberNum=0;//メンバーを選択しているかどうかのフラグをつくる\nvar copyArray=[false];var _useState17=useState(copyArray),_useState18=_slicedToArray(_useState17,2),selectedMember=_useState18[0],setSelectedMember=_useState18[1];//urlから値を取得\nvar _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var urlTournamentId=searchParams.get(\"urlTournamentId\");var urlTournamentName=searchParams.get(\"urlTournamentName\");var urlSchoolId=searchParams.get(\"urlSchoolId\");var urlSchoolName=searchParams.get(\"urlSchoolName\");//DBからデータを読み出したいときのトリガーとなるステイト\nvar _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),trigger=_useState20[0],setTrigger=_useState20[1];//編集・削除モードかどうかを管理するステイト\nvar _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isEditMode=_useState22[0],setisEditMode=_useState22[1];//編集中の学年のプルダウンの位置を管理するステイト\nvar _useState23=useState([0]),_useState24=_slicedToArray(_useState23,2),editGrade=_useState24[0],setEditGrade=_useState24[1];//修正中のプレイヤー名を管理するすていと\nvar _useState25=useState({player_name_kanji:{famiryName:\"\",firstName:\"\"},player_name_hira:{famiryName:\"\",firstName:\"\"}}),_useState26=_slicedToArray(_useState25,2),editingMemberName=_useState26[0],setEditingMemberName=_useState26[1];//学年のプルダウンのための配列\nvar gradeArray=[{grade:1},{grade:2},{grade:3},{grade:4}];//修正か削除かを管理するステイト\nvar _useState27=useState(true),_useState28=_slicedToArray(_useState27,2),EorDCheckbox=_useState28[0],setEorDCheckbox=_useState28[1];//背番号を格納する配列\nvar _useState29=useState([null]),_useState30=_slicedToArray(_useState29,2),uniformNumberArray=_useState30[0],setUniformNumberArray=_useState30[1];//クリック時メンバー選択\nvar handleSelected=function handleSelected(ind){console.log(selectedMember[ind]);if(cntSelectedMemberNum(selectedMember)>=20&&selectedMember[ind]===false){}else{copyArray=selectedMember.slice(0,selectedMember.length);// stateの配列をコピー(値渡し)\ncopyArray[ind]=!copyArray[ind];setSelectedMember(copyArray);}};var _useState31=useState(Member),_useState32=_slicedToArray(_useState31,2),copyMember=_useState32[0],setCopyMember=_useState32[1];var initialSetIning=function initialSetIning(){for(var i=1;i<=3;i++){var option=document.createElement('option');option.value=i;option.text=i;iningRef.current.appendChild(option);}};var initialSetNumber=function initialSetNumber(){for(var i=1;i<=50;i++){var option=document.createElement('option');option.value=i;option.text=i;numberRef.current.appendChild(option);}};useEffect(function(){initialSetIning();initialSetNumber();//明日のメモ\n//選手を追加すると、ロードしなおすため背番号が消えてしまう。\n//だから、copymemberとは別の配列を用意してそこに記録する\n//選手を追加する場合は下から出てくる\n//あと選手の送信も訂正すること\nlordRegisteredMember(urlTournamentId,urlSchoolId);},[]);useEffect(function(){// 選手を読み込む\nvar handleLoadMember=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return console.log(\"rendering\");case 2:_context4.next=4;return loadMember(uniformNumberArray,setUniformNumberArray,urlTournamentId,urlSchoolId,setCopyMember,selectedMember,setSelectedMember,true,setRegisteredMembers);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleLoadMember(){return _ref4.apply(this,arguments);};}();handleLoadMember();},[trigger]);var selectIning=function selectIning(e){setIningState(e.target.value);};var selectNumber=function selectNumber(e){setNumberState(e.target.value);};var selectSchool=function selectSchool(e){setSchoolState(e.target.value);};var handleHandedHit=function handleHandedHit(value){setHandedHitState(value);};var handleHandedThrow=function handleHandedThrow(value){setHandedThrowState(value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TitleBar,{TitleText:\"選手登録画面\",PageTransition:PageTransition,valueUrl:-1}),/*#__PURE__*/_jsx(OptionButton,{}),/*#__PURE__*/_jsx(\"div\",{className:\"IMtitle\",children:\"\\u51FA\\u5834\\u9078\\u624B\\u9078\\u629E\\u753B\\u9762\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject\",children:[/*#__PURE__*/_jsx(\"h3\",{children:urlTournamentName}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u7DE8\\u96C6\\u4E2D:\",urlSchoolName]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toroku\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"MakeGame\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grade\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"year\",children:[\"\\u5B66\\u5E74\",/*#__PURE__*/_jsx(\"select\",{ref:iningRef,value:iningState,onChange:selectIning})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uniNum\",children:[\"\\u80CC\\u756A\\u53F7\",/*#__PURE__*/_jsx(\"select\",{ref:numberRef,value:numberState,onChange:selectNumber})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputName\",children:[\"\\u6C0F\\uFF08\\u6F22\\u5B57\\uFF09\\u3000\\u3000\",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNameKanji({famiryName:e.target.value,firstName:nameKanji.firstName});}}),\"\\u540D\\uFF08\\u6F22\\u5B57\\uFF09\\u3000\\u3000\",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNameKanji({famiryName:nameKanji.famiryName,firstName:e.target.value});}}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u6C0F\\uFF08\\u3072\\u3089\\u304C\\u306A\\uFF09\",/*#__PURE__*/_jsx(\"input\",{value:nameHira.famiryName,onChange:function onChange(e){setNameHira({famiryName:e.target.value,firstName:nameHira.firstName});}}),\"\\u540D\\uFF08\\u3072\\u3089\\u304C\\u306A\\uFF09\",/*#__PURE__*/_jsx(\"input\",{// onChange={(e) => setNameHira({ famiryName: nameHira.famiryName, firstName: e.target.value })\nvalue:nameHira.firstName,onChange:function onChange(e){setNameHira({famiryName:nameHira.famiryName,firstName:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectDominant\",children:[/*#__PURE__*/_jsx(\"div\",{children:selectHitted(handedHitState,handleHandedHit)}),/*#__PURE__*/_jsx(\"div\",{children:selectThrowed(handedThrowState,handleHandedThrow)})]}),/*#__PURE__*/_jsx(\"br\",{}),(!isHiragana(nameHira.famiryName)||!isHiragana(nameHira.firstName)||!isEnpty([nameHira.famiryName,nameHira.firstName,nameKanji.famiryName,nameKanji.firstName]))&&/*#__PURE__*/_jsx(\"button\",{className:\"addButton\",onClick:function onClick(){},children:\"\\u8FFD\\u52A0a\"}),isHiragana(nameHira.famiryName)&&isHiragana(nameHira.firstName)&&nameHira.famiryName!==\"\"&&nameHira.firstName!==\"\"&&nameKanji.famiryName!==\"\"&&nameKanji.firstName!==\"\"&&/*#__PURE__*/_jsx(\"button\",{className:\"addButton\",onClick:function onClick(){return handleMembers(urlSchoolId,numberRef,iningRef,handedHitState,handedThrowState,copyMember,uniformNumberArray,setUniformNumberArray,nameKanji,nameHira,trigger,setTrigger);},children:\"\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsx(\"div\",{children:(!isHiragana(nameHira.famiryName)||!isHiragana(nameHira.firstName))&&/*#__PURE__*/_jsx(_Fragment,{children:\"\\u3072\\u3089\\u304C\\u306A\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"})}),\"\\u73FE\\u5728\\u306E\\u9078\\u624B\\u9078\\u629E\\u6570:\",cntSelectedMemberNum(selectedMember),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setisEditMode(!isEditMode);},children:[isEditMode&&\"大会編集中\",!isEditMode&&\"大会編集モード\"]})]})}),!isEditMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hyoji\",children:/*#__PURE__*/_jsx(\"div\",{className:\"players\",children:copyMember.map(function(member,ind){//漢字名前がない者は表示されない\nif(member.player_name_kanji!==null){return/*#__PURE__*/_jsxs(\"div\",{className:\"school\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleSelected(ind);},className:\"InputMember\"+selectedMember[ind],children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selectName\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \\xA0\\xA0\",member.grade,\"\\u5E74\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"playerName\",children:[\"\\xA0\\xA0\\xA0\\xA0\",member.player_name_kanji,\"\\uFF08 \",member.player_name_hira,\"\\uFF09\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Dominant\",children:[\"\\xA0 \",member.handed_hit,\"\\u6253 \\xA0 \",member.handed_throw,\"\\u6295 \\xA0 \\u80CC\\u756A\\u53F7:\",uniformNumberArray[ind]]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectdiv\",children:[\"\\u80CC\\u756A\\u53F7\",/*#__PURE__*/_jsx(\"br\",{}),makePulldownBN(ind,uniformNumberArray,setUniformNumberArray)]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"sendButtonArea\",children:/*#__PURE__*/_jsx(MemberPopup,{handleSousin:handleSousin,copyMember:copyMember,selectedMember:selectedMember,urlTournamentId:urlTournamentId,uniformNumberArray:uniformNumberArray,PageTransition:PageTransition,registeredMembers:registeredMembers})})]}),isEditMode&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"hyoji\",children:/*#__PURE__*/_jsx(\"div\",{className:\"players\",children:copyMember.map(function(member,ind){return/*#__PURE__*/_jsxs(\"div\",{className:\"school\",children:[/*#__PURE__*/_jsx(EditMemberPopup,{member:member,ind:ind,selectedMember:selectedMember,uniformNumberArray:uniformNumberArray,EorDCheckbox:EorDCheckbox,setEorDCheckbox:setEorDCheckbox,editingMemberName:editingMemberName,setEditingMemberName:setEditingMemberName,selectHitted:selectHitted,handedHitState:handedHitState,handleHandedHit:handleHandedHit,selectThrowed:selectThrowed,handedThrowState:handedThrowState,handleHandedThrow:handleHandedThrow,makePulldown:makePulldown,editGrade:editGrade,setEditGrade:setEditGrade,EditMember:EditMember,gradeArray:gradeArray,isEnpty:isEnpty,isHiragana:isHiragana,trigger:trigger,setTrigger:setTrigger}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});})})})})]});};export default InputMember;","map":{"version":3,"names":["React","useState","useEffect","useRef","useSearchParams","useNavigate","MemberPopup","EditMemberPopup","TitleBar","OptionButton","backendUrl","require","isHiragana","str","match","isEnpty","strArray","flag","map","loadMember","uniformNumberArray","setUniformNumberArray","urlTournamentId","urlSchoolId","setCopyMember","selectedMember","setSelectedMember","isInitial","setRegisteredMembers","fetch","method","mode","headers","body","JSON","stringify","school_id","then","response","json","allUnder3MemberData","console","log","tournament_id","selectedMembersData","tempSelectedMember","tempUniformNumber","length","allUnder3Member","index","i","player_id","findIndex","v","uniform_number","setCheck","slice","Array","Member","copyMember","copyArray","beforeChecked","setBacknumber","makePulldownBN","ind","nullArray","e","target","value","copyUniformNumberArray","component","makePulldown","pulldownId","ArrayList","idText","nowSelected","setNowSelected","handleMembers","numberRef","iningRef","handedHitState","handedThrowState","nameKanji","nameHira","trigger","setTrigger","famiryName","firstName","current","some","u","player_name_kanji","player_name_hira","text","data","handleSousin","registeredMembers","sendArray","hit_num","bat_num","sendArray2","EditMember","sendInfo","lordRegisteredMember","selectHitted","handleHandedHit","color","background","selectThrowed","handleHandedThrow","cntSelectedMemberNum","cnt","InputMember","navigate","PageTransition","url","ining","number","setNameKanji","setNameHira","iningState","setIningState","schoolState","setSchoolState","numberState","setNumberState","setHandedHitState","setHandedThrowState","selectedMemberNum","searchParams","get","urlTournamentName","urlSchoolName","isEditMode","setisEditMode","editGrade","setEditGrade","editingMemberName","setEditingMemberName","gradeArray","grade","EorDCheckbox","setEorDCheckbox","handleSelected","initialSetIning","option","document","createElement","appendChild","initialSetNumber","handleLoadMember","selectIning","selectNumber","selectSchool","member","handed_hit","handed_throw"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/src/AllPage/InputAll/PreInput/InputMemberPage/InputMember.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport \"./InputMember.css\"\r\nimport MemberPopup from \"./functions/MemberPopup/MemberPopup\"\r\nimport EditMemberPopup from \"./functions/EditMemberPopup/EditMemberPopup\";\r\n\r\nimport { TitleBar } from \"../../../OtherPage/TitleBar/TitleBar\";\r\nimport { OptionButton } from \"../../../OtherPage/optionFunc/OptionButton\"\r\n\r\n//バックエンドのurlを取得\r\nconst backendUrl = require(\"../../../../DB/communication\").backendUrl;\r\n\r\n\r\n//ひらがなチェック\r\nconst isHiragana = (str) => {\r\n    str = (str == null) ? \"\" : str;\r\n    if (str.match(/^[ぁ-んー　]*$/)) {    //\"ー\"の後ろの文字は全角スペースです。\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n//送られた文字列がどれか空ならfalse\r\nconst isEnpty = (strArray) => {\r\n    let flag = true\r\n    strArray.map((str) => {\r\n        if (!str) {\r\n            flag = false\r\n        }\r\n    })\r\n    return flag\r\n}\r\n\r\nconst loadMember = (uniformNumberArray, setUniformNumberArray, urlTournamentId, urlSchoolId, setCopyMember, selectedMember, setSelectedMember, isInitial, setRegisteredMembers) => {\r\n    //高校に所属する3年生以下の人間を全員呼び出す\r\n    fetch(backendUrl + \"/member/member_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ school_id: urlSchoolId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((allUnder3MemberData) => {\r\n            setCopyMember(allUnder3MemberData);\r\n            console.log(allUnder3MemberData)\r\n\r\n            //初回レンダリング時のみ実行\r\n            if (isInitial === true) {\r\n                //既に選手登録されている人間を読み出す\r\n                fetch(backendUrl + \"/member/tournament_member_call\", {\r\n                    method: \"POST\",\r\n                    mode: \"cors\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((selectedMembersData) => {\r\n                        setRegisteredMembers(selectedMembersData)\r\n\r\n                        let tempSelectedMember = []\r\n                        let tempUniformNumber = []\r\n\r\n\r\n                        console.log(selectedMembersData)\r\n\r\n                        if (allUnder3MemberData.length !== 0) {\r\n                            allUnder3MemberData.map((allUnder3Member, index) => {\r\n\r\n                                tempSelectedMember = [...tempSelectedMember, false]\r\n                                tempUniformNumber = [...tempUniformNumber, 1]\r\n\r\n                                for (let i = 0; i < selectedMembersData.length; i++) {\r\n                                    if (selectedMembersData[i].player_id === allUnder3Member.player_id) {\r\n                                        tempSelectedMember[index] = true\r\n                                    }\r\n                                }\r\n\r\n                                let i = selectedMembersData.findIndex((v) => v.player_id === allUnder3Member.player_id)\r\n                                if (i !== -1) {\r\n                                    tempUniformNumber[tempUniformNumber.length - 1] = selectedMembersData[i].uniform_number\r\n                                }\r\n                            })\r\n                        }\r\n\r\n\r\n\r\n                        setCheck(allUnder3MemberData, tempSelectedMember, setSelectedMember);\r\n                        tempUniformNumber = tempUniformNumber.slice(0, tempUniformNumber.length)\r\n                        setUniformNumberArray(tempUniformNumber)\r\n\r\n                    })\r\n            }\r\n\r\n            else {\r\n                setCheck(allUnder3MemberData, selectedMember, setSelectedMember)\r\n            }\r\n\r\n            if (uniformNumberArray[0] == null) {\r\n                let Array = [1];\r\n                for (let i = 1; i < allUnder3MemberData.length; i++) {\r\n                    Array = [...Array, 1]\r\n                }\r\n                uniformNumberArray = Array\r\n                setUniformNumberArray(uniformNumberArray)\r\n            }\r\n\r\n        })\r\n}\r\n\r\n\r\nconst Member = [{}]\r\n\r\nconst setCheck = (copyMember, selectedMember, setSelectedMember) => {\r\n    let copyArray = []\r\n    const beforeChecked = selectedMember\r\n\r\n    for (let i = 0; i < copyMember.length; i++) {\r\n        copyArray = [...copyArray, false]\r\n    }\r\n\r\n    if (beforeChecked.length !== 0) {\r\n        for (let i = 0; i < beforeChecked.length; i++) {\r\n            copyArray[i] = beforeChecked[i]\r\n        }\r\n    }\r\n\r\n    setSelectedMember(copyArray)\r\n}\r\n\r\n//背番号\r\nconst setBacknumber = (copyMember, setCopyMember) => {\r\n    for (let i = 0; i < copyMember.length; i++) {\r\n        copyMember[i].uniform_number = 1\r\n    }\r\n    setCopyMember(copyMember)\r\n\r\n}\r\n\r\nconst makePulldownBN = (ind, uniformNumberArray, setUniformNumberArray) => {\r\n\r\n    //そのためにループしたい数と同じ長さの配列を作る\r\n    let nullArray = [0]\r\n    for (let i = 1; i < 50; i++) {\r\n        nullArray = [...nullArray, i]\r\n    }\r\n    return (\r\n        <>\r\n            <select id=\"fruit\"\r\n                onChange={(e) => {\r\n                    console.log(e.target.value + \"_\" + ind)\r\n                    let copyUniformNumberArray = uniformNumberArray\r\n                    copyUniformNumberArray = copyUniformNumberArray.slice(0, copyUniformNumberArray.length)\r\n                    copyUniformNumberArray[ind] = e.target.value\r\n                    setUniformNumberArray(copyUniformNumberArray)\r\n                }}>\r\n                <option value={0}>背番号を変更する</option>\r\n                {nullArray.map((component, ind) => (\r\n                    <option value={ind + 1}>{ind + 1}</option>\r\n                ))\r\n                }\r\n            </select>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\n//自作プルダウン\r\nconst makePulldown = (pulldownId, ArrayList, idText, nowSelected, setNowSelected) => {\r\n    //pulldownIdは0でいいです。\r\n    //ArrayListは表示したい要素を並べた配列です、普通の配列ではなく連想配列です。\r\n    //idテキストは連想配列の属性を書きます。\r\n    //nowSelectedは今プルダウンで何が選択されているかが入ります。初期値は[0]で、これは0番目の値が選択されている状態です。\r\n    //setNowSelectedはnowSelecedの値をuseStateの機能で上書きする関数です。setNowSelected(更新値)とすれば、nowSelectedに更新値が入ります。\r\n\r\n    return (\r\n        <>\r\n            <select id=\"tekitouni\"\r\n                onChange={(e) => {\r\n                    //ステイトが変化すると再描画させるための文、これがないと再描画されない\r\n                    //なお、消すと再描画はされないが内部は変化する\r\n                    nowSelected = nowSelected.slice(0, nowSelected.length);\r\n                    nowSelected[pulldownId] = e.target.value\r\n                    setNowSelected(nowSelected)\r\n                    console.log(nowSelected)\r\n                }\r\n                }>\r\n                {ArrayList.map((component, ind) => (\r\n                    <option value={ind}>{component[idText]}</option>\r\n                ))\r\n                }\r\n            </select>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\n//追加ボタン関数\r\nconst handleMembers = (\r\n    urlSchoolId,\r\n    numberRef,\r\n    iningRef,\r\n    handedHitState,\r\n    handedThrowState,\r\n    copyMember,\r\n    uniformNumberArray,\r\n    setUniformNumberArray,\r\n    nameKanji,\r\n    nameHira,\r\n    trigger,\r\n    setTrigger\r\n) => {\r\n    let Array = [{\r\n        \"school_id\": urlSchoolId,\r\n        \"player_name_kanji\": nameKanji.famiryName + \"　\" + nameKanji.firstName,\r\n        \"player_name_hira\": nameHira.famiryName + \"　\" + nameHira.firstName,\r\n        \"uniform_number\": numberRef.current.value,\r\n        \"grade\": iningRef.current.value,\r\n        \"handed_hit\": handedHitState,\r\n        \"handed_throw\": handedThrowState,\r\n        \"BA\": 0,\r\n        \"bat_num\": 0,\r\n        \"hit_num\": 0\r\n    }]\r\n\r\n\r\n    if (copyMember.some((u) => u.player_name_kanji === Array[0].player_name_kanji) &&\r\n        copyMember.some((u) => u.player_name_hira === Array[0].player_name_hira)\r\n    ) {\r\n        console.log(\"out\")\r\n    }\r\n    else {\r\n        console.log(\"safe\")\r\n        fetch(backendUrl + \"/member/member_register\", {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(Array),\r\n        })\r\n            .then((response) => response.text())\r\n            .then((data) => {\r\n                if (data === \"OK\") {\r\n                    //背番号の取得\r\n                    let copyUniformNumberArray = uniformNumberArray\r\n                    copyUniformNumberArray = copyUniformNumberArray.slice(0, copyUniformNumberArray.length)\r\n                    console.log(numberRef.current.value)\r\n                    setUniformNumberArray([...copyUniformNumberArray, numberRef.current.value])\r\n                    console.log([...uniformNumberArray, numberRef.current.value])\r\n                    setTrigger(!trigger)\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n//登録ボタンで内容を送信\r\nconst handleSousin = (copyMember, selectedMember, urlTournamentId, uniformNumberArray, registeredMembers) => {\r\n\r\n    let sendArray = copyMember\r\n\r\n\r\n    for (let i = 0; i < sendArray.length; i++) {\r\n        delete sendArray[i].hit_num\r\n        delete sendArray[i].bat_num\r\n        sendArray[i].tournament_id = urlTournamentId\r\n        sendArray[i].uniform_number = uniformNumberArray[i]\r\n\r\n    }\r\n\r\n    //選択したものだけの配列を作る\r\n    let sendArray2 = []\r\n    sendArray.map((component, ind) => {\r\n        if (selectedMember[ind] === true) sendArray2 = [...sendArray2, sendArray[ind]]\r\n    })\r\n\r\n    //選択されたものから、既に登録されている人間を除いた配列を作る、登録されているやつを全員消すなら問題なし\r\n    // let sendArray3 = []\r\n    // sendArray2.map((v) => {\r\n    //     if (registeredMembers.some((u) => u.player_name_kanji === v.player_name_kanji)) { }\r\n    //     else {\r\n    //         sendArray3 = [...sendArray3, v]\r\n    //     }\r\n    // })\r\n\r\n    // console.log(sendArray3)\r\n\r\n    console.log(registeredMembers)\r\n    console.log(sendArray2)\r\n    registeredMembers.map((v) => {\r\n        fetch(backendUrl + \"/member/tournament_member_delete\", {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({ tournament_id: urlTournamentId, player_id: v.player_id }),\r\n        })\r\n\r\n    })\r\n\r\n\r\n    //バックエンドに送信\r\n    fetch(backendUrl + \"/member/tournament_member_register\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(sendArray2),\r\n    })\r\n\r\n}\r\n\r\n\r\n//メンバーの編集内容をバックエンドに送信\r\nconst EditMember = async (sendInfo) => {\r\n    await fetch(backendUrl + \"/member/member_edit\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: { \"Content-Type\": \"application/json\", },\r\n        body: JSON.stringify(sendInfo),\r\n    })\r\n        .then(async (response) => response.text())\r\n        .then(async (data) => {\r\n\r\n            if (data === \"OK\") {\r\n                await console.log(sendInfo.player_name_kanji + \"を編集しました\")\r\n                await console.log(\"EditMember\")\r\n            }\r\n        })\r\n\r\n    await console.log(sendInfo)\r\n}\r\n\r\n\r\n\r\nconst lordRegisteredMember = (urlTournamentId, urlSchoolId) => {\r\n    fetch(backendUrl + \"/member/tournament_member_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            console.log(data)\r\n        })\r\n}\r\n\r\n\r\nconst selectHitted = (handedHitState, handleHandedHit) => {\r\n    if (handedHitState === \"左\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>左打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"右\")}>右打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"両\")}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedHitState === \"右\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"左\")}>左打</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>右打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"両\")}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedHitState === \"両\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"左\")}>左打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"右\")}>右打</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst selectThrowed = (handedThrowState, handleHandedThrow) => {\r\n    if (handedThrowState === \"左\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>左投</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"右\")}>右投</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"両\")}>両投</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedThrowState === \"右\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"左\")}>左投</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>右打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"両\")}>両投</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedThrowState === \"両\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"左\")}>左投</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"右\")}>右投</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\n//選択している数を表示\r\nconst cntSelectedMemberNum = (selectedMember) => {\r\n    let cnt = 0\r\n    selectedMember.map((v) => {\r\n        if (v) cnt++\r\n    })\r\n    return cnt\r\n}\r\n\r\n\r\n\r\nexport const InputMember = () => {\r\n\r\n    //ページ遷移用\r\n    const navigate = useNavigate()\r\n    const PageTransition = (url) => {\r\n        navigate(url)\r\n    }\r\n\r\n\r\n    const ining = 1;\r\n    const number = 1;\r\n\r\n    const iningRef = useRef(null)\r\n    const numberRef = useRef(null)\r\n\r\n    //名前を管理するステイト\r\n    const [nameKanji, setNameKanji] = useState({ famiryName: \"\", firstName: \"\" })\r\n    const [nameHira, setNameHira] = useState({ famiryName: \"\", firstName: \"\" })\r\n\r\n    const [iningState, setIningState] = useState(ining)\r\n    const [schoolState, setSchoolState] = useState(1)\r\n    const [numberState, setNumberState] = useState(1)\r\n\r\n    const [handedHitState, setHandedHitState] = useState(\"左\")\r\n    const [handedThrowState, setHandedThrowState] = useState(\"左\")\r\n\r\n    //既に選手登録されている選手を管理するステイト\r\n    const [registeredMembers, setRegisteredMembers] = useState([])\r\n\r\n    //数を監視するステイト\r\n    let selectedMemberNum = 0\r\n\r\n    //メンバーを選択しているかどうかのフラグをつくる\r\n    let copyArray = [false]\r\n    const [selectedMember, setSelectedMember] = useState(copyArray)\r\n\r\n    //urlから値を取得\r\n    const [searchParams] = useSearchParams();\r\n    const urlTournamentId = searchParams.get(\"urlTournamentId\")\r\n    const urlTournamentName = searchParams.get(\"urlTournamentName\")\r\n    const urlSchoolId = searchParams.get(\"urlSchoolId\")\r\n    const urlSchoolName = searchParams.get(\"urlSchoolName\")\r\n\r\n    //DBからデータを読み出したいときのトリガーとなるステイト\r\n    const [trigger, setTrigger] = useState(false)\r\n\r\n    //編集・削除モードかどうかを管理するステイト\r\n    const [isEditMode, setisEditMode] = useState(false)\r\n\r\n    //編集中の学年のプルダウンの位置を管理するステイト\r\n    const [editGrade, setEditGrade] = useState([0])\r\n\r\n    //修正中のプレイヤー名を管理するすていと\r\n    const [editingMemberName, setEditingMemberName] = useState(\r\n        {\r\n            player_name_kanji: { famiryName: \"\", firstName: \"\" },\r\n            player_name_hira: { famiryName: \"\", firstName: \"\" }\r\n        }\r\n    )\r\n\r\n    //学年のプルダウンのための配列\r\n    const gradeArray = [{ grade: 1 }, { grade: 2 }, { grade: 3 }, { grade: 4 }]\r\n\r\n\r\n    //修正か削除かを管理するステイト\r\n    const [EorDCheckbox, setEorDCheckbox] = useState(true)\r\n\r\n    //背番号を格納する配列\r\n    const [uniformNumberArray, setUniformNumberArray] = useState([null]);\r\n\r\n    //クリック時メンバー選択\r\n    const handleSelected = (ind) => {\r\n        console.log(selectedMember[ind])\r\n        if (cntSelectedMemberNum(selectedMember) >= 20 && selectedMember[ind] === false) { }\r\n        else {\r\n            copyArray = selectedMember.slice(0, selectedMember.length); // stateの配列をコピー(値渡し)\r\n            copyArray[ind] = !copyArray[ind]\r\n            setSelectedMember(copyArray)\r\n        }\r\n    }\r\n\r\n    const [copyMember, setCopyMember] = useState(Member)\r\n\r\n    const initialSetIning = () => {\r\n        for (let i = 1; i <= 3; i++) {\r\n            const option = document.createElement('option')\r\n            option.value = i\r\n            option.text = i\r\n            iningRef.current.appendChild(option)\r\n        }\r\n    }\r\n\r\n    const initialSetNumber = () => {\r\n        for (let i = 1; i <= 50; i++) {\r\n            const option = document.createElement('option')\r\n            option.value = i;\r\n            option.text = i;\r\n            numberRef.current.appendChild(option)\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        initialSetIning();\r\n        initialSetNumber();\r\n        //明日のメモ\r\n        //選手を追加すると、ロードしなおすため背番号が消えてしまう。\r\n        //だから、copymemberとは別の配列を用意してそこに記録する\r\n        //選手を追加する場合は下から出てくる\r\n        //あと選手の送信も訂正すること\r\n        lordRegisteredMember(urlTournamentId, urlSchoolId)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        // 選手を読み込む\r\n        const handleLoadMember = async () => {\r\n            await console.log(\"rendering\")\r\n            await loadMember(\r\n                uniformNumberArray,\r\n                setUniformNumberArray,\r\n                urlTournamentId,\r\n                urlSchoolId,\r\n                setCopyMember,\r\n                selectedMember,\r\n                setSelectedMember,\r\n                true,\r\n                setRegisteredMembers\r\n            )\r\n        }\r\n\r\n        handleLoadMember()\r\n    }, [trigger])\r\n\r\n\r\n\r\n\r\n\r\n    const selectIning = (e) => {\r\n        setIningState(e.target.value)\r\n    }\r\n    const selectNumber = (e) => {\r\n        setNumberState(e.target.value)\r\n    }\r\n    const selectSchool = (e) => {\r\n        setSchoolState(e.target.value)\r\n    }\r\n    const handleHandedHit = (value) => {\r\n        setHandedHitState(value)\r\n    }\r\n    const handleHandedThrow = (value) => {\r\n        setHandedThrowState(value)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <TitleBar\r\n                TitleText={\"選手登録画面\"}\r\n                PageTransition={PageTransition}\r\n                valueUrl={-1}\r\n            />\r\n            <OptionButton />\r\n\r\n\r\n            <div className=\"IMtitle\">出場選手選択画面</div>\r\n            <div className=\"subject\">\r\n                <h3>{urlTournamentName}</h3>\r\n                <h4>編集中:{urlSchoolName}</h4>\r\n            </div>\r\n\r\n            <div className=\"toroku\">\r\n                <div className=\"MakeGame\">\r\n                    <div className=\"grade\">\r\n                        <div className=\"year\">学年<select ref={iningRef} value={iningState} onChange={selectIning} ></select></div>\r\n                        <div className=\"uniNum\">背番号<select ref={numberRef} value={numberState} onChange={selectNumber} ></select></div>\r\n                    </div>\r\n\r\n                    <div className=\"inputName\">\r\n\r\n                        氏（漢字）　　<input onChange={(e) => setNameKanji({ famiryName: e.target.value, firstName: nameKanji.firstName })} ></input>\r\n                        名（漢字）　　<input onChange={(e) => setNameKanji({ famiryName: nameKanji.famiryName, firstName: e.target.value })} ></input>\r\n\r\n\r\n                        <br />\r\n                        氏（ひらがな）<input\r\n                            value={nameHira.famiryName}\r\n                            onChange={\r\n                                (e) => {\r\n                                    setNameHira({ famiryName: e.target.value, firstName: nameHira.firstName })\r\n                                }\r\n                            }></input>\r\n                        名（ひらがな）<input\r\n                            // onChange={(e) => setNameHira({ famiryName: nameHira.famiryName, firstName: e.target.value })\r\n                            value={nameHira.firstName}\r\n                            onChange={\r\n                                (e) => {\r\n                                    setNameHira({ famiryName: nameHira.famiryName, firstName: e.target.value })\r\n                                }\r\n                            }></input>\r\n                    </div>\r\n\r\n                    <div className=\"selectDominant\">\r\n                        <div>{selectHitted(handedHitState, handleHandedHit)}</div>\r\n                        <div>{selectThrowed(handedThrowState, handleHandedThrow)}</div>\r\n                    </div>\r\n\r\n                    {/* チェックを入れる */}\r\n                    <br />\r\n                    {(!isHiragana(nameHira.famiryName) || !isHiragana(nameHira.firstName) ||\r\n                        !isEnpty([nameHira.famiryName, nameHira.firstName, nameKanji.famiryName, nameKanji.firstName])) &&\r\n                        <button\r\n                            className=\"addButton\"\r\n                            onClick={() => { }}\r\n                        >追加a</button>\r\n                    }\r\n\r\n                    {(isHiragana(nameHira.famiryName) && isHiragana(nameHira.firstName) &&\r\n                        nameHira.famiryName !== \"\" && nameHira.firstName !== \"\" &&\r\n                        nameKanji.famiryName !== \"\" && nameKanji.firstName !== \"\") &&\r\n                        <button\r\n                            className=\"addButton\"\r\n                            onClick={() => handleMembers(\r\n                                urlSchoolId,\r\n                                numberRef,\r\n                                iningRef,\r\n                                handedHitState,\r\n                                handedThrowState,\r\n                                copyMember,\r\n                                uniformNumberArray,\r\n                                setUniformNumberArray,\r\n                                nameKanji,\r\n                                nameHira,\r\n                                trigger,\r\n                                setTrigger\r\n                            )}\r\n                        >追加</button>\r\n                    }\r\n\r\n\r\n                    <div>{(!isHiragana(nameHira.famiryName) || !isHiragana(nameHira.firstName)) &&\r\n                        <>ひらがなを入力してください</>}\r\n                    </div>\r\n\r\n                    現在の選手選択数:{cntSelectedMemberNum(selectedMember)}<br />\r\n\r\n                    <button\r\n                        onClick={() => { setisEditMode(!isEditMode) }}\r\n                    >{isEditMode && \"大会編集中\"}{!isEditMode && \"大会編集モード\"}</button>\r\n\r\n                </div>\r\n            </div>\r\n            {!isEditMode &&\r\n                <>\r\n                    <div className=\"hyoji\">\r\n                        <div className=\"players\">\r\n                            {copyMember.map((member, ind) => {\r\n\r\n                                //漢字名前がない者は表示されない\r\n                                if (member.player_name_kanji !== null) {\r\n                                    return (\r\n\r\n\r\n                                        <div className=\"school\">\r\n                                            <button\r\n                                                onClick={() => handleSelected(ind)}\r\n                                                className={\"InputMember\" + selectedMember[ind]}\r\n                                            >\r\n                                                <div className=\"selectName\">\r\n                                                    <div> &nbsp;&nbsp;{member.grade}年</div><div className=\"playerName\">&nbsp;&nbsp;&nbsp;&nbsp;{member.player_name_kanji}（ {member.player_name_hira}）</div>\r\n                                                </div>\r\n                                                {/* &nbsp; 背番号{member.uniform_number}  */}\r\n                                                <div className=\"Dominant\">&nbsp; {member.handed_hit}打 &nbsp; {member.handed_throw}投 &nbsp; 背番号:{uniformNumberArray[ind]}</div>\r\n\r\n                                            </button>\r\n\r\n                                            <div className=\"selectdiv\">\r\n                                                背番号<br />\r\n                                                {makePulldownBN(ind, uniformNumberArray, setUniformNumberArray)}\r\n                                            </div>\r\n                                            <br /><br />\r\n                                        </div>\r\n\r\n                                    )\r\n                                }\r\n\r\n\r\n                            }\r\n\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"sendButtonArea\">\r\n                        <MemberPopup\r\n                            handleSousin={handleSousin}\r\n                            copyMember={copyMember}\r\n                            selectedMember={selectedMember}\r\n                            urlTournamentId={urlTournamentId}\r\n                            uniformNumberArray={uniformNumberArray}\r\n                            PageTransition={PageTransition}\r\n                            registeredMembers={registeredMembers}\r\n                        />\r\n                    </div>\r\n                </>\r\n            }\r\n\r\n            {isEditMode &&\r\n                <>\r\n                    <div className=\"hyoji\">\r\n                        <div className=\"players\">\r\n                            {copyMember.map((member, ind) => (\r\n                                <div className=\"school\">\r\n                                    <EditMemberPopup\r\n                                        member={member}\r\n                                        ind={ind}\r\n                                        selectedMember={selectedMember}\r\n                                        uniformNumberArray={uniformNumberArray}\r\n                                        EorDCheckbox={EorDCheckbox}\r\n                                        setEorDCheckbox={setEorDCheckbox}\r\n                                        editingMemberName={editingMemberName}\r\n                                        setEditingMemberName={setEditingMemberName}\r\n                                        selectHitted={selectHitted}\r\n                                        handedHitState={handedHitState}\r\n                                        handleHandedHit={handleHandedHit}\r\n                                        selectThrowed={selectThrowed}\r\n                                        handedThrowState={handedThrowState}\r\n                                        handleHandedThrow={handleHandedThrow}\r\n                                        makePulldown={makePulldown}\r\n                                        editGrade={editGrade}\r\n                                        setEditGrade={setEditGrade}\r\n                                        EditMember={EditMember}\r\n                                        gradeArray={gradeArray}\r\n                                        isEnpty={isEnpty}\r\n                                        isHiragana={isHiragana}\r\n                                        trigger={trigger}\r\n                                        setTrigger={setTrigger}\r\n                                    />\r\n                                    <br /><br />\r\n                                </div>\r\n\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            }\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default InputMember"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
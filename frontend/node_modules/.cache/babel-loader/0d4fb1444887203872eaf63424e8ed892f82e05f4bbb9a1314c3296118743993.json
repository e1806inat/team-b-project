{"ast":null,"code":"import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useState,useRef}from\"react\";import{Hyoji}from'./comInputSchool/Hyoji';import{CheckBoxList}from'./comInputSchool/CheckBoxList1';import{Link,useNavigate,useSearchParams}from\"react-router-dom\";import{useEffect}from\"react\";import{TitleBar}from\"../../../OtherPage/TitleBar/TitleBar\";import{OptionButton}from\"../../../OtherPage/optionFunc/OptionButton\";//次回追加ボタン押した後に、高校再表示させるのをやる\n//データを送る\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var sendSchool=function sendSchool(useSchools,urlTournamentId,Schools,setUseSchools){var toSendSchool=[];useSchools.map(function(school){if(school.IsCheck){toSendSchool=[].concat(_toConsumableArray(toSendSchool),[{tournament_id:urlTournamentId,school_name:school.school_name,school_id:school.school_id,seed:school.seed}]);}});console.log(toSendSchool);fetch(\"http://localhost:5000/school/participants_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},//body: JSON.stringify({ email:login_id , password:login_ps }),\nbody:JSON.stringify(toSendSchool)}).then(function(response){return response.text();}).then(function(data){if(data===\"OK\"){readSchool(Schools,setUseSchools);}});};//データベースから初期項目を読み出し\nvar readSchool=function readSchool(Schools,setUseSchools){fetch(\"http://localhost:5000/school/school_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){return readSchools(Schools,data,setUseSchools);});};var readSchools=function readSchools(Schools,data,setUseSchools){Schools=data;console.log(Schools);enchantCheck(Schools,setUseSchools);};//checkを付与\nvar enchantCheck=function enchantCheck(Schools,setUseSchools){var setUseSchools3=[];Schools.map(function(school){setUseSchools3=[].concat(_toConsumableArray(setUseSchools3),[{school_name:school.school_name,school_id:school.school_id,IsCheck:true,seed:0}]);});setUseSchools(setUseSchools3);};//１つの高校を追加する\nvar addSchool=function addSchool(Schools,setUseSchools,addSchoolName){console.log(addSchoolName);fetch(\"http://localhost:5000/school/school_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({school_name:addSchoolName})}).then(function(response){return response.text();}).then(function(data){if(data===\"OK\"){readSchools(Schools,setUseSchools);}});};export var InputSchool=function InputSchool(){var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var urlTournamentName=searchParams.get(\"urlTournamentName\");var urlTournamentId=searchParams.get(\"urlTournamentId\");//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};//const { Schools } = require(\"../../../../DB/Schools\"); //分割代入\nvar Schools=[];var _useState=useState(!true),_useState2=_slicedToArray(_useState,2),isCheckBoxMode=_useState2[0],setIsCheckBoxMode=_useState2[1];var ref=useRef();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),useSchools=_useState4[0],setUseSchools=_useState4[1];useEffect(function(){readSchool(Schools,setUseSchools);},[]);var handleClick=function handleClick(){setUseSchools([].concat(_toConsumableArray(useSchools),[{school_name:ref.current.value,school_id:null,IsCheck:true,seed:0}]));};var handleCheckBox=function handleCheckBox(){setIsCheckBoxMode(!isCheckBoxMode);return/*#__PURE__*/_jsx(\"button\",{children:\"aa\"});};return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(TitleBar,{TitleText:\"高校入力選択画面\",PageTransition:PageTransition,valueUrl:-1}),/*#__PURE__*/_jsx(OptionButton,{}),/*#__PURE__*/_jsx(\"div\",{className:\"tournamentName\",children:/*#__PURE__*/_jsx(\"h3\",{children:urlTournamentName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"InputSchool\",children:[/*#__PURE__*/_jsx(\"input\",{ref:ref}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addSchool(Schools,setUseSchools,ref.current.value);},children:\"\\u8FFD\\u52A0\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckBox,children:\"\\u30C1\\u30A7\\u30C3\\u30AF\\u30DC\\u30C3\\u30AF\\u30B9\\u5165\\u529B\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return sendSchool(useSchools,urlTournamentId,Schools,setUseSchools);},children:\"\\u9AD8\\u6821\\u540D\\u767B\\u9332\"}),/*#__PURE__*/_jsx(\"hr\",{}),!isCheckBoxMode&&Hyoji(useSchools,navigate,urlTournamentName,urlTournamentId),isCheckBoxMode&&CheckBoxList(useSchools,setUseSchools),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"button\",{children:[/*#__PURE__*/_jsx(Link,{to:'/home/input_mode/',children:\"\\u623B\\u308B\"}),\" \"]})]});};export default InputSchool;","map":{"version":3,"names":["React","useState","useRef","Hyoji","CheckBoxList","Link","useNavigate","useSearchParams","useEffect","TitleBar","OptionButton","sendSchool","useSchools","urlTournamentId","Schools","setUseSchools","toSendSchool","map","school","IsCheck","tournament_id","school_name","school_id","seed","console","log","fetch","method","mode","headers","body","JSON","stringify","then","response","text","data","readSchool","json","readSchools","enchantCheck","setUseSchools3","addSchool","addSchoolName","InputSchool","searchParams","urlTournamentName","get","navigate","PageTransition","url","isCheckBoxMode","setIsCheckBoxMode","ref","handleClick","current","value","handleCheckBox"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/src/AllPage/InputAll/PreInput/InputSchoolPage/InputSchool.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport { Hyoji } from './comInputSchool/Hyoji';\r\nimport { CheckBoxList } from './comInputSchool/CheckBoxList1';\r\nimport { Link, useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { TitleBar } from \"../../../OtherPage/TitleBar/TitleBar\";\r\nimport { OptionButton } from \"../../../OtherPage/optionFunc/OptionButton\"\r\n\r\n//次回追加ボタン押した後に、高校再表示させるのをやる\r\n\r\n//データを送る\r\nconst sendSchool = (useSchools, urlTournamentId, Schools, setUseSchools) => {\r\n  let toSendSchool = []\r\n  useSchools.map((school) => {\r\n    if (school.IsCheck) {\r\n      toSendSchool = [...toSendSchool,\r\n      {\r\n        tournament_id: urlTournamentId,\r\n        school_name: school.school_name,\r\n        school_id: school.school_id,\r\n        seed: school.seed\r\n      }]\r\n    }\r\n\r\n  })\r\n  console.log(toSendSchool)\r\n\r\n  fetch(\"http://localhost:5000/school/participants_register\", {\r\n    method: \"POST\",\r\n    mode: \"cors\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    //body: JSON.stringify({ email:login_id , password:login_ps }),\r\n    body: JSON.stringify(toSendSchool),\r\n  })\r\n    .then((response) => response.text())\r\n    .then((data) => {\r\n      if (data === \"OK\") {\r\n        readSchool(Schools, setUseSchools)\r\n      }\r\n    })\r\n}\r\n\r\n\r\n//データベースから初期項目を読み出し\r\nconst readSchool = (Schools, setUseSchools) => {\r\n  fetch(\"http://localhost:5000/school/school_call\", {\r\n    method: \"POST\",\r\n    mode: \"cors\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => readSchools(Schools, data, setUseSchools))\r\n}\r\n\r\nconst readSchools = (Schools, data, setUseSchools) => {\r\n  Schools = data\r\n  console.log(Schools)\r\n  enchantCheck(Schools, setUseSchools);\r\n}\r\n\r\n\r\n//checkを付与\r\nconst enchantCheck = (Schools, setUseSchools) => {\r\n  let setUseSchools3 = []\r\n  Schools.map((school) => {\r\n    setUseSchools3 = (\r\n      [...setUseSchools3, {\r\n        school_name: school.school_name,\r\n        school_id: school.school_id,\r\n        IsCheck: true,\r\n        seed: 0\r\n      }])\r\n  })\r\n  setUseSchools(setUseSchools3)\r\n}\r\n\r\n\r\n//１つの高校を追加する\r\nconst addSchool = (Schools, setUseSchools, addSchoolName) => {\r\n  console.log(addSchoolName)\r\n  fetch(\"http://localhost:5000/school/school_register\", {\r\n    method: \"POST\",\r\n    mode: \"cors\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ school_name: addSchoolName }),\r\n  })\r\n    .then((response) => response.text())\r\n    .then((data) => {\r\n      if (data === \"OK\") {\r\n        readSchools(Schools, setUseSchools)\r\n      }\r\n    })\r\n}\r\n\r\n\r\nexport const InputSchool = () => {\r\n\r\n  const [searchParams] = useSearchParams();\r\n  const urlTournamentName = searchParams.get(\"urlTournamentName\")\r\n  const urlTournamentId = searchParams.get(\"urlTournamentId\")\r\n\r\n  //ページ遷移用\r\n  const navigate = useNavigate()\r\n  const PageTransition = (url) => {\r\n    navigate(url)\r\n  }\r\n\r\n  //const { Schools } = require(\"../../../../DB/Schools\"); //分割代入\r\n  let Schools = []\r\n\r\n  const [isCheckBoxMode, setIsCheckBoxMode] = useState(!true)\r\n  const ref = useRef()\r\n  const [useSchools, setUseSchools] = useState([])\r\n\r\n  useEffect(() => {\r\n    readSchool(Schools, setUseSchools);\r\n  }, [])\r\n\r\n\r\n\r\n\r\n  const handleClick = () => {\r\n    setUseSchools([...useSchools,\r\n    { school_name: ref.current.value, school_id: null, IsCheck: true, seed: 0 }\r\n    ])\r\n  }\r\n\r\n  const handleCheckBox = () => {\r\n    setIsCheckBoxMode(!isCheckBoxMode)\r\n    return (\r\n      <button>aa</button>\r\n    )\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <TitleBar\r\n        TitleText={\"高校入力選択画面\"}\r\n        PageTransition={PageTransition}\r\n        valueUrl={-1}\r\n      />\r\n      <OptionButton />\r\n\r\n      <div className=\"tournamentName\">\r\n        <h3>{urlTournamentName}</h3>\r\n      </div>\r\n      <div className=\"InputSchool\">\r\n        <input ref={ref} ></input>\r\n        <button onClick={() => addSchool(Schools, setUseSchools, ref.current.value)}>追加</button>\r\n      </div>\r\n      <br />\r\n      <button onClick={handleCheckBox}>チェックボックス入力</button>\r\n      <button onClick={() => sendSchool(useSchools, urlTournamentId, Schools, setUseSchools)}>高校名登録</button>\r\n      <hr></hr>\r\n      {!isCheckBoxMode && Hyoji(useSchools, navigate, urlTournamentName, urlTournamentId)}\r\n      {isCheckBoxMode && CheckBoxList(useSchools, setUseSchools)}<br />\r\n      <hr></hr>\r\n      <button><Link to={'/home/input_mode/'}>戻る</Link> </button>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default InputSchool;"],"mappings":"sVAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,OAASC,KAAK,KAAQ,wBAAwB,CAC9C,OAASC,YAAY,KAAQ,gCAAgC,CAC7D,OAASC,IAAI,CAAEC,WAAW,CAAEC,eAAe,KAAQ,kBAAkB,CACrE,OAASC,SAAS,KAAQ,OAAO,CAEjC,OAASC,QAAQ,KAAQ,sCAAsC,CAC/D,OAASC,YAAY,KAAQ,4CAA4C,CAEzE;AAEA;AAAA,wFACA,GAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,UAAU,CAAEC,eAAe,CAAEC,OAAO,CAAEC,aAAa,CAAK,CAC1E,GAAIC,aAAY,CAAG,EAAE,CACrBJ,UAAU,CAACK,GAAG,CAAC,SAACC,MAAM,CAAK,CACzB,GAAIA,MAAM,CAACC,OAAO,CAAE,CAClBH,YAAY,8BAAOA,YAAY,GAC/B,CACEI,aAAa,CAAEP,eAAe,CAC9BQ,WAAW,CAAEH,MAAM,CAACG,WAAW,CAC/BC,SAAS,CAAEJ,MAAM,CAACI,SAAS,CAC3BC,IAAI,CAAEL,MAAM,CAACK,IACf,CAAC,EAAC,CACJ,CAEF,CAAC,CAAC,CACFC,OAAO,CAACC,GAAG,CAACT,YAAY,CAAC,CAEzBU,KAAK,CAAC,oDAAoD,CAAE,CAC1DC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,MAAM,CACZC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACD;AACAC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAChB,YAAY,CACnC,CAAC,CAAC,CACCiB,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAIA,IAAI,GAAK,IAAI,CAAE,CACjBC,UAAU,CAACvB,OAAO,CAAEC,aAAa,CAAC,CACpC,CACF,CAAC,CAAC,CACN,CAAC,CAGD;AACA,GAAMsB,WAAU,CAAG,QAAbA,WAAU,CAAIvB,OAAO,CAAEC,aAAa,CAAK,CAC7CW,KAAK,CAAC,0CAA0C,CAAE,CAChDC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,MAAM,CACZC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACCI,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACI,IAAI,EAAE,GAAC,CACnCL,IAAI,CAAC,SAACG,IAAI,QAAKG,YAAW,CAACzB,OAAO,CAAEsB,IAAI,CAAErB,aAAa,CAAC,GAAC,CAC9D,CAAC,CAED,GAAMwB,YAAW,CAAG,QAAdA,YAAW,CAAIzB,OAAO,CAAEsB,IAAI,CAAErB,aAAa,CAAK,CACpDD,OAAO,CAAGsB,IAAI,CACdZ,OAAO,CAACC,GAAG,CAACX,OAAO,CAAC,CACpB0B,YAAY,CAAC1B,OAAO,CAAEC,aAAa,CAAC,CACtC,CAAC,CAGD;AACA,GAAMyB,aAAY,CAAG,QAAfA,aAAY,CAAI1B,OAAO,CAAEC,aAAa,CAAK,CAC/C,GAAI0B,eAAc,CAAG,EAAE,CACvB3B,OAAO,CAACG,GAAG,CAAC,SAACC,MAAM,CAAK,CACtBuB,cAAc,8BACRA,cAAc,GAAE,CAClBpB,WAAW,CAAEH,MAAM,CAACG,WAAW,CAC/BC,SAAS,CAAEJ,MAAM,CAACI,SAAS,CAC3BH,OAAO,CAAE,IAAI,CACbI,IAAI,CAAE,CACR,CAAC,EAAE,CACP,CAAC,CAAC,CACFR,aAAa,CAAC0B,cAAc,CAAC,CAC/B,CAAC,CAGD;AACA,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAI5B,OAAO,CAAEC,aAAa,CAAE4B,aAAa,CAAK,CAC3DnB,OAAO,CAACC,GAAG,CAACkB,aAAa,CAAC,CAC1BjB,KAAK,CAAC,8CAA8C,CAAE,CACpDC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,MAAM,CACZC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEX,WAAW,CAAEsB,aAAc,CAAC,CACrD,CAAC,CAAC,CACCV,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAIA,IAAI,GAAK,IAAI,CAAE,CACjBG,WAAW,CAACzB,OAAO,CAAEC,aAAa,CAAC,CACrC,CACF,CAAC,CAAC,CACN,CAAC,CAGD,MAAO,IAAM6B,YAAW,CAAG,QAAdA,YAAW,EAAS,CAE/B,qBAAuBrC,eAAe,EAAE,sDAAjCsC,YAAY,sBACnB,GAAMC,kBAAiB,CAAGD,YAAY,CAACE,GAAG,CAAC,mBAAmB,CAAC,CAC/D,GAAMlC,gBAAe,CAAGgC,YAAY,CAACE,GAAG,CAAC,iBAAiB,CAAC,CAE3D;AACA,GAAMC,SAAQ,CAAG1C,WAAW,EAAE,CAC9B,GAAM2C,eAAc,CAAG,QAAjBA,eAAc,CAAIC,GAAG,CAAK,CAC9BF,QAAQ,CAACE,GAAG,CAAC,CACf,CAAC,CAED;AACA,GAAIpC,QAAO,CAAG,EAAE,CAEhB,cAA4Cb,QAAQ,CAAC,CAAC,IAAI,CAAC,wCAApDkD,cAAc,eAAEC,iBAAiB,eACxC,GAAMC,IAAG,CAAGnD,MAAM,EAAE,CACpB,eAAoCD,QAAQ,CAAC,EAAE,CAAC,yCAAzCW,UAAU,eAAEG,aAAa,eAEhCP,SAAS,CAAC,UAAM,CACd6B,UAAU,CAACvB,OAAO,CAAEC,aAAa,CAAC,CACpC,CAAC,CAAE,EAAE,CAAC,CAKN,GAAMuC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxBvC,aAAa,8BAAKH,UAAU,GAC5B,CAAES,WAAW,CAAEgC,GAAG,CAACE,OAAO,CAACC,KAAK,CAAElC,SAAS,CAAE,IAAI,CAAEH,OAAO,CAAE,IAAI,CAAEI,IAAI,CAAE,CAAE,CAAC,GACzE,CACJ,CAAC,CAED,GAAMkC,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3BL,iBAAiB,CAAC,CAACD,cAAc,CAAC,CAClC,mBACE,8BAAmB,CAEvB,CAAC,CAID,mBACE,aAAK,SAAS,CAAC,MAAM,wBACnB,KAAC,QAAQ,EACP,SAAS,CAAE,UAAW,CACtB,cAAc,CAAEF,cAAe,CAC/B,QAAQ,CAAE,CAAC,CAAE,EACb,cACF,KAAC,YAAY,IAAG,cAEhB,YAAK,SAAS,CAAC,gBAAgB,uBAC7B,oBAAKH,iBAAiB,EAAM,EACxB,cACN,aAAK,SAAS,CAAC,aAAa,wBAC1B,cAAO,GAAG,CAAEO,GAAI,EAAU,cAC1B,eAAQ,OAAO,CAAE,yBAAMX,UAAS,CAAC5B,OAAO,CAAEC,aAAa,CAAEsC,GAAG,CAACE,OAAO,CAACC,KAAK,CAAC,EAAC,0BAAY,GACpF,cACN,aAAM,cACN,eAAQ,OAAO,CAAEC,cAAe,0EAAoB,cACpD,eAAQ,OAAO,CAAE,yBAAM9C,WAAU,CAACC,UAAU,CAAEC,eAAe,CAAEC,OAAO,CAAEC,aAAa,CAAC,EAAC,4CAAe,cACtG,aAAS,CACR,CAACoC,cAAc,EAAIhD,KAAK,CAACS,UAAU,CAAEoC,QAAQ,CAAEF,iBAAiB,CAAEjC,eAAe,CAAC,CAClFsC,cAAc,EAAI/C,YAAY,CAACQ,UAAU,CAAEG,aAAa,CAAC,cAAC,aAAM,cACjE,aAAS,cACT,uCAAQ,KAAC,IAAI,EAAC,EAAE,CAAE,mBAAoB,0BAAU,OAAU,GACtD,CAGV,CAAC,CAMD,cAAe6B,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}
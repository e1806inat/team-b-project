{"ast":null,"code":"import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import{OptionButton}from'../optionFunc/OptionButton';import{TitleBar}from\"../TitleBar/TitleBar\";import EditVenuePopup from\"./com/EditVenuePopup/EditVenuePopup\";//バックエンドのurlを取得\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var backendUrl=require(\"../../../DB/communication\").backendUrl;//送られた文字列がどれか空ならtrue\nvar isEnpty=function isEnpty(strArray){var flag=false;strArray.map(function(str){if(!str){flag=true;}});return flag;};//送る文字列が被っていればtrue\nvar isDuplicate=function isDuplicate(Array,key,id){var flag=false;Array.map(function(u){if(u[id]===key){flag=true;}});console.log(key);return flag;};//追加ボタン押したとき\nvar addVenue=function addVenue(venueArray,setVenueArray,nowVenueName){//被りチェック\nif(venueArray.some(function(v){return v.venue_name===nowVenueName;})){console.log(\"名前被ってます\");}else if(nowVenueName===\"\"){console.log(\"空白です\");}else{console.log(nowVenueName+\"を登録します\");fetch(backendUrl+\"/venue/venue_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"venue_name\":nowVenueName})}).then(function(){return loadVenue(setVenueArray);});}};var loadVenue=function loadVenue(setVenueArray){fetch(backendUrl+\"/venue/venue_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){setVenueArray(data);});};var editVenue=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(venueId,venueName){var Fetch,FetchReturn;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Fetch=fetch(backendUrl+\"/venue/venue_edit\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({venue_id:venueId,venue_name:venueName})});_context.next=3;return Fetch;case 3:FetchReturn=_context.sent.text();case 4:case\"end\":return _context.stop();}}},_callee);}));return function editVenue(_x,_x2){return _ref.apply(this,arguments);};}();var deleteVenue=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(venueId){var Fetch,FetchReturn;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Fetch=fetch(backendUrl+\"/venue/venue_edit\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({venue_id:venueId})});_context2.next=3;return Fetch;case 3:FetchReturn=_context2.sent.text();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteVenue(_x3){return _ref2.apply(this,arguments);};}();export var RegisterVenue=function RegisterVenue(){//会場名を入力する時のステイト\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),nowVenueName=_useState2[0],setNowVenueName=_useState2[1];//会場のリストを管理するステイト\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),venueArray=_useState4[0],setVenueArray=_useState4[1];//編集中の大会名を管理するステイト\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),editingVenueName=_useState6[0],setEditingVenueName=_useState6[1];//編集するか削除するかのチェックボックスを管理するステイト,trueなら編集,falseなら削除\nvar _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),EorDcheckBox=_useState8[0],setEorDcheckBox=_useState8[1];//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};useEffect(function(){loadVenue(setVenueArray);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TitleBar,{TitleText:\"大会入力選択画面\",PageTransition:PageTransition,valueUrl:-1}),/*#__PURE__*/_jsx(OptionButton,{}),/*#__PURE__*/_jsx(\"div\",{class:\"headline\",children:\"\\u4F1A\\u5834\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"whole1\",children:[\"\\u4F1A\\u5834\\u540D\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){setNowVenueName(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),isEnpty([nowVenueName])&&/*#__PURE__*/_jsx(\"button\",{class:\"btn_In_to\",onClick:function onClick(){},children:\"\\u8FFD\\u52A0\"}),!isEnpty([nowVenueName])&&/*#__PURE__*/_jsx(\"button\",{class:\"btn_In_to\",onClick:function onClick(){addVenue(venueArray,setVenueArray,nowVenueName);},children:\"\\u8FFD\\u52A0\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"headline\",children:\"\\u4F1A\\u5834\\u7DE8\\u96C6\"}),/*#__PURE__*/_jsx(\"div\",{class:\"whole\",children:/*#__PURE__*/_jsx(\"div\",{className:\"tournamentList\",children:/*#__PURE__*/_jsx(\"div\",{className:\"tournaments\",children:venueArray.map(function(Venue,ind){if(Venue.length!==0&&Venue.venue_name!==null){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(EditVenuePopup,{sendClassName:\"btn_In_to1\",Venue:Venue,ind:ind,editVenue:editVenue,venueArray:venueArray,setVenueArray:setVenueArray,editingVenueName:editingVenueName,setEditingVenueName:setEditingVenueName,EorDcheckBox:EorDcheckBox,setEorDcheckBox:setEorDcheckBox,deleteVenue:deleteVenue,loadVenue:loadVenue,isDuplicate:isDuplicate})});}})})})})]});};export default RegisterVenue;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","OptionButton","TitleBar","EditVenuePopup","backendUrl","require","isEnpty","strArray","flag","map","str","isDuplicate","Array","key","id","u","console","log","addVenue","venueArray","setVenueArray","nowVenueName","some","v","venue_name","fetch","method","mode","headers","body","JSON","stringify","then","loadVenue","response","json","data","editVenue","venueId","venueName","Fetch","venue_id","FetchReturn","text","deleteVenue","RegisterVenue","setNowVenueName","editingVenueName","setEditingVenueName","EorDcheckBox","setEorDcheckBox","navigate","PageTransition","url","e","target","value","Venue","ind","length"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/src/AllPage/OtherPage/RegisterVenue/RegisterVenue.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { OptionButton } from '../optionFunc/OptionButton'\r\nimport { TitleBar } from \"../TitleBar/TitleBar\";\r\nimport EditVenuePopup from \"./com/EditVenuePopup/EditVenuePopup\";\r\n\r\n\r\n//バックエンドのurlを取得\r\nconst backendUrl = require(\"../../../DB/communication\").backendUrl;\r\n\r\n\r\n//送られた文字列がどれか空ならtrue\r\nconst isEnpty = (strArray) => {\r\n  let flag = false\r\n  strArray.map((str) => {\r\n    if (!str) {\r\n      flag = true\r\n    }\r\n  })\r\n  return flag\r\n}\r\n\r\n//送る文字列が被っていればtrue\r\nconst isDuplicate = (Array, key, id) => {\r\n  let flag = false\r\n  Array.map((u) => {\r\n    if (u[id] === key) {\r\n      flag = true\r\n    }\r\n  })\r\n  console.log(key)\r\n  return flag\r\n}\r\n\r\n//追加ボタン押したとき\r\nconst addVenue = (venueArray, setVenueArray, nowVenueName,) => {\r\n\r\n  //被りチェック\r\n  if (venueArray.some((v) => v.venue_name === nowVenueName)) {\r\n    console.log(\"名前被ってます\")\r\n  }\r\n  else if (nowVenueName === \"\") {\r\n    console.log(\"空白です\")\r\n  }\r\n  else {\r\n    console.log(nowVenueName + \"を登録します\")\r\n\r\n    fetch(backendUrl + \"/venue/venue_register\", {\r\n      method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", },\r\n      body: JSON.stringify({ \"venue_name\": nowVenueName }),\r\n    })\r\n      .then(() => loadVenue(setVenueArray))\r\n  }\r\n}\r\n\r\nconst loadVenue = (setVenueArray) => {\r\n  fetch(backendUrl + \"/venue/venue_call\", {\r\n    method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", }\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => { setVenueArray(data) })\r\n}\r\n\r\nconst editVenue = async (venueId, venueName) => {\r\n  const Fetch = fetch(backendUrl + \"/venue/venue_edit\", {\r\n    method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", }\r\n    , body: JSON.stringify({ venue_id: venueId, venue_name: venueName }),\r\n  })\r\n  const FetchReturn = (await Fetch).text()\r\n}\r\n\r\nconst deleteVenue = async (venueId) => {\r\n  const Fetch = fetch(backendUrl + \"/venue/venue_edit\", {\r\n    method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", }\r\n    , body: JSON.stringify({ venue_id: venueId }),\r\n  })\r\n  const FetchReturn = (await Fetch).text()\r\n}\r\n\r\n\r\n\r\nexport const RegisterVenue = () => {\r\n\r\n  //会場名を入力する時のステイト\r\n  const [nowVenueName, setNowVenueName] = useState(\"\")\r\n\r\n  //会場のリストを管理するステイト\r\n  const [venueArray, setVenueArray] = useState([])\r\n\r\n  //編集中の大会名を管理するステイト\r\n  const [editingVenueName, setEditingVenueName] = useState(\"\")\r\n\r\n  //編集するか削除するかのチェックボックスを管理するステイト,trueなら編集,falseなら削除\r\n  const [EorDcheckBox, setEorDcheckBox] = useState(true)\r\n\r\n  //ページ遷移用\r\n  const navigate = useNavigate()\r\n  const PageTransition = (url) => {\r\n    navigate(url)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    loadVenue(setVenueArray)\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <TitleBar\r\n        TitleText={\"大会入力選択画面\"}\r\n        PageTransition={PageTransition}\r\n        valueUrl={-1}\r\n      />\r\n\r\n      <OptionButton />\r\n\r\n\r\n      <div class=\"headline\">会場追加</div>\r\n      <div class=\"whole1\">\r\n        会場名\r\n        <input type=\"text\" onChange={(e) => { setNowVenueName(e.target.value) }} />\r\n        <br />\r\n\r\n        {/* 追加ボタン */}\r\n        {isEnpty([nowVenueName]) &&\r\n          <button\r\n            class=\"btn_In_to\"\r\n            onClick={() => { }}>追加\r\n          </button>\r\n        }\r\n\r\n        {!isEnpty([nowVenueName]) &&\r\n          <button\r\n            class=\"btn_In_to\"\r\n            onClick={() => {\r\n              addVenue(venueArray, setVenueArray, nowVenueName)\r\n            }}>追加\r\n          </button>\r\n        }\r\n\r\n      </div>\r\n\r\n      <div class=\"headline\">会場編集</div>\r\n      <div class=\"whole\">\r\n        <div className=\"tournamentList\">\r\n          <div className=\"tournaments\">\r\n\r\n            {venueArray.map((Venue, ind) => {\r\n              if (Venue.length !== 0 && Venue.venue_name !== null) {\r\n                return (\r\n                  <>\r\n                    <EditVenuePopup\r\n                      sendClassName=\"btn_In_to1\"\r\n                      Venue={Venue}\r\n                      ind={ind}\r\n                      editVenue={editVenue}\r\n                      venueArray={venueArray}\r\n                      setVenueArray={setVenueArray}\r\n                      editingVenueName={editingVenueName}\r\n                      setEditingVenueName={setEditingVenueName}\r\n                      EorDcheckBox={EorDcheckBox}\r\n                      setEorDcheckBox={setEorDcheckBox}\r\n                      deleteVenue={deleteVenue}\r\n                      loadVenue={loadVenue}\r\n                      isDuplicate={isDuplicate}\r\n                    />\r\n\r\n                  </>\r\n                )\r\n              }\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RegisterVenue;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _defineProperty from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useCookies}from'react-cookie';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};//バックエンドのurlを取得\nvar backendUrl=require(\"../../DB/communication\").backendUrl;//フロントの階層urlを表示\nvar routeUrl=require(\"../../DB/communication\").routeUrl;var initialValues={loginID:\"test\",password:\"123456789\"};var _useState=useState(initialValues),_useState2=_slicedToArray(_useState,2),formValues=_useState2[0],setFormValues=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmit=_useState6[0],setIsSubmit=_useState6[1];var _useCookies=useCookies(),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var handleChande=function handleChande(e){//console.log(e.target.value);\nvar _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},name,value)));//console.log(formValues);\n};var handleSubmit=function handleSubmit(e){e.preventDefault();//ログイン情報を送信する\n//バリデーションチェック\nsetFormErrors(validate(formValues));setIsSubmit(true);console.log(formValues);};var validate=function validate(values){var errors={};if(!values.loginID){errors.loginID=\"ログイン名を入力してください。\";}if(!values.password){errors.password=\"パスワードを入力してください。\";}else if(values.password.length<4){errors.password=\"4文字以上15文字以下のパスワードを入力してください\";}else if(values.password.length>15){errors.password=\"4文字以上15文字以下のパスワードを入力してください\";}return errors;};var handleLogin=function handleLogin(){fetch(backendUrl+\"/auth/login\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user_name:formValues.loginID,password:formValues.password})}).then(function(response){return response.json();}).then(function(data){console.log(data);if(data!==null){console.log(data[\"session_id\"]);setCookie(\"sessionID\",data[\"session_id\"]);PageTransition(routeUrl+\"/home\");}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"formContainer\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"uiform\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u30ED\\u30B0\\u30A4\\u30F3\\u540D\",name:\"loginID\",onChange:function onChange(e){return handleChande(e);}}),/*#__PURE__*/_jsx(\"p\",{className:\"errorMsg\",children:formErrors.loginID})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"formField\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",name:\"password\",onChange:function onChange(e){return handleChande(e);}}),/*#__PURE__*/_jsx(\"p\",{className:\"errorMsg\",children:formErrors.password})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",onClick:handleLogin,children:\"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u60C5\\u5831\\u3092\\u9001\\u4FE1\"})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useCookies","useNavigate","Login","navigate","PageTransition","url","backendUrl","require","routeUrl","initialValues","loginID","password","formValues","setFormValues","formErrors","setFormErrors","isSubmit","setIsSubmit","cookies","setCookie","removeCookie","handleChande","e","target","name","value","handleSubmit","preventDefault","validate","console","log","values","errors","length","handleLogin","fetch","method","mode","headers","body","JSON","stringify","user_name","then","response","json","data"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/src/AllPage/LogInPage/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCookies } from 'react-cookie'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Login = () => {\r\n\r\n  //ページ遷移用\r\n  const navigate = useNavigate()\r\n  const PageTransition = (url) => {\r\n    navigate(url)\r\n  }\r\n\r\n  //バックエンドのurlを取得\r\n  const backendUrl = require(\"../../DB/communication\").backendUrl;\r\n\r\n  //フロントの階層urlを表示\r\n  const routeUrl = require(\"../../DB/communication\").routeUrl;\r\n\r\n  const initialValues = { loginID: \"test\", password: \"123456789\" };\r\n  const [formValues, setFormValues] = useState(initialValues);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const [cookies, setCookie, removeCookie] = useCookies();\r\n\r\n\r\n  const handleChande = (e) => {\r\n    //console.log(e.target.value);\r\n    const { name, value } = e.target;\r\n    setFormValues({ ...formValues, [name]: value });\r\n    //console.log(formValues);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    //ログイン情報を送信する\r\n    //バリデーションチェック\r\n    setFormErrors(validate(formValues));\r\n    setIsSubmit(true);\r\n    console.log(formValues);\r\n  };\r\n\r\n  const validate = (values) => {\r\n    const errors = {};\r\n\r\n    if (!values.loginID) {\r\n      errors.loginID = \"ログイン名を入力してください。\";\r\n    }\r\n    if (!values.password) {\r\n      errors.password = \"パスワードを入力してください。\";\r\n    }\r\n    else if (values.password.length < 4) {\r\n      errors.password = \"4文字以上15文字以下のパスワードを入力してください\";\r\n    }\r\n    else if (values.password.length > 15) {\r\n      errors.password = \"4文字以上15文字以下のパスワードを入力してください\";\r\n    }\r\n    return errors;\r\n  };\r\n\r\n\r\n\r\n\r\n  const handleLogin = () => {\r\n\r\n    fetch(backendUrl + \"/auth/login\", {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ user_name: formValues.loginID, password: formValues.password }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n\r\n        console.log(data)\r\n\r\n        if (data !== null) {\r\n          console.log(data[\"session_id\"])\r\n          setCookie(\"sessionID\", data[\"session_id\"])\r\n          PageTransition(routeUrl + \"/home\")\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"formContainer\">\r\n        <form onSubmit={(e) => handleSubmit(e)}>\r\n          <h1>ログイン</h1>\r\n\r\n          <div className=\"uiform\">\r\n            <div className=\"form\">\r\n              <div className=\"formField\">\r\n                <input type=\"text\"\r\n                  placeholder=\"ログイン名\"\r\n                  name=\"loginID\"\r\n                  onChange={(e) => handleChande(e)}\r\n                />\r\n                <p className=\"errorMsg\">{formErrors.loginID}</p>\r\n              </div>\r\n              <div className=\"formField\">\r\n                <input type=\"password\"\r\n                  placeholder=\"パスワード\"\r\n                  name=\"password\"\r\n                  onChange={(e) => handleChande(e)}\r\n                />\r\n                <p className=\"errorMsg\">{formErrors.password}</p>\r\n              </div>\r\n            </div>\r\n            <button className=\"submitButton\" onClick={handleLogin}>アカウント情報を送信</button>\r\n            {/* {Object.keys(formErrors).length === 0 && isSubmit && (\r\n              <div className=\"MsgOk\">照合中です</div>\r\n            )} */}\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
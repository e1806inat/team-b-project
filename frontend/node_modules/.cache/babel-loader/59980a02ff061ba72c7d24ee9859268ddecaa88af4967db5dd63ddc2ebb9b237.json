{"ast":null,"code":"import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{useSearchParams,useNavigate}from\"react-router-dom\";import{myIndexOf}from\"./functions/myIndexOf\";import\"./InputMember.css\";import MemberPopup from\"./functions/MemberPopup/MemberPopup\";import{TitleBar}from\"../../../OtherPage/TitleBar/TitleBar\";import{OptionButton}from\"../../../OtherPage/optionFunc/OptionButton\";//バックエンドのurlを取得\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var backendUrl=require(\"../../../../DB/communication\").backendUrl;var loadMember=function loadMember(uniformNumberArray,setUniformNumberArray,urlTournamentId,urlSchoolId,setCopyMember,selectedMember,setSelectedMember,isInitial,setRegisteredMembers){//高校に所属する3年生以下の人間を全員呼び出す\nfetch(backendUrl+\"/member/member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(allUnder3MemberData){setCopyMember(allUnder3MemberData);console.log(allUnder3MemberData);//初回レンダリング時のみ実行\nif(isInitial===true){//既に選手登録されている人間を読み出す\nfetch(backendUrl+\"/member/tournament_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(selectedMembersData){setRegisteredMembers(selectedMembersData);var tempSelectedMember=[];var tempUniformNumber=[];console.log(selectedMembersData);if(allUnder3MemberData.length!==0){allUnder3MemberData.map(function(allUnder3Member,index){tempSelectedMember=[].concat(_toConsumableArray(tempSelectedMember),[false]);tempUniformNumber=[].concat(_toConsumableArray(tempUniformNumber),[1]);for(var _i=0;_i<selectedMembersData.length;_i++){if(selectedMembersData[_i].player_id===allUnder3Member.player_id){tempSelectedMember[index]=true;}}var i=selectedMembersData.findIndex(function(v){return v.player_id===allUnder3Member.player_id;});if(i!==-1){tempUniformNumber[tempUniformNumber.length-1]=selectedMembersData[i].uniform_number;}});}setCheck(allUnder3MemberData,tempSelectedMember,setSelectedMember);tempUniformNumber=tempUniformNumber.slice(0,tempUniformNumber.length);setUniformNumberArray(tempUniformNumber);});}else{setCheck(allUnder3MemberData,selectedMember,setSelectedMember);}if(uniformNumberArray[0]==null){var _Array=[1];for(var i=1;i<allUnder3MemberData.length;i++){_Array=[].concat(_toConsumableArray(_Array),[1]);}uniformNumberArray=_Array;console.log(\"aaaaa\");setUniformNumberArray(uniformNumberArray);}});};var _require=require(\"../../../../DB/Schools\"),Schools=_require.Schools;//分割代入\n//const { Member } = require(\"../../../../DB/Member\")\nvar Member=[{}];var setCheck=function setCheck(copyMember,selectedMember,setSelectedMember){var copyArray=[];var beforeChecked=selectedMember;for(var i=0;i<copyMember.length;i++){copyArray=[].concat(_toConsumableArray(copyArray),[false]);}if(beforeChecked.length!==0){for(var _i2=0;_i2<beforeChecked.length;_i2++){copyArray[_i2]=beforeChecked[_i2];}}setSelectedMember(copyArray);};//背番号\nvar setBacknumber=function setBacknumber(copyMember,setCopyMember){for(var i=0;i<copyMember.length;i++){copyMember[i].uniform_number=1;}setCopyMember(copyMember);};var makePulldownBN=function makePulldownBN(ind,uniformNumberArray,setUniformNumberArray){//そのためにループしたい数と同じ長さの配列を作る\nvar nullArray=[0];for(var i=1;i<50;i++){nullArray=[].concat(_toConsumableArray(nullArray),[i]);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"select\",{id:\"fruit\",onChange:function onChange(e){console.log(e.target.value+\"_\"+ind);var copyUniformNumberArray=uniformNumberArray;copyUniformNumberArray=copyUniformNumberArray.slice(0,copyUniformNumberArray.length);copyUniformNumberArray[ind]=e.target.value;setUniformNumberArray(copyUniformNumberArray);},children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"\\u80CC\\u756A\\u53F7\\u3092\\u5909\\u66F4\\u3059\\u308B\"}),nullArray.map(function(component,ind){return/*#__PURE__*/_jsx(\"option\",{value:ind+1,children:ind+1});})]})});};var handleSousin=function handleSousin(copyMember,selectedMember,urlTournamentId,uniformNumberArray,registeredMembers){var sendArray=copyMember;for(var i=0;i<sendArray.length;i++){delete sendArray[i].hit_num;delete sendArray[i].bat_num;sendArray[i].tournament_id=urlTournamentId;sendArray[i].uniform_number=uniformNumberArray[i];}//選択したものだけの配列を作る\nvar sendArray2=[];sendArray.map(function(component,ind){if(selectedMember[ind]===true)sendArray2=[].concat(_toConsumableArray(sendArray2),[sendArray[ind]]);});//選択されたものから、既に登録されている人間を除いた配列を作る、登録されているやつを全員消すなら問題なし\n// let sendArray3 = []\n// sendArray2.map((v) => {\n//     if (registeredMembers.some((u) => u.player_name_kanji === v.player_name_kanji)) { }\n//     else {\n//         sendArray3 = [...sendArray3, v]\n//     }\n// })\n// console.log(sendArray3)\nconsole.log(registeredMembers);console.log(sendArray2);registeredMembers.map(function(v){fetch(backendUrl+\"/member/tournament_member_delete\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,player_id:v.player_id})});});//バックエンドに送信\nfetch(backendUrl+\"/member/tournament_member_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(sendArray2)});};var lordRegisteredMember=function lordRegisteredMember(urlTournamentId,urlSchoolId){fetch(backendUrl+\"/member/tournament_member_call\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({tournament_id:urlTournamentId,school_id:urlSchoolId})}).then(function(response){return response.json();}).then(function(data){console.log(data);});};var selectHitted=function selectHitted(handedHitState,handleHandedHit){if(handedHitState===\"左\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u5DE6\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"右\");},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"両\");},children:\"\\u4E21\\u6253\"})]});}else if(handedHitState===\"右\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"左\");},children:\"\\u5DE6\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"両\");},children:\"\\u4E21\\u6253\"})]});}else if(handedHitState===\"両\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"左\");},children:\"\\u5DE6\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedHit(\"右\");},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u4E21\\u6253\"})]});}};var selectThrowed=function selectThrowed(handedThrowState,handleHandedThrow){if(handedThrowState===\"左\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u5DE6\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"右\");},children:\"\\u53F3\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"両\");},children:\"\\u4E21\\u6295\"})]});}else if(handedThrowState===\"右\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"左\");},children:\"\\u5DE6\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u53F3\\u6253\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"両\");},children:\"\\u4E21\\u6295\"})]});}else if(handedThrowState===\"両\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"左\");},children:\"\\u5DE6\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"mediumblue\"},onClick:function onClick(){return handleHandedThrow(\"右\");},children:\"\\u53F3\\u6295\"}),/*#__PURE__*/_jsx(\"button\",{style:{color:\"white\",background:\"lightskyblue\"},children:\"\\u4E21\\u6253\"})]});}};//選択している数を表示\nvar cntSelectedMemberNum=function cntSelectedMemberNum(selectedMember){var cnt=0;selectedMember.map(function(v){if(v)cnt++;});return cnt;};export var InputMember=function InputMember(){//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};var ining=1;var number=1;var iningRef=useRef(null);var numberRef=useRef(null);//名前を管理するステイト\nvar _useState=useState({famiryName:\"\",firstName:\"\"}),_useState2=_slicedToArray(_useState,2),nameKanji=_useState2[0],setNameKanji=_useState2[1];var _useState3=useState({famiryName:\"\",firstName:\"\"}),_useState4=_slicedToArray(_useState3,2),nameHira=_useState4[0],setNameHira=_useState4[1];var _useState5=useState(ining),_useState6=_slicedToArray(_useState5,2),iningState=_useState6[0],setIningState=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),schoolState=_useState8[0],setSchoolState=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),numberState=_useState10[0],setNumberState=_useState10[1];var _useState11=useState(\"左\"),_useState12=_slicedToArray(_useState11,2),handedHitState=_useState12[0],setHandedHitState=_useState12[1];var _useState13=useState(\"左\"),_useState14=_slicedToArray(_useState13,2),handedThrowState=_useState14[0],setHandedThrowState=_useState14[1];//既に選手登録されている選手を管理するステイト\nvar _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),registeredMembers=_useState16[0],setRegisteredMembers=_useState16[1];//数を監視するステイト\nvar selectedMemberNum=0;//メンバーを選択しているかどうかのフラグをつくる\nvar copyArray=[false];var _useState17=useState(copyArray),_useState18=_slicedToArray(_useState17,2),selectedMember=_useState18[0],setSelectedMember=_useState18[1];//urlから値を取得\nvar _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var urlTournamentId=searchParams.get(\"urlTournamentId\");var urlTournamentName=searchParams.get(\"urlTournamentName\");var urlSchoolId=searchParams.get(\"urlSchoolId\");var urlSchoolName=searchParams.get(\"urlSchoolName\");//背番号を格納する配列\nvar _useState19=useState([null]),_useState20=_slicedToArray(_useState19,2),uniformNumberArray=_useState20[0],setUniformNumberArray=_useState20[1];//クリック時メンバー選択\nvar handleSelected=function handleSelected(ind){console.log(selectedMember[ind]);if(cntSelectedMemberNum(selectedMember)>=20&&selectedMember[ind]===false){}else{copyArray=selectedMember.slice(0,selectedMember.length);// stateの配列をコピー(値渡し)\ncopyArray[ind]=!copyArray[ind];setSelectedMember(copyArray);}};var _useState21=useState(Member),_useState22=_slicedToArray(_useState21,2),copyMember=_useState22[0],setCopyMember=_useState22[1];var initialSetIning=function initialSetIning(){for(var i=1;i<=3;i++){var option=document.createElement('option');option.value=i;option.text=i;iningRef.current.appendChild(option);}};var initialSetNumber=function initialSetNumber(){for(var i=1;i<=50;i++){var option=document.createElement('option');option.value=i;option.text=i;numberRef.current.appendChild(option);}};useEffect(function(){initialSetIning();initialSetNumber();loadMember(uniformNumberArray,setUniformNumberArray,urlTournamentId,urlSchoolId,setCopyMember,selectedMember,setSelectedMember,true,setRegisteredMembers);//明日のメモ\n//選手を追加すると、ロードしなおすため背番号が消えてしまう。\n//だから、copymemberとは別の配列を用意してそこに記録する\n//選手を追加する場合は下から出てくる\n//あと選手の送信も訂正すること\nlordRegisteredMember(urlTournamentId,urlSchoolId);},[]);var selectIning=function selectIning(e){setIningState(e.target.value);};var selectNumber=function selectNumber(e){setNumberState(e.target.value);};var selectSchool=function selectSchool(e){setSchoolState(e.target.value);};var handleHandedHit=function handleHandedHit(value){setHandedHitState(value);};var handleHandedThrow=function handleHandedThrow(value){setHandedThrowState(value);};var handleMembers=function handleMembers(uniformNumberArray,setUniformNumberArray,nameKanji,nameHira){var Array=[{\"school_id\":urlSchoolId,\"player_name_kanji\":nameKanji.famiryName+\"　\"+nameKanji.firstName,\"player_name_hira\":nameHira.famiryName+\"　\"+nameHira.firstName,\"uniform_number\":numberRef.current.value,\"grade\":iningRef.current.value,\"handed_hit\":handedHitState,\"handed_throw\":handedThrowState,\"BA\":0,\"bat_num\":0,\"hit_num\":0}];if(copyMember.some(function(u){return u.player_name_kanji===Array[0].player_name_kanji;})&&copyMember.some(function(u){return u.player_name_hira===Array[0].player_name_hira;})){console.log(\"out\");}else{console.log(\"safe\");fetch(\"http://localhost:5000/member/member_register\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Array)}).then(function(response){return response.text();}).then(function(data){if(data===\"OK\"){//背番号の取得\nvar copyUniformNumberArray=uniformNumberArray;copyUniformNumberArray=copyUniformNumberArray.slice(0,copyUniformNumberArray.length);console.log(numberRef.current.value);setUniformNumberArray([].concat(_toConsumableArray(copyUniformNumberArray),[numberRef.current.value]));console.log([].concat(_toConsumableArray(uniformNumberArray),[numberRef.current.value]));loadMember(uniformNumberArray,setUniformNumberArray,urlTournamentId,urlSchoolId,setCopyMember,selectedMember,setSelectedMember,false);}});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TitleBar,{TitleText:\"選手登録画面\",PageTransition:PageTransition,valueUrl:-1}),/*#__PURE__*/_jsx(OptionButton,{}),/*#__PURE__*/_jsx(\"div\",{className:\"IMtitle\",children:\"\\u51FA\\u5834\\u9078\\u624B\\u9078\\u629E\\u753B\\u9762\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject\",children:[/*#__PURE__*/_jsx(\"h3\",{children:urlTournamentName}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u7DE8\\u96C6\\u4E2D:\",urlSchoolName]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toroku\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"MakeGame\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grade\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"year\",children:[\"\\u5B66\\u5E74\",/*#__PURE__*/_jsx(\"select\",{ref:iningRef,value:iningState,onChange:selectIning})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uniNum\",children:[\"\\u80CC\\u756A\\u53F7\",/*#__PURE__*/_jsx(\"select\",{ref:numberRef,value:numberState,onChange:selectNumber})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputName\",children:[\"\\u6C0F\\uFF08\\u6F22\\u5B57\\uFF09\\u3000\\u3000\",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNameKanji({famiryName:e.target.value,firstName:nameKanji.firstName});}}),\"\\u540D\\uFF08\\u6F22\\u5B57\\uFF09\\u3000\\u3000\",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNameKanji({famiryName:nameKanji.famiryName,firstName:e.target.value});}}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u6C0F\\uFF08\\u3072\\u3089\\u304C\\u306A\\uFF09\",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNameHira({famiryName:e.target.value,firstName:nameHira.firstName});}}),\"\\u540D\\uFF08\\u3072\\u3089\\u304C\\u306A\\uFF09\",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setNameHira({famiryName:nameHira.famiryName,firstName:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectDominant\",children:[/*#__PURE__*/_jsx(\"div\",{children:selectHitted(handedHitState,handleHandedHit)}),/*#__PURE__*/_jsx(\"div\",{children:selectThrowed(handedThrowState,handleHandedThrow)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"addButton\",onClick:function onClick(){return handleMembers(uniformNumberArray,setUniformNumberArray,nameKanji,nameHira);},children:\"\\u8FFD\\u52A0\"}),// () => {\n//     selectedMember.map((v) => {\n//         if (v) selectedMemberNum = selectedMemberNum + 1\n//         console.log(selectedMemberNum)\n//     })\n//     return(<a>{selectedMemberNum}</a>)\n// }\ncntSelectedMemberNum(selectedMember)]})}),/*#__PURE__*/_jsx(\"div\",{className:\"hyoji\",children:/*#__PURE__*/_jsx(\"div\",{className:\"players\",children:copyMember.map(function(member,ind){return/*#__PURE__*/_jsxs(\"div\",{className:\"school\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleSelected(ind);},className:\"InputMember\"+selectedMember[ind],children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selectName\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \\xA0\\xA0\",member.grade,\"\\u5E74\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"playerName\",children:[\"\\xA0\\xA0\\xA0\\xA0\",member.player_name_kanji,\"\\uFF08 \",member.player_name_hira,\"\\uFF09\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Dominant\",children:[\"\\xA0 \",member.handed_hit,\"\\u6253 \\xA0 \",member.handed_throw,\"\\u6295 \\xA0 \\u80CC\\u756A\\u53F7:\",uniformNumberArray[ind]]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectdiv\",children:[\"\\u80CC\\u756A\\u53F7\",/*#__PURE__*/_jsx(\"br\",{}),makePulldownBN(ind,uniformNumberArray,setUniformNumberArray)]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});})})}),/*#__PURE__*/_jsx(\"div\",{className:\"sendButtonArea\",children:/*#__PURE__*/_jsx(MemberPopup,{handleSousin:handleSousin,copyMember:copyMember,selectedMember:selectedMember,urlTournamentId:urlTournamentId,uniformNumberArray:uniformNumberArray,PageTransition:PageTransition,registeredMembers:registeredMembers})})]});};export default InputMember;","map":{"version":3,"names":["React","useState","useEffect","useRef","useSearchParams","useNavigate","myIndexOf","MemberPopup","TitleBar","OptionButton","backendUrl","require","loadMember","uniformNumberArray","setUniformNumberArray","urlTournamentId","urlSchoolId","setCopyMember","selectedMember","setSelectedMember","isInitial","setRegisteredMembers","fetch","method","mode","headers","body","JSON","stringify","school_id","then","response","json","allUnder3MemberData","console","log","tournament_id","selectedMembersData","tempSelectedMember","tempUniformNumber","length","map","allUnder3Member","index","i","player_id","findIndex","v","uniform_number","setCheck","slice","Array","Schools","Member","copyMember","copyArray","beforeChecked","setBacknumber","makePulldownBN","ind","nullArray","e","target","value","copyUniformNumberArray","component","handleSousin","registeredMembers","sendArray","hit_num","bat_num","sendArray2","lordRegisteredMember","data","selectHitted","handedHitState","handleHandedHit","color","background","selectThrowed","handedThrowState","handleHandedThrow","cntSelectedMemberNum","cnt","InputMember","navigate","PageTransition","url","ining","number","iningRef","numberRef","famiryName","firstName","nameKanji","setNameKanji","nameHira","setNameHira","iningState","setIningState","schoolState","setSchoolState","numberState","setNumberState","setHandedHitState","setHandedThrowState","selectedMemberNum","searchParams","get","urlTournamentName","urlSchoolName","handleSelected","initialSetIning","option","document","createElement","text","current","appendChild","initialSetNumber","selectIning","selectNumber","selectSchool","handleMembers","some","u","player_name_kanji","player_name_hira","member","grade","handed_hit","handed_throw"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project/frontend/src/AllPage/InputAll/PreInput/InputMemberPage/InputMember.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { myIndexOf } from \"./functions/myIndexOf\";\r\nimport \"./InputMember.css\"\r\nimport MemberPopup from \"./functions/MemberPopup/MemberPopup\"\r\n\r\nimport { TitleBar } from \"../../../OtherPage/TitleBar/TitleBar\";\r\nimport { OptionButton } from \"../../../OtherPage/optionFunc/OptionButton\"\r\n\r\n//バックエンドのurlを取得\r\nconst backendUrl = require(\"../../../../DB/communication\").backendUrl;\r\n\r\n\r\nconst loadMember = (uniformNumberArray, setUniformNumberArray, urlTournamentId, urlSchoolId, setCopyMember, selectedMember, setSelectedMember, isInitial, setRegisteredMembers) => {\r\n    //高校に所属する3年生以下の人間を全員呼び出す\r\n    fetch(backendUrl + \"/member/member_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ school_id: urlSchoolId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((allUnder3MemberData) => {\r\n            setCopyMember(allUnder3MemberData);\r\n            console.log(allUnder3MemberData)\r\n\r\n            //初回レンダリング時のみ実行\r\n            if (isInitial === true) {\r\n                //既に選手登録されている人間を読み出す\r\n                fetch(backendUrl + \"/member/tournament_member_call\", {\r\n                    method: \"POST\",\r\n                    mode: \"cors\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((selectedMembersData) => {\r\n                        setRegisteredMembers(selectedMembersData)\r\n\r\n                        let tempSelectedMember = []\r\n                        let tempUniformNumber = []\r\n\r\n\r\n                        console.log(selectedMembersData)\r\n\r\n                        if (allUnder3MemberData.length !== 0) {\r\n                            allUnder3MemberData.map((allUnder3Member, index) => {\r\n\r\n                                tempSelectedMember = [...tempSelectedMember, false]\r\n                                tempUniformNumber = [...tempUniformNumber, 1]\r\n\r\n                                for (let i = 0; i < selectedMembersData.length; i++) {\r\n                                    if (selectedMembersData[i].player_id === allUnder3Member.player_id) {\r\n                                        tempSelectedMember[index] = true\r\n                                    }\r\n                                }\r\n\r\n                                let i = selectedMembersData.findIndex((v)=> v.player_id === allUnder3Member.player_id)\r\n                                if(i!==-1){\r\n                                tempUniformNumber[tempUniformNumber.length-1] = selectedMembersData[i].uniform_number\r\n                                }\r\n                            })\r\n                        }\r\n\r\n\r\n\r\n                        setCheck(allUnder3MemberData, tempSelectedMember, setSelectedMember);\r\n                        tempUniformNumber = tempUniformNumber.slice(0, tempUniformNumber.length)\r\n                        setUniformNumberArray(tempUniformNumber)\r\n\r\n                    })\r\n            }\r\n\r\n            else {\r\n                setCheck(allUnder3MemberData, selectedMember, setSelectedMember)\r\n            }\r\n\r\n            if (uniformNumberArray[0] == null) {\r\n                let Array = [1];\r\n                for (let i = 1; i < allUnder3MemberData.length; i++) {\r\n                    Array = [...Array, 1]\r\n                }\r\n                uniformNumberArray = Array\r\n                console.log(\"aaaaa\")\r\n                setUniformNumberArray(uniformNumberArray)\r\n            }\r\n\r\n        })\r\n}\r\n\r\n\r\n\r\nconst { Schools } = require(\"../../../../DB/Schools\"); //分割代入\r\n//const { Member } = require(\"../../../../DB/Member\")\r\nconst Member = [{}]\r\n\r\nconst setCheck = (copyMember, selectedMember, setSelectedMember) => {\r\n    let copyArray = []\r\n    const beforeChecked = selectedMember\r\n\r\n    for (let i = 0; i < copyMember.length; i++) {\r\n        copyArray = [...copyArray, false]\r\n    }\r\n\r\n    if (beforeChecked.length !== 0) {\r\n        for (let i = 0; i < beforeChecked.length; i++) {\r\n            copyArray[i] = beforeChecked[i]\r\n        }\r\n    }\r\n\r\n    setSelectedMember(copyArray)\r\n}\r\n\r\n//背番号\r\nconst setBacknumber = (copyMember, setCopyMember) => {\r\n    for (let i = 0; i < copyMember.length; i++) {\r\n        copyMember[i].uniform_number = 1\r\n    }\r\n    setCopyMember(copyMember)\r\n\r\n}\r\n\r\nconst makePulldownBN = (ind, uniformNumberArray, setUniformNumberArray) => {\r\n\r\n    //そのためにループしたい数と同じ長さの配列を作る\r\n    let nullArray = [0]\r\n    for (let i = 1; i < 50; i++) {\r\n        nullArray = [...nullArray, i]\r\n    }\r\n    return (\r\n        <>\r\n            <select id=\"fruit\"\r\n                onChange={(e) => {\r\n                    console.log(e.target.value + \"_\" + ind)\r\n                    let copyUniformNumberArray = uniformNumberArray\r\n                    copyUniformNumberArray = copyUniformNumberArray.slice(0, copyUniformNumberArray.length)\r\n                    copyUniformNumberArray[ind] = e.target.value\r\n                    setUniformNumberArray(copyUniformNumberArray)\r\n                }}>\r\n                <option value={0}>背番号を変更する</option>\r\n                {nullArray.map((component, ind) => (\r\n                    <option value={ind + 1}>{ind + 1}</option>\r\n                ))\r\n                }\r\n            </select>\r\n        </>\r\n    )\r\n}\r\n\r\nconst handleSousin = (copyMember, selectedMember, urlTournamentId, uniformNumberArray, registeredMembers) => {\r\n\r\n    let sendArray = copyMember\r\n\r\n\r\n    for (let i = 0; i < sendArray.length; i++) {\r\n        delete sendArray[i].hit_num\r\n        delete sendArray[i].bat_num\r\n        sendArray[i].tournament_id = urlTournamentId\r\n        sendArray[i].uniform_number = uniformNumberArray[i]\r\n\r\n    }\r\n\r\n    //選択したものだけの配列を作る\r\n    let sendArray2 = []\r\n    sendArray.map((component, ind) => {\r\n        if (selectedMember[ind] === true) sendArray2 = [...sendArray2, sendArray[ind]]\r\n    })\r\n\r\n    //選択されたものから、既に登録されている人間を除いた配列を作る、登録されているやつを全員消すなら問題なし\r\n    // let sendArray3 = []\r\n    // sendArray2.map((v) => {\r\n    //     if (registeredMembers.some((u) => u.player_name_kanji === v.player_name_kanji)) { }\r\n    //     else {\r\n    //         sendArray3 = [...sendArray3, v]\r\n    //     }\r\n    // })\r\n\r\n    // console.log(sendArray3)\r\n\r\n    console.log(registeredMembers)\r\n    console.log(sendArray2)\r\n    registeredMembers.map((v)=> {\r\n        fetch(backendUrl + \"/member/tournament_member_delete\", {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({ tournament_id:urlTournamentId, player_id:v.player_id }),\r\n        })\r\n    \r\n    })\r\n\r\n\r\n//バックエンドに送信\r\n    fetch(backendUrl + \"/member/tournament_member_register\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(sendArray2),\r\n    })\r\n}\r\n\r\nconst lordRegisteredMember = (urlTournamentId, urlSchoolId) => {\r\n    fetch(backendUrl + \"/member/tournament_member_call\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ tournament_id: urlTournamentId, school_id: urlSchoolId }),\r\n    })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            console.log(data)\r\n        })\r\n}\r\n\r\n\r\nconst selectHitted = (handedHitState, handleHandedHit) => {\r\n    if (handedHitState === \"左\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>左打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"右\")}>右打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"両\")}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedHitState === \"右\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"左\")}>左打</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>右打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"両\")}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedHitState === \"両\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"左\")}>左打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedHit(\"右\")}>右打</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst selectThrowed = (handedThrowState, handleHandedThrow) => {\r\n    if (handedThrowState === \"左\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>左投</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"右\")}>右投</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"両\")}>両投</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedThrowState === \"右\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"左\")}>左投</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>右打</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"両\")}>両投</button>\r\n            </>\r\n        )\r\n    }\r\n    else if (handedThrowState === \"両\") {\r\n        return (\r\n            <>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"左\")}>左投</button>\r\n                <button style={{ color: \"white\", background: \"mediumblue\" }} onClick={() => handleHandedThrow(\"右\")}>右投</button>\r\n                <button style={{ color: \"white\", background: \"lightskyblue\" }}>両打</button>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\n//選択している数を表示\r\nconst cntSelectedMemberNum = (selectedMember) => {\r\n    let cnt = 0\r\n    selectedMember.map((v) => {\r\n        if (v) cnt++\r\n    })\r\n    return cnt\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const InputMember = () => {\r\n\r\n    //ページ遷移用\r\n    const navigate = useNavigate()\r\n    const PageTransition = (url) => {\r\n        navigate(url)\r\n    }\r\n\r\n\r\n    const ining = 1;\r\n    const number = 1;\r\n\r\n    const iningRef = useRef(null)\r\n    const numberRef = useRef(null)\r\n\r\n    //名前を管理するステイト\r\n    const [nameKanji, setNameKanji] = useState({ famiryName: \"\", firstName: \"\" })\r\n    const [nameHira, setNameHira] = useState({ famiryName: \"\", firstName: \"\" })\r\n\r\n    const [iningState, setIningState] = useState(ining)\r\n    const [schoolState, setSchoolState] = useState(1)\r\n    const [numberState, setNumberState] = useState(1)\r\n\r\n    const [handedHitState, setHandedHitState] = useState(\"左\")\r\n    const [handedThrowState, setHandedThrowState] = useState(\"左\")\r\n\r\n    //既に選手登録されている選手を管理するステイト\r\n    const [registeredMembers, setRegisteredMembers] = useState([])\r\n\r\n    //数を監視するステイト\r\n    let selectedMemberNum = 0\r\n\r\n    //メンバーを選択しているかどうかのフラグをつくる\r\n    let copyArray = [false]\r\n    const [selectedMember, setSelectedMember] = useState(copyArray)\r\n\r\n    //urlから値を取得\r\n    const [searchParams] = useSearchParams();\r\n    const urlTournamentId = searchParams.get(\"urlTournamentId\")\r\n    const urlTournamentName = searchParams.get(\"urlTournamentName\")\r\n    const urlSchoolId = searchParams.get(\"urlSchoolId\")\r\n    const urlSchoolName = searchParams.get(\"urlSchoolName\")\r\n\r\n    //背番号を格納する配列\r\n    const [uniformNumberArray, setUniformNumberArray] = useState([null]);\r\n\r\n    //クリック時メンバー選択\r\n    const handleSelected = (ind) => {\r\n        console.log(selectedMember[ind])\r\n        if (cntSelectedMemberNum(selectedMember) >= 20 && selectedMember[ind] === false) {}\r\n        else{\r\n            copyArray = selectedMember.slice(0, selectedMember.length); // stateの配列をコピー(値渡し)\r\n            copyArray[ind] = !copyArray[ind]\r\n            setSelectedMember(copyArray)\r\n        }\r\n    }\r\n\r\n    const [copyMember, setCopyMember] = useState(Member)\r\n\r\n    const initialSetIning = () => {\r\n        for (let i = 1; i <= 3; i++) {\r\n            const option = document.createElement('option')\r\n            option.value = i\r\n            option.text = i\r\n            iningRef.current.appendChild(option)\r\n        }\r\n    }\r\n\r\n    const initialSetNumber = () => {\r\n        for (let i = 1; i <= 50; i++) {\r\n            const option = document.createElement('option')\r\n            option.value = i;\r\n            option.text = i;\r\n            numberRef.current.appendChild(option)\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        initialSetIning();\r\n        initialSetNumber();\r\n        loadMember(uniformNumberArray,\r\n            setUniformNumberArray,\r\n            urlTournamentId,\r\n            urlSchoolId,\r\n            setCopyMember,\r\n            selectedMember,\r\n            setSelectedMember,\r\n            true,\r\n            setRegisteredMembers)\r\n        //明日のメモ\r\n        //選手を追加すると、ロードしなおすため背番号が消えてしまう。\r\n        //だから、copymemberとは別の配列を用意してそこに記録する\r\n        //選手を追加する場合は下から出てくる\r\n        //あと選手の送信も訂正すること\r\n        lordRegisteredMember(urlTournamentId, urlSchoolId)\r\n    }, [])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const selectIning = (e) => {\r\n        setIningState(e.target.value)\r\n    }\r\n    const selectNumber = (e) => {\r\n        setNumberState(e.target.value)\r\n    }\r\n    const selectSchool = (e) => {\r\n        setSchoolState(e.target.value)\r\n    }\r\n    const handleHandedHit = (value) => {\r\n        setHandedHitState(value)\r\n    }\r\n    const handleHandedThrow = (value) => {\r\n        setHandedThrowState(value)\r\n    }\r\n\r\n\r\n\r\n\r\n    const handleMembers = (uniformNumberArray, setUniformNumberArray, nameKanji, nameHira) => {\r\n        let Array = [{\r\n            \"school_id\": urlSchoolId,\r\n            \"player_name_kanji\": nameKanji.famiryName + \"　\" + nameKanji.firstName,\r\n            \"player_name_hira\": nameHira.famiryName + \"　\" + nameHira.firstName,\r\n            \"uniform_number\": numberRef.current.value,\r\n            \"grade\": iningRef.current.value,\r\n            \"handed_hit\": handedHitState,\r\n            \"handed_throw\": handedThrowState,\r\n            \"BA\": 0,\r\n            \"bat_num\": 0,\r\n            \"hit_num\": 0\r\n        }]\r\n\r\n\r\n        if (copyMember.some((u) => u.player_name_kanji === Array[0].player_name_kanji) &&\r\n            copyMember.some((u) => u.player_name_hira === Array[0].player_name_hira)\r\n        ) {\r\n            console.log(\"out\")\r\n        }\r\n        else {\r\n            console.log(\"safe\")\r\n            fetch(\"http://localhost:5000/member/member_register\", {\r\n                method: \"POST\",\r\n                mode: \"cors\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify(Array),\r\n            })\r\n                .then((response) => response.text())\r\n                .then((data) => {\r\n                    if (data === \"OK\") {\r\n                        //背番号の取得\r\n                        let copyUniformNumberArray = uniformNumberArray\r\n                        copyUniformNumberArray = copyUniformNumberArray.slice(0, copyUniformNumberArray.length)\r\n                        console.log(numberRef.current.value)\r\n                        setUniformNumberArray([...copyUniformNumberArray, numberRef.current.value])\r\n                        console.log([...uniformNumberArray, numberRef.current.value])\r\n                        loadMember(uniformNumberArray, setUniformNumberArray, urlTournamentId, urlSchoolId, setCopyMember, selectedMember, setSelectedMember, false)\r\n                    }\r\n                })\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <TitleBar\r\n                TitleText={\"選手登録画面\"}\r\n                PageTransition={PageTransition}\r\n                valueUrl={-1}\r\n            />\r\n            <OptionButton />\r\n\r\n\r\n            <div className=\"IMtitle\">出場選手選択画面</div>\r\n            <div className=\"subject\">\r\n                <h3>{urlTournamentName}</h3>\r\n                <h4>編集中:{urlSchoolName}</h4>\r\n            </div>\r\n\r\n            <div className=\"toroku\">\r\n                <div className=\"MakeGame\">\r\n                    <div className=\"grade\">\r\n                        <div className=\"year\">学年<select ref={iningRef} value={iningState} onChange={selectIning} ></select></div>\r\n                        <div className=\"uniNum\">背番号<select ref={numberRef} value={numberState} onChange={selectNumber} ></select></div>\r\n                    </div>\r\n\r\n                    <div className=\"inputName\">\r\n\r\n                        氏（漢字）　　<input onChange={(e) => setNameKanji({ famiryName: e.target.value, firstName: nameKanji.firstName })} ></input>\r\n                        名（漢字）　　<input onChange={(e) => setNameKanji({ famiryName: nameKanji.famiryName, firstName: e.target.value })} ></input>\r\n\r\n\r\n                        <br />\r\n                        氏（ひらがな）<input onChange={(e) => setNameHira({ famiryName: e.target.value, firstName: nameHira.firstName })}></input>\r\n                        名（ひらがな）<input onChange={(e) => setNameHira({ famiryName: nameHira.famiryName, firstName: e.target.value })}></input>\r\n                    </div>\r\n\r\n                    <div className=\"selectDominant\">\r\n                        <div>{selectHitted(handedHitState, handleHandedHit)}</div>\r\n                        <div>{selectThrowed(handedThrowState, handleHandedThrow)}</div>\r\n                    </div>\r\n\r\n                    <br />\r\n                    <button\r\n                        className=\"addButton\"\r\n                        onClick={() => handleMembers(uniformNumberArray, setUniformNumberArray, nameKanji, nameHira)}\r\n                    >追加</button>\r\n                    {\r\n                        // () => {\r\n                        //     selectedMember.map((v) => {\r\n                        //         if (v) selectedMemberNum = selectedMemberNum + 1\r\n                        //         console.log(selectedMemberNum)\r\n                        //     })\r\n                        //     return(<a>{selectedMemberNum}</a>)\r\n\r\n                        // }\r\n                        cntSelectedMemberNum(selectedMember)\r\n                    }\r\n\r\n                    {/* <button onClick={() => { console.log(uniformNumberArray) }}>プルダウンテストボタン</button> */}\r\n                </div>\r\n            </div>\r\n            <div className=\"hyoji\">\r\n                <div className=\"players\">\r\n                    {copyMember.map((member, ind) => (\r\n                        <div className=\"school\">\r\n                            <button\r\n                                onClick={() => handleSelected(ind)}\r\n                                className={\"InputMember\" + selectedMember[ind]}\r\n                            >\r\n                                <div className=\"selectName\">\r\n                                    <div> &nbsp;&nbsp;{member.grade}年</div><div className=\"playerName\">&nbsp;&nbsp;&nbsp;&nbsp;{member.player_name_kanji}（ {member.player_name_hira}）</div>\r\n                                </div>\r\n                                {/* &nbsp; 背番号{member.uniform_number}  */}\r\n                                <div className=\"Dominant\">&nbsp; {member.handed_hit}打 &nbsp; {member.handed_throw}投 &nbsp; 背番号:{uniformNumberArray[ind]}</div>\r\n\r\n                            </button>\r\n\r\n                            <div className=\"selectdiv\">\r\n                                背番号<br />\r\n                                {makePulldownBN(ind, uniformNumberArray, setUniformNumberArray)}\r\n                            </div>\r\n                            <br /><br />\r\n                        </div>\r\n\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"sendButtonArea\">\r\n                {/* {<button\r\n                    onClick={() => {\r\n                        handleSousin(copyMember, selectedMember, urlTournamentId, uniformNumberArray)\r\n                    }}\r\n                    className=\"sendButton\"\r\n                    >登録\r\n                </button>} */}\r\n                <MemberPopup\r\n                    handleSousin={handleSousin}\r\n                    copyMember={copyMember}\r\n                    selectedMember={selectedMember}\r\n                    urlTournamentId={urlTournamentId}\r\n                    uniformNumberArray={uniformNumberArray}\r\n                    PageTransition={PageTransition}\r\n                    registeredMembers={registeredMembers}\r\n                />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default InputMember"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useNavigate}from'react-router-dom';import{TitleBar}from'../OtherPage/TitleBar/TitleBar';import'./home.css';import{useCookies}from'react-cookie';import{useEffect}from'react';//バックエンドのurlを取得\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var backendUrl=require(\"../../DB/communication\").backendUrl;//フロントの階層urlを取得\nvar routeUrl=require(\"../../DB/communication\").routeUrl;var Home=function Home(){var _useCookies=useCookies(),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];//ページ遷移用\nvar navigate=useNavigate();var PageTransition=function PageTransition(url){navigate(url);};useEffect(function(){var gameStart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var CheckSess,sess;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(backendUrl+\"/auth/check_sess\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({sessionID:cookies.sessionID})});case 2:CheckSess=_context.sent;_context.next=5;return CheckSess.text();case 5:sess=_context.sent;console.log(sess);console.log(cookies.sessionID);if(sess==='logout'){PageTransition(routeUrl+\"/login\");// return <Redirect to=\"http://localhost:3000/login\"/>            \n}case 9:case\"end\":return _context.stop();}}},_callee);}));return function gameStart(){return _ref.apply(this,arguments);};}();gameStart();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"homeHeader\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"heading\",children:\"HOME\"}),/*#__PURE__*/_jsx(\"div\",{class:\"logout\",children:/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-arrow-right-from-bracket\",onClick:function onClick(){fetch(backendUrl+\"/auth/logout\",{method:\"POST\",mode:\"cors\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({sessionID:cookies.sessionID})}).then(function(response){return response.text();}).then(function(data){console.log(data);});PageTransition(routeUrl+\"/login\");}})})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"whole\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"btn\",onClick:function onClick(){return PageTransition('pre_input/input_tournament');},children:\"\\u4E8B\\u524D\\u5165\\u529B\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn\",onClick:function onClick(){return PageTransition('sokuho/sokuho_select_tournament');},children:\"\\u901F\\u5831\\u5165\\u529B\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn\",onClick:function onClick(){return PageTransition('acount_register');},children:\"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u767B\\u9332\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn\",onClick:function onClick(){return PageTransition(\"RegisterVenue\");},children:\"\\u4F1A\\u5834\\u767B\\u9332\"})]})]});};export default Home;","map":{"version":3,"names":["React","useNavigate","TitleBar","useCookies","useEffect","backendUrl","require","routeUrl","Home","cookies","setCookie","removeCookie","navigate","PageTransition","url","gameStart","fetch","method","mode","headers","body","JSON","stringify","sessionID","CheckSess","text","sess","console","log","then","response","data"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/src/AllPage/HomePage/Home.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nimport { TitleBar } from '../OtherPage/TitleBar/TitleBar'\r\nimport './home.css'\r\nimport { useCookies } from 'react-cookie'\r\nimport { useEffect } from 'react'\r\n\r\n\r\n//バックエンドのurlを取得\r\nconst backendUrl = require(\"../../DB/communication\").backendUrl;\r\n\r\n//フロントの階層urlを取得\r\nconst routeUrl = require(\"../../DB/communication\").routeUrl;\r\n\r\n\r\n\r\n\r\nconst Home = () => {\r\n\r\n    const [cookies, setCookie, removeCookie] = useCookies();\r\n\r\n    //ページ遷移用\r\n    const navigate = useNavigate()\r\n    const PageTransition = (url) => {\r\n        navigate(url)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const gameStart = async () => {\r\n            const CheckSess = await fetch(backendUrl + \"/auth/check_sess\",\r\n                {\r\n                    method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", },\r\n                    body: JSON.stringify({ sessionID: cookies.sessionID })\r\n                })\r\n            const sess = await CheckSess.text();\r\n            console.log(sess)\r\n            console.log(cookies.sessionID)\r\n            if (sess === 'logout') {\r\n                PageTransition(routeUrl + \"/login\");\r\n                // return <Redirect to=\"http://localhost:3000/login\"/>            \r\n            }\r\n        }\r\n        gameStart()\r\n    }, [])\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n\r\n            <header className='homeHeader'>\r\n                <div class=\"heading\">HOME</div>\r\n                <div class=\"logout\">\r\n                    <button><i\r\n                        class=\"fa-solid fa-arrow-right-from-bracket\"\r\n                        onClick={() => {\r\n                            fetch(backendUrl + \"/auth/logout\", {\r\n                                method: \"POST\", mode: \"cors\",\r\n                                headers: { \"Content-Type\": \"application/json\", },\r\n                                body: JSON.stringify({ sessionID: cookies.sessionID })\r\n                            })\r\n                                .then((response) => response.text())\r\n                                .then((data) => { console.log(data) })\r\n                            PageTransition(routeUrl + \"/login\")\r\n                        }}\r\n                    ></i></button>\r\n                </div>\r\n            </header>\r\n\r\n\r\n\r\n            <div class=\"whole\">\r\n                <button class=\"btn\" onClick={() => PageTransition('pre_input/input_tournament')}>事前入力</button>\r\n                <button class=\"btn\" onClick={() => PageTransition('sokuho/sokuho_select_tournament')}>速報入力</button>\r\n                <button class=\"btn\" onClick={() => PageTransition('acount_register')}>アカウント登録</button>\r\n                <button class=\"btn\" onClick={() => PageTransition(\"RegisterVenue\")}>会場登録</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
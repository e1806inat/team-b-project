{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\morim\\\\Desktop\\\\my_folder\\\\school\\\\lesson\\\\ensyu\\\\code\\\\team-b-project-output\\\\team-b-project\\\\frontend\\\\src\\\\AllPage\\\\InputAll\\\\Sokuho\\\\SokuhoGameStartPage\\\\SokuhoGameStartPage.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\n\n//バックエンドのurlを取得\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst backendUrl = require(\"../../../../DB/communication\").backendUrl;\n\n//試合中の試合の情報を登録する\nconst RegisterDuringGame = async (urlGameId, useEffectFlag, setUseEffectFlag) => {\n  await fetch(backendUrl + \"/game/during_game_register\", {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      game_id: urlGameId,\n      tmp_table_name: String(urlGameId)\n    })\n  }).then(response => response.text()).then(data => {\n    setUseEffectFlag(!useEffectFlag);\n  });\n};\n\n//一時打席情報登録用のテーブル作成\n_c = RegisterDuringGame;\nconst TmpTableCreate = async urlGameId => {\n  await fetch(backendUrl + \"/daseki/tmp_table_create\", {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      table_name: urlGameId\n    })\n  }).then(response => response.text()).then(data => {\n    console.log(data);\n  });\n};\n\n//テーブル存在確認\n_c2 = TmpTableCreate;\nconst TmpTableCheck = (urlGameId, setIsExistTmpTable) => {\n  fetch(backendUrl + \"/daseki/tmp_table_check\", {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      table_name: urlGameId\n    })\n  }).then(response => response.text()).then(data => {\n    //テーブルが存在しないとき\n    if (data === \"not exist\") {\n      setIsExistTmpTable(false);\n    }\n\n    //テーブルが存在するとき\n    else if (data === \"exist\") {\n      setIsExistTmpTable(true);\n      console.log(data);\n    }\n  });\n};\n\n//試合中の試合の情報を参照する\n_c3 = TmpTableCheck;\nconst RefDuringGame = async (urlGameId, setIsDuringGame) => {\n  fetch(backendUrl + \"/game/ref_during_game\", {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.json()).then(data => {\n    if (data.some(v => String(v.game_id) === urlGameId)) {\n      setIsDuringGame(true);\n    }\n  });\n};\n_c4 = RefDuringGame;\nconst SokuhoGameStartPage = () => {\n  _s();\n  //ページ遷移用\n  const navigate = useNavigate();\n  const PageTransition = url => {\n    navigate(url);\n  };\n\n  //urlから値を読み出す\n  const [searchParams] = useSearchParams();\n  const urlTournamentId = searchParams.get(\"urlTournamentId\");\n  const urlTournamentName = searchParams.get(\"urlTournamentName\");\n  const urlSchoolId = searchParams.get(\"urlSchoolId\");\n  const urlSchoolName = searchParams.get(\"urlSchoolName\");\n  const urlSchoolId2 = searchParams.get(\"urlSchoolId2\");\n  const urlSchoolName2 = searchParams.get(\"urlSchoolName2\");\n  const urlGameId = searchParams.get(\"urlGameId\");\n  const [isExistTmpTable, setIsExistTmpTable] = useState(false);\n  const [useEffectFlag, setUseEffectFlag] = useState(false);\n  const [isDuringGame, setIsDuringGame] = useState(false);\n  useEffect(() => {\n    TmpTableCheck(urlGameId, setIsExistTmpTable);\n    RefDuringGame(urlGameId, setIsDuringGame);\n  }, [useEffectFlag]);\n  if (isExistTmpTable === false || isDuringGame === false) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          height: 100 + \"px\",\n          width: 30 + \"%\",\n          fontSize: 30 + \"px\"\n        },\n        onClick: async () => {\n          await TmpTableCreate(urlGameId);\n          await RegisterDuringGame(urlGameId, useEffectFlag, setUseEffectFlag);\n        },\n        children: \"\\u8A66\\u5408\\u3092\\u958B\\u59CB\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  } else {\n    PageTransition(\"InputPlayGame?urlTournamentId=\" + urlTournamentId + \"&urlTournamentName=\" + urlTournamentName + \"&urlSchoolId=\" + urlSchoolId + \"&urlSchoolName=\" + urlSchoolName + \"&urlSchoolId2=\" + urlSchoolId2 + \"&urlSchoolName2=\" + urlSchoolName2 + \"&urlGameId=\" + urlGameId);\n  }\n};\n\n//配置する部品の決まり文句\n_s(SokuhoGameStartPage, \"LvXfFHFhM8fCPyiOsSedqWRalxo=\", false, function () {\n  return [useNavigate, useSearchParams];\n});\n_c5 = SokuhoGameStartPage;\nexport default SokuhoGameStartPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"RegisterDuringGame\");\n$RefreshReg$(_c2, \"TmpTableCreate\");\n$RefreshReg$(_c3, \"TmpTableCheck\");\n$RefreshReg$(_c4, \"RefDuringGame\");\n$RefreshReg$(_c5, \"SokuhoGameStartPage\");","map":{"version":3,"names":["useEffect","useState","useSearchParams","useNavigate","backendUrl","require","RegisterDuringGame","urlGameId","useEffectFlag","setUseEffectFlag","fetch","method","mode","headers","body","JSON","stringify","game_id","tmp_table_name","String","then","response","text","data","TmpTableCreate","table_name","console","log","TmpTableCheck","setIsExistTmpTable","RefDuringGame","setIsDuringGame","json","some","v","SokuhoGameStartPage","navigate","PageTransition","url","searchParams","urlTournamentId","get","urlTournamentName","urlSchoolId","urlSchoolName","urlSchoolId2","urlSchoolName2","isExistTmpTable","isDuringGame","height","width","fontSize"],"sources":["C:/Users/morim/Desktop/my_folder/school/lesson/ensyu/code/team-b-project-output/team-b-project/frontend/src/AllPage/InputAll/Sokuho/SokuhoGameStartPage/SokuhoGameStartPage.jsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\n\r\n//バックエンドのurlを取得\r\nconst backendUrl = require(\"../../../../DB/communication\").backendUrl;\r\n\r\n\r\n//試合中の試合の情報を登録する\r\nconst RegisterDuringGame = async (urlGameId, useEffectFlag, setUseEffectFlag) => {\r\n    await fetch(backendUrl + \"/game/during_game_register\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ game_id: urlGameId, tmp_table_name: String(urlGameId) }),\r\n    })\r\n        .then((response) => response.text())\r\n        .then((data) => { setUseEffectFlag(!useEffectFlag) })\r\n}\r\n\r\n//一時打席情報登録用のテーブル作成\r\nconst TmpTableCreate = async (urlGameId) => {\r\n\r\n    await fetch(backendUrl + \"/daseki/tmp_table_create\", {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ table_name: urlGameId }),\r\n    })\r\n        .then((response) => response.text())\r\n        .then((data) => { console.log(data) })\r\n}\r\n\r\n//テーブル存在確認\r\nconst TmpTableCheck = (urlGameId, setIsExistTmpTable) => {\r\n\r\n    fetch(backendUrl + \"/daseki/tmp_table_check\",\r\n        {\r\n            method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", },\r\n            body: JSON.stringify({ table_name: urlGameId }),\r\n        }\r\n    )\r\n        .then((response) => response.text())\r\n        .then((data) => {\r\n\r\n            //テーブルが存在しないとき\r\n            if (data === \"not exist\") {\r\n                setIsExistTmpTable(false)\r\n            }\r\n\r\n            //テーブルが存在するとき\r\n            else if (data === \"exist\") {\r\n                setIsExistTmpTable(true)\r\n                console.log(data)\r\n            }\r\n        })\r\n}\r\n\r\n//試合中の試合の情報を参照する\r\nconst RefDuringGame = async (urlGameId, setIsDuringGame) => {\r\n    fetch(backendUrl + \"/game/ref_during_game\",\r\n        { method: \"POST\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\", } }\r\n    )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            if (data.some((v) => String(v.game_id) === urlGameId)) {\r\n                setIsDuringGame(true)\r\n            }\r\n        })\r\n}\r\n\r\n\r\nconst SokuhoGameStartPage = () => {\r\n\r\n    //ページ遷移用\r\n    const navigate = useNavigate()\r\n    const PageTransition = (url) => {\r\n        navigate(url)\r\n    }\r\n\r\n    //urlから値を読み出す\r\n    const [searchParams] = useSearchParams();\r\n    const urlTournamentId = searchParams.get(\"urlTournamentId\")\r\n    const urlTournamentName = searchParams.get(\"urlTournamentName\")\r\n    const urlSchoolId = searchParams.get(\"urlSchoolId\")\r\n    const urlSchoolName = searchParams.get(\"urlSchoolName\")\r\n    const urlSchoolId2 = searchParams.get(\"urlSchoolId2\")\r\n    const urlSchoolName2 = searchParams.get(\"urlSchoolName2\")\r\n    const urlGameId = searchParams.get(\"urlGameId\")\r\n\r\n    const [isExistTmpTable, setIsExistTmpTable] = useState(false)\r\n    const [useEffectFlag, setUseEffectFlag] = useState(false)\r\n    const [isDuringGame, setIsDuringGame] = useState(false)\r\n\r\n    useEffect(() => {\r\n        TmpTableCheck(urlGameId, setIsExistTmpTable)\r\n        RefDuringGame(urlGameId, setIsDuringGame)\r\n    }, [useEffectFlag])\r\n\r\n\r\n    if (isExistTmpTable === false || isDuringGame === false) {\r\n        return (\r\n            <>\r\n                <button\r\n                    style={{ height: 100 + \"px\", width: 30 + \"%\", fontSize: 30 + \"px\" }}\r\n                    onClick={async () => {\r\n                        await TmpTableCreate(urlGameId)\r\n                        await RegisterDuringGame(urlGameId, useEffectFlag, setUseEffectFlag)\r\n                    }}\r\n                >試合を開始する\r\n                </button>\r\n            </>\r\n        )\r\n    }\r\n\r\n    else {\r\n        PageTransition(\r\n            \"InputPlayGame?urlTournamentId=\" +\r\n            urlTournamentId +\r\n            \"&urlTournamentName=\" +\r\n            urlTournamentName +\r\n            \"&urlSchoolId=\" +\r\n            urlSchoolId +\r\n            \"&urlSchoolName=\" +\r\n            urlSchoolName +\r\n            \"&urlSchoolId2=\" +\r\n            urlSchoolId2 +\r\n            \"&urlSchoolName2=\" +\r\n            urlSchoolName2 +\r\n            \"&urlGameId=\" +\r\n            urlGameId\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n//配置する部品の決まり文句\r\nexport default SokuhoGameStartPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}